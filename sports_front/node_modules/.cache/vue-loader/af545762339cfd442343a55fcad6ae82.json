{"remainingRequest":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\student\\NoticeList.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\student\\NoticeList.vue","mtime":1742788726305},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741946992817},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1741946991478},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741946992817},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1741947007540}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTm90aWNlTGlzdCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaEtleXdvcmQ6ICcnLAogICAgICBzZWFyY2hUeXBlOiAnJywKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgdG90YWw6IDAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBub3RpY2VMaXN0OiBbXSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHZpZXdpbmdOb3RpY2U6IHt9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaE5vdGljZUxpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZmV0Y2hOb3RpY2VMaXN0KCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoJy9hcGkvc3R1ZGVudC9ub3RpY2VzJywgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGtleXdvcmQ6IHRoaXMuc2VhcmNoS2V5d29yZCwKICAgICAgICAgICAgdHlwZTogdGhpcy5zZWFyY2hUeXBlLAogICAgICAgICAgICBwYWdlOiB0aGlzLmN1cnJlbnRQYWdlIC0gMSwKICAgICAgICAgICAgc2l6ZTogdGhpcy5wYWdlU2l6ZQogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICB0aGlzLm5vdGljZUxpc3QgPSBkYXRhLmNvbnRlbnQgfHwgW107CiAgICAgICAgICB0aGlzLnRvdGFsID0gZGF0YS50b3RhbEVsZW1lbnRzIHx8IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlIHx8ICfojrflj5bpgJrnn6XliJfooajlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W6YCa55+l5YiX6KGo5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ+iOt+WPlumAmuefpeWIl+ihqOWksei0pScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlU2VhcmNoKCkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMQogICAgICB0aGlzLmZldGNoTm90aWNlTGlzdCgpCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbAogICAgICB0aGlzLmZldGNoTm90aWNlTGlzdCgpCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbAogICAgICB0aGlzLmZldGNoTm90aWNlTGlzdCgpCiAgICB9LAogICAgaGFuZGxlVmlldyhub3RpY2UpIHsKICAgICAgdGhpcy52aWV3aW5nTm90aWNlID0geyAuLi5ub3RpY2UgfQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgZ2V0VHlwZVRhZ1R5cGUodHlwZSkgewogICAgICBjb25zdCB0eXBlcyA9IHsKICAgICAgICAnVEVTVF9TQ0hFRFVMRSc6ICdwcmltYXJ5JywKICAgICAgICAnU0NPUkVfUkVMRUFTRSc6ICdzdWNjZXNzJywKICAgICAgICAnU1lTVEVNX01BSU5URU5BTkNFJzogJ3dhcm5pbmcnLAogICAgICAgICdPVEhFUic6ICdpbmZvJwogICAgICB9CiAgICAgIHJldHVybiB0eXBlc1t0eXBlXSB8fCAnaW5mbycKICAgIH0sCiAgICBnZXRUeXBlTGFiZWwodHlwZSkgewogICAgICBjb25zdCBsYWJlbHMgPSB7CiAgICAgICAgJ1RFU1RfU0NIRURVTEUnOiAn5L2T5rWL5a6J5o6SJywKICAgICAgICAnU0NPUkVfUkVMRUFTRSc6ICfmiJDnu6nlhazluIMnLAogICAgICAgICdTWVNURU1fTUFJTlRFTkFOQ0UnOiAn57O757uf57u05oqkJywKICAgICAgICAnT1RIRVInOiAn5YW25LuW6YCa55+lJwogICAgICB9CiAgICAgIHJldHVybiBsYWJlbHNbdHlwZV0gfHwgJ+WFtuS7lumAmuefpScKICAgIH0sCiAgICBmb3JtYXREYXRlVGltZShkYXRldGltZSkgewogICAgICBpZiAoIWRhdGV0aW1lKSByZXR1cm4gJycKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGV0aW1lKS50b0xvY2FsZVN0cmluZygpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["NoticeList.vue"],"names":[],"mappings":";AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NoticeList.vue","sourceRoot":"src/views/student","sourcesContent":["<template>\n  <div class=\"notice-list\">\n    <!-- 顶部搜索栏 -->\n    <div class=\"search-bar\">\n      <el-input\n        v-model=\"searchKeyword\"\n        placeholder=\"搜索通知标题\"\n        style=\"width: 200px\"\n        @keyup.enter.native=\"handleSearch\"\n      >\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"handleSearch\"></el-button>\n      </el-input>\n      <el-select \n        v-model=\"searchType\" \n        placeholder=\"通知类型\" \n        clearable\n        style=\"width: 120px; margin-left: 10px\"\n      >\n        <el-option label=\"全部\" value=\"\"></el-option>\n        <el-option label=\"体测安排\" value=\"TEST_SCHEDULE\"></el-option>\n        <el-option label=\"成绩公布\" value=\"SCORE_RELEASE\"></el-option>\n        <el-option label=\"系统维护\" value=\"SYSTEM_MAINTENANCE\"></el-option>\n        <el-option label=\"其他通知\" value=\"OTHER\"></el-option>\n      </el-select>\n    </div>\n\n    <!-- 通知列表 -->\n    <el-table\n      :data=\"noticeList\"\n      border\n      style=\"width: 100%\"\n      v-loading=\"loading\"\n    >\n      <el-table-column prop=\"type\" label=\"类型\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"getTypeTagType(scope.row.type)\">\n            {{ getTypeLabel(scope.row.type) }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"title\" label=\"标题\" show-overflow-tooltip>\n        <template slot-scope=\"scope\">\n          <span :class=\"{'important-notice': scope.row.priority === 'HIGH'}\">\n            {{ scope.row.title }}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"发布时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ formatDateTime(scope.row.createTime) }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"100\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"text\"\n            size=\"small\"\n            @click=\"handleView(scope.row)\"\n          >\n            查看详情\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div class=\"pagination-container\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[10, 20, 50]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      >\n      </el-pagination>\n    </div>\n\n    <!-- 查看通知详情的对话框 -->\n    <el-dialog\n      :title=\"viewingNotice.title\"\n      :visible.sync=\"dialogVisible\"\n      width=\"600px\"\n    >\n      <div class=\"notice-detail\">\n        <div class=\"notice-header\">\n          <div class=\"notice-type\">\n            <el-tag :type=\"getTypeTagType(viewingNotice.type)\">\n              {{ getTypeLabel(viewingNotice.type) }}\n            </el-tag>\n          </div>\n        </div>\n        <div class=\"notice-meta\">\n          <span>发布时间：{{ formatDateTime(viewingNotice.createTime) }}</span>\n          <span v-if=\"viewingNotice.priority === 'HIGH'\" class=\"notice-priority\">\n            <i class=\"el-icon-warning\"></i>重要通知\n          </span>\n        </div>\n        <div class=\"notice-content\">{{ viewingNotice.content }}</div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'NoticeList',\n  data() {\n    return {\n      searchKeyword: '',\n      searchType: '',\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      loading: false,\n      noticeList: [],\n      dialogVisible: false,\n      viewingNotice: {}\n    }\n  },\n  created() {\n    this.fetchNoticeList()\n  },\n  methods: {\n    async fetchNoticeList() {\n      try {\n        this.loading = true;\n        const response = await this.$axios.get('/api/student/notices', {\n          params: {\n            keyword: this.searchKeyword,\n            type: this.searchType,\n            page: this.currentPage - 1,\n            size: this.pageSize\n          }\n        });\n\n        if (response.data.code === 200) {\n          const data = response.data.data;\n          this.noticeList = data.content || [];\n          this.total = data.totalElements || 0;\n        } else {\n          this.$message.error(response.data.message || '获取通知列表失败');\n        }\n      } catch (error) {\n        console.error('获取通知列表失败:', error);\n        this.$message.error(error.message || '获取通知列表失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleSearch() {\n      this.currentPage = 1\n      this.fetchNoticeList()\n    },\n    handleSizeChange(val) {\n      this.pageSize = val\n      this.fetchNoticeList()\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.fetchNoticeList()\n    },\n    handleView(notice) {\n      this.viewingNotice = { ...notice }\n      this.dialogVisible = true\n    },\n    getTypeTagType(type) {\n      const types = {\n        'TEST_SCHEDULE': 'primary',\n        'SCORE_RELEASE': 'success',\n        'SYSTEM_MAINTENANCE': 'warning',\n        'OTHER': 'info'\n      }\n      return types[type] || 'info'\n    },\n    getTypeLabel(type) {\n      const labels = {\n        'TEST_SCHEDULE': '体测安排',\n        'SCORE_RELEASE': '成绩公布',\n        'SYSTEM_MAINTENANCE': '系统维护',\n        'OTHER': '其他通知'\n      }\n      return labels[type] || '其他通知'\n    },\n    formatDateTime(datetime) {\n      if (!datetime) return ''\n      return new Date(datetime).toLocaleString()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.notice-list {\n  padding: 20px;\n\n  .search-bar {\n    margin-bottom: 20px;\n    display: flex;\n    align-items: center;\n  }\n\n  .important-notice {\n    color: #f56c6c;\n    font-weight: bold;\n  }\n\n  .pagination-container {\n    margin-top: 20px;\n    text-align: right;\n  }\n\n  .notice-detail {\n    .notice-header {\n      margin-bottom: 20px;\n    }\n\n    .notice-meta {\n      color: #909399;\n      margin-bottom: 20px;\n      font-size: 14px;\n\n      .notice-priority {\n        margin-left: 20px;\n        color: #f56c6c;\n      }\n    }\n\n    .notice-content {\n      line-height: 1.6;\n      white-space: pre-wrap;\n      color: #303133;\n    }\n  }\n}\n</style> "]}]}