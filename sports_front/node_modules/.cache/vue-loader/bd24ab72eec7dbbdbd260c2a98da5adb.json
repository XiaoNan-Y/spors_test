{"remainingRequest":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\admin\\DataReview.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\admin\\DataReview.vue","mtime":1741509208834},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1741355860000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdEYXRhUmV2aWV3JywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KPDw8PDw8PCBIRUFEDQogICAgICAvLyDliJfooajmlbDmja4NCiAgICAgIHJlY29yZExpc3Q6IFtdLA0KICAgICAgbG9hZGluZzogZmFsc2UsDQoNCiAgICAgIC8vIOetm+mAieihqOWNlQ0KPT09PT09PQ0KPj4+Pj4+PiA5YWE3MGRmYjg5MzI2ZDA3NTM0OGFkYjc4NmY5ZmNhNjIwOTA0MjMzDQogICAgICBmaWx0ZXJGb3JtOiB7DQogICAgICAgIHNwb3J0c0l0ZW1JZDogJycsDQogICAgICAgIHRlYWNoZXJJZDogJycsDQogICAgICAgIHN0YXR1czogJycsDQogICAgICAgIGRhdGVSYW5nZTogW10NCiAgICAgIH0sDQo8PDw8PDw8IEhFQUQNCg0KICAgICAgLy8g5YiG6aG15L+h5oGvDQo9PT09PT09DQogICAgICBzcG9ydHNJdGVtczogW10sDQogICAgICB0ZWFjaGVyczogW10sDQogICAgICByZWNvcmRMaXN0OiBbXSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KPj4+Pj4+PiA5YWE3MGRmYjg5MzI2ZDA3NTM0OGFkYjc4NmY5ZmNhNjIwOTA0MjMzDQogICAgICBwYWdlOiB7DQogICAgICAgIGN1cnJlbnQ6IDEsDQogICAgICAgIHNpemU6IDEwLA0KICAgICAgICB0b3RhbDogMA0KICAgICAgfSwNCjw8PDw8PDwgSEVBRA0KDQogICAgICAvLyDln7rnoYDmlbDmja4NCiAgICAgIHNwb3J0c0l0ZW1zOiBbXSwNCiAgICAgIHRlYWNoZXJzOiBbXSwNCiAgICAgIHN0dWRlbnRzOiBbXSwNCg0KICAgICAgLy8g5b2T5YmN5pON5L2c55qE6K6w5b2VDQogICAgICBjdXJyZW50UmVjb3JkOiBudWxsLA0KDQogICAgICAvLyDlrqHmoLjlr7nor53moYYNCiAgICAgIHJldmlld0RpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgcmV2aWV3Rm9ybTogew0KICAgICAgICBzdGF0dXM6ICdBUFBST1ZFRCcsDQogICAgICAgIHJldmlld0NvbW1lbnQ6ICcnDQogICAgICB9LA0KICAgICAgcmV2aWV3UnVsZXM6IHsNCiAgICAgICAgc3RhdHVzOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeWuoeaguOe7k+aenCcgfV0sDQogICAgICAgIHJldmlld0NvbW1lbnQ6IFt7IA0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLCANCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5a6h5qC45oSP6KeBJywNCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsDQogICAgICAgICAgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICBpZiAodGhpcy5yZXZpZXdGb3JtLnN0YXR1cyA9PT0gJ1JFSkVDVEVEJyAmJiAhdmFsdWUpIHsNCiAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfpqbPlm57ml7blv4XpobvloavlhpnlrqHmoLjmhI/op4EnKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfV0NCiAgICAgIH0sDQoNCiAgICAgIC8vIOivpuaDheWvueivneahhg0KICAgICAgZGV0YWlsRGlhbG9nVmlzaWJsZTogZmFsc2UsDQoNCiAgICAgIC8vIOa3u+WKoC/kv67mlLnlr7nor53moYYNCiAgICAgIGZvcm1EaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGVkaXRNb2RlOiBmYWxzZSwNCiAgICAgIGZvcm06IHsNCiAgICAgICAgc3R1ZGVudElkOiAnJywNCiAgICAgICAgc3BvcnRzSXRlbUlkOiAnJywNCiAgICAgICAgc2NvcmU6IDAsDQogICAgICAgIHRlc3RUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTkpLnJlcGxhY2UoJ1QnLCAnICcpDQogICAgICB9LA0KICAgICAgZm9ybVJ1bGVzOiB7DQogICAgICAgIHN0dWRlbnRJZDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nlrabnlJ8nIH1dLA0KICAgICAgICBzcG9ydHNJdGVtSWQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5rWL6K+V6aG555uuJyB9XSwNCiAgICAgICAgc2NvcmU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5oiQ57upJyB9XSwNCiAgICAgICAgdGVzdFRpbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5rWL6K+V5pe26Ze0JyB9XQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCg0KPT09PT09PQ0KICAgICAgcmV2aWV3RGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBkZXRhaWxEaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGN1cnJlbnRSZWNvcmQ6IG51bGwsDQogICAgICByZXZpZXdUeXBlOiAnJywNCiAgICAgIHJldmlld0Zvcm06IHsNCiAgICAgICAgcmV2aWV3Q29tbWVudDogJycNCiAgICAgIH0sDQogICAgICByZXZpZXdSdWxlczogew0KICAgICAgICByZXZpZXdDb21tZW50OiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemps+WbnuWOn+WboCcsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0NCiAgICAgIH0sDQogICAgICBlZGl0Rm9ybTogew0KICAgICAgICBzdHVkZW50SWQ6ICcnLA0KICAgICAgICBzcG9ydHNJdGVtSWQ6ICcnLA0KICAgICAgICBzY29yZTogMCwNCiAgICAgICAgdGVzdFRpbWU6ICcnLA0KICAgICAgICBzdGF0dXM6ICcnLA0KICAgICAgICByZXZpZXdDb21tZW50OiAnJw0KICAgICAgfSwNCiAgICAgIGVkaXRSdWxlczogew0KICAgICAgICBzdHVkZW50SWQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5a2m55SfJywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sDQogICAgICAgIHRlYWNoZXJJZDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nmlZnluIgnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwNCiAgICAgICAgc3BvcnRzSXRlbUlkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqea1i+ivlemhueebricsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLA0KICAgICAgICBzY29yZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmiJDnu6knLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgIHRlc3RUaW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqea1i+ivleaXtumXtCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dDQogICAgICB9LA0KICAgICAgYWRkRGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBhZGRGb3JtOiB7DQogICAgICAgIHN0dWRlbnRJZDogJycsDQogICAgICAgIHNwb3J0c0l0ZW1JZDogJycsDQogICAgICAgIHNjb3JlOiAwLA0KICAgICAgICB0ZXN0VGltZTogJycNCiAgICAgIH0sDQogICAgICBhZGRSdWxlczogew0KICAgICAgICBzdHVkZW50SWQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5a2m55SfJywgdHJpZ2dlcjogJ2NoYW5nZScgfQ0KICAgICAgICBdLA0KICAgICAgICBzcG9ydHNJdGVtSWQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5rWL6K+V6aG555uuJywgdHJpZ2dlcjogJ2NoYW5nZScgfQ0KICAgICAgICBdLA0KICAgICAgICBzY29yZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmtYvor5XmiJDnu6knLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICB0ZXN0VGltZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nmtYvor5Xml7bpl7QnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9DQogICAgICAgIF0NCiAgICAgIH0sDQogICAgICBzZWxlY3RlZEl0ZW06IG51bGwsDQogICAgICBzdHVkZW50czogW10sDQogICAgICByZWplY3RSZWFzb246ICcnDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHJldmlld0RpYWxvZ1RpdGxlKCkgew0KICAgICAgcmV0dXJuIHRoaXMucmV2aWV3VHlwZSA9PT0gJ2FwcHJvdmUnID8gJ+WuoeaguOmAmui/h+ehruiupCcgOiAn6amz5Zue56Gu6K6kJw0KICAgIH0NCiAgfSwNCj4+Pj4+Pj4gOWFhNzBkZmI4OTMyNmQwNzUzNDhhZGI3ODZmOWZjYTYyMDkwNDIzMw0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIHRyeSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICAvLyDlhYjojrflj5bln7rnoYDmlbDmja4NCiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFsNCiAgICAgICAgdGhpcy5mZXRjaFNwb3J0c0l0ZW1zKCksDQogICAgICAgIHRoaXMuZmV0Y2hUZWFjaGVycygpLA0KICAgICAgICB0aGlzLmZldGNoU3R1ZGVudHMoKQ0KICAgICAgXSkNCiAgICAgIC8vIOWGjeiOt+WPluiusOW9leWIl+ihqA0KICAgICAgYXdhaXQgdGhpcy5mZXRjaFJlY29yZExpc3QoKQ0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICBjb25zb2xlLmVycm9yKCfliJ3lp4vljJbmlbDmja7lpLHotKU6JywgZXJyb3IpDQogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliJ3lp4vljJbmlbDmja7lpLHotKUnKQ0KICAgIH0gZmluYWxseSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgIH0NCiAgfSwNCjw8PDw8PDwgSEVBRA0KDQogIG1ldGhvZHM6IHsNCiAgICAvLyDmoLzlvI/ljJbml6XmnJ8NCj09PT09PT0NCiAgbWV0aG9kczogew0KPj4+Pj4+PiA5YWE3MGRmYjg5MzI2ZDA3NTM0OGFkYjc4NmY5ZmNhNjIwOTA0MjMzDQogICAgZm9ybWF0RGF0ZShkYXRlKSB7DQogICAgICBpZiAoIWRhdGUpIHJldHVybiAnJw0KICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlU3RyaW5nKCkNCiAgICB9LA0KPDw8PDw8PCBIRUFEDQoNCiAgICAvLyDojrflj5bnirbmgIHmoLflvI8NCj09PT09PT0NCj4+Pj4+Pj4gOWFhNzBkZmI4OTMyNmQwNzUzNDhhZGI3ODZmOWZjYTYyMDkwNDIzMw0KICAgIGdldFN0YXR1c1R5cGUoc3RhdHVzKSB7DQogICAgICBjb25zdCB0eXBlTWFwID0gew0KICAgICAgICAnUEVORElORyc6ICd3YXJuaW5nJywNCiAgICAgICAgJ0FQUFJPVkVEJzogJ3N1Y2Nlc3MnLA0KICAgICAgICAnUkVKRUNURUQnOiAnZGFuZ2VyJw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHR5cGVNYXBbc3RhdHVzXSB8fCAnaW5mbycNCiAgICB9LA0KPDw8PDw8PCBIRUFEDQoNCiAgICAvLyDojrflj5bnirbmgIHmlofmnKwNCj09PT09PT0NCj4+Pj4+Pj4gOWFhNzBkZmI4OTMyNmQwNzUzNDhhZGI3ODZmOWZjYTYyMDkwNDIzMw0KICAgIGdldFN0YXR1c0xhYmVsKHN0YXR1cykgew0KICAgICAgY29uc3QgbGFiZWxNYXAgPSB7DQogICAgICAgICdQRU5ESU5HJzogJ+W+heWuoeaguCcsDQogICAgICAgICdBUFBST1ZFRCc6ICflt7LpgJrov4cnLA0KICAgICAgICAnUkVKRUNURUQnOiAn5bey6amz5ZueJw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGxhYmVsTWFwW3N0YXR1c10gfHwgJ+acquefpScNCiAgICB9LA0KPDw8PDw8PCBIRUFEDQoNCiAgICAvLyDojrflj5bpobnnm67ljZXkvY0NCiAgICBnZXRTcG9ydHNJdGVtVW5pdChpdGVtSWQpIHsNCiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnNwb3J0c0l0ZW1zLmZpbmQoaSA9PiBpLmlkID09PSBpdGVtSWQpDQogICAgICByZXR1cm4gaXRlbSA/IGl0ZW0udW5pdCA6ICcnDQogICAgfSwNCg0KICAgIC8vIOiOt+WPluS9k+iCsumhueebruWIl+ihqA0KPT09PT09PQ0KICAgIGlzQWJub3JtYWxTY29yZShyZWNvcmQpIHsNCiAgICAgIGlmICghcmVjb3JkIHx8ICFyZWNvcmQuc3BvcnRzSXRlbSkgcmV0dXJuIGZhbHNlOw0KICAgICAgDQogICAgICBjb25zdCBhYm5vcm1hbFJ1bGVzID0gew0KICAgICAgICAnMTAw57Gz6LeRJzogKHNjb3JlKSA9PiBzY29yZSA8IDkgfHwgc2NvcmUgPiAyMCwNCiAgICAgICAgJ+eri+Wumui3s+i/nCc6IChzY29yZSkgPT4gc2NvcmUgPCAxLjUgfHwgc2NvcmUgPiAzLjUsDQogICAgICAgICflvJXkvZPlkJHkuIonOiAoc2NvcmUpID0+IHNjb3JlIDwgMCB8fCBzY29yZSA+IDMwLA0KICAgICAgICAnMTAwMOexs+i3kSc6IChzY29yZSkgPT4gc2NvcmUgPCAxODAgfHwgc2NvcmUgPiA2MDAsDQogICAgICAgICfku7DljafotbflnZAnOiAoc2NvcmUpID0+IHNjb3JlIDwgMTAgfHwgc2NvcmUgPiA4MA0KICAgICAgfTsNCg0KICAgICAgY29uc3QgcnVsZSA9IGFibm9ybWFsUnVsZXNbcmVjb3JkLnNwb3J0c0l0ZW0ubmFtZV07DQogICAgICByZXR1cm4gcnVsZSA/IHJ1bGUocmVjb3JkLnNjb3JlKSA6IGZhbHNlOw0KICAgIH0sDQo+Pj4+Pj4+IDlhYTcwZGZiODkzMjZkMDc1MzQ4YWRiNzg2ZjlmY2E2MjA5MDQyMzMNCiAgICBhc3luYyBmZXRjaFNwb3J0c0l0ZW1zKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9hcGkvYWRtaW4vc3BvcnRzLWl0ZW1zJykNCiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMuc3BvcnRzSXRlbXMgPSByZXMuZGF0YS5kYXRhIHx8IFtdDQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluS9k+iCsumhueebruWksei0pTonLCBlcnJvcikNCjw8PDw8PDwgSEVBRA0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bkvZPogrLpobnnm67lpLHotKUnKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDojrflj5bmlZnluIjliJfooagNCj09PT09PT0NCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5L2T6IKy6aG555uu5aSx6LSlOiAnICsgZXJyb3IubWVzc2FnZSkNCiAgICAgICAgdGhpcy5zcG9ydHNJdGVtcyA9IFtdDQogICAgICB9DQogICAgfSwNCj4+Pj4+Pj4gOWFhNzBkZmI4OTMyNmQwNzUzNDhhZGI3ODZmOWZjYTYyMDkwNDIzMw0KICAgIGFzeW5jIGZldGNoVGVhY2hlcnMoKSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnL2FwaS9hZG1pbi91c2VycycsIHsNCiAgICAgICAgICBwYXJhbXM6IHsgdXNlclR5cGU6ICdURUFDSEVSJyB9DQogICAgICAgIH0pDQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCjw8PDw8PDwgSEVBRA0KICAgICAgICAgIHRoaXMudGVhY2hlcnMgPSByZXMuZGF0YS5kYXRhLmNvbnRlbnQgfHwgW10NCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5pWZ5biI5YiX6KGo5aSx6LSlOicsIGVycm9yKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bmlZnluIjliJfooajlpLHotKUnKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDojrflj5blrabnlJ/liJfooagNCiAgICBhc3luYyBmZXRjaFN0dWRlbnRzKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9hcGkvYWRtaW4vdXNlcnMnLCB7DQogICAgICAgICAgcGFyYW1zOiB7IHVzZXJUeXBlOiAnU1RVREVOVCcgfQ0KICAgICAgICB9KQ0KICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgdGhpcy5zdHVkZW50cyA9IHJlcy5kYXRhLmRhdGEuY29udGVudCB8fCBbXQ0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5blrabnlJ/liJfooajlpLHotKU6JywgZXJyb3IpDQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluWtpueUn+WIl+ihqOWksei0pScpDQogICAgICB9DQogICAgfSwNCg0KICAgIC8vIOiOt+WPluiusOW9leWIl+ihqA0KPT09PT09PQ0KICAgICAgICAgIHRoaXMudGVhY2hlcnMgPSByZXMuZGF0YS5kYXRhIHx8IFtdDQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluaVmeW4iOWIl+ihqOWksei0pTonLCBlcnJvcikNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5pWZ5biI5YiX6KGo5aSx6LSlOiAnICsgZXJyb3IubWVzc2FnZSkNCiAgICAgICAgdGhpcy50ZWFjaGVycyA9IFtdDQogICAgICB9DQogICAgfSwNCj4+Pj4+Pj4gOWFhNzBkZmI4OTMyNmQwNzUzNDhhZGI3ODZmOWZjYTYyMDkwNDIzMw0KICAgIGFzeW5jIGZldGNoUmVjb3JkTGlzdCgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICAgIHN0YXR1czogdGhpcy5maWx0ZXJGb3JtLnN0YXR1cywNCiAgICAgICAgICB0ZWFjaGVySWQ6IHRoaXMuZmlsdGVyRm9ybS50ZWFjaGVySWQsDQogICAgICAgICAgc3BvcnRzSXRlbUlkOiB0aGlzLmZpbHRlckZvcm0uc3BvcnRzSXRlbUlkLA0KICAgICAgICAgIHN0YXJ0RGF0ZTogdGhpcy5maWx0ZXJGb3JtLmRhdGVSYW5nZT8uWzBdIHx8IG51bGwsDQogICAgICAgICAgZW5kRGF0ZTogdGhpcy5maWx0ZXJGb3JtLmRhdGVSYW5nZT8uWzFdIHx8IG51bGwsDQogICAgICAgICAgcGFnZTogdGhpcy5wYWdlLmN1cnJlbnQgLSAxLA0KICAgICAgICAgIHNpemU6IHRoaXMucGFnZS5zaXplDQogICAgICAgIH0NCiAgICAgICAgDQo8PDw8PDw8IEhFQUQNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9hcGkvYWRtaW4vdGVzdC1yZWNvcmRzL3JldmlldycsIHsgcGFyYW1zIH0pDQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLnJlY29yZExpc3QgPSByZXMuZGF0YS5kYXRhLmNvbnRlbnQgfHwgW10NCiAgICAgICAgICB0aGlzLnBhZ2UudG90YWwgPSByZXMuZGF0YS5kYXRhLnRvdGFsRWxlbWVudHMgfHwgMA0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5borrDlvZXliJfooajlpLHotKU6JywgZXJyb3IpDQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluiusOW9leWIl+ihqOWksei0pScpDQo9PT09PT09DQogICAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyByZWNvcmRzIHdpdGggcGFyYW1zOicsIHBhcmFtcykNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9hcGkvYWRtaW4vdGVzdC1yZWNvcmRzL3JldmlldycsIHsgcGFyYW1zIH0pDQogICAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZTonLCByZXMuZGF0YSkNCg0KICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgdGhpcy5yZWNvcmRMaXN0ID0gQXJyYXkuaXNBcnJheShyZXMuZGF0YS5kYXRhLmNvbnRlbnQpID8gcmVzLmRhdGEuZGF0YS5jb250ZW50IDogW10NCiAgICAgICAgICB0aGlzLnBhZ2UudG90YWwgPSByZXMuZGF0YS5kYXRhLnRvdGFsRWxlbWVudHMgfHwgMA0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZGF0YS5tc2cgfHwgJ+iOt+WPluiusOW9leWIl+ihqOWksei0pScpDQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluiusOW9leWIl+ihqOWksei0pTonLCBlcnJvcikNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W6K6w5b2V5YiX6KGo5aSx6LSlOiAnICsgZXJyb3IubWVzc2FnZSkNCiAgICAgICAgdGhpcy5yZWNvcmRMaXN0ID0gW10NCj4+Pj4+Pj4gOWFhNzBkZmI4OTMyNmQwNzUzNDhhZGI3ODZmOWZjYTYyMDkwNDIzMw0KICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KPDw8PDw8PCBIRUFEDQoNCiAgICAvLyDlpITnkIbmkJzntKINCj09PT09PT0NCj4+Pj4+Pj4gOWFhNzBkZmI4OTMyNmQwNzUzNDhhZGI3ODZmOWZjYTYyMDkwNDIzMw0KICAgIGhhbmRsZVNlYXJjaCgpIHsNCiAgICAgIHRoaXMucGFnZS5jdXJyZW50ID0gMQ0KICAgICAgdGhpcy5mZXRjaFJlY29yZExpc3QoKQ0KICAgIH0sDQo8PDw8PDw8IEhFQUQNCg0KICAgIC8vIOmHjee9ruetm+mAiQ0KPT09PT09PQ0KPj4+Pj4+PiA5YWE3MGRmYjg5MzI2ZDA3NTM0OGFkYjc4NmY5ZmNhNjIwOTA0MjMzDQogICAgcmVzZXRGaWx0ZXIoKSB7DQogICAgICB0aGlzLmZpbHRlckZvcm0gPSB7DQogICAgICAgIHNwb3J0c0l0ZW1JZDogJycsDQogICAgICAgIHRlYWNoZXJJZDogJycsDQogICAgICAgIHN0YXR1czogJycsDQogICAgICAgIGRhdGVSYW5nZTogW10NCiAgICAgIH0NCiAgICAgIHRoaXMuaGFuZGxlU2VhcmNoKCkNCiAgICB9LA0KPDw8PDw8PCBIRUFEDQoNCiAgICAvLyDlpITnkIbliIbpobXlpKflsI/mlLnlj5gNCj09PT09PT0NCj4+Pj4+Pj4gOWFhNzBkZmI4OTMyNmQwNzUzNDhhZGI3ODZmOWZjYTYyMDkwNDIzMw0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2Uuc2l6ZSA9IHZhbA0KICAgICAgdGhpcy5mZXRjaFJlY29yZExpc3QoKQ0KICAgIH0sDQo8PDw8PDw8IEhFQUQNCg0KICAgIC8vIOWkhOeQhumhteeggeaUueWPmA0KPT09PT09PQ0KPj4+Pj4+PiA5YWE3MGRmYjg5MzI2ZDA3NTM0OGFkYjc4NmY5ZmNhNjIwOTA0MjMzDQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMucGFnZS5jdXJyZW50ID0gdmFsDQogICAgICB0aGlzLmZldGNoUmVjb3JkTGlzdCgpDQogICAgfSwNCjw8PDw8PDwgSEVBRA0KDQogICAgLy8g5aSE55CG5a6h5qC4DQogICAgaGFuZGxlUmV2aWV3KHJlY29yZCkgew0KICAgICAgdGhpcy5jdXJyZW50UmVjb3JkID0gcmVjb3JkDQogICAgICB0aGlzLnJldmlld0Zvcm0gPSB7DQogICAgICAgIHN0YXR1czogJ0FQUFJPVkVEJywNCiAgICAgICAgcmV2aWV3Q29tbWVudDogJycNCiAgICAgIH0NCiAgICAgIHRoaXMucmV2aWV3RGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KDQogICAgLy8g5o+Q5Lqk5a6h5qC4DQogICAgYXN5bmMgc3VibWl0UmV2aWV3KCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgdGhpcy4kcmVmcy5yZXZpZXdGb3JtLnZhbGlkYXRlKCkNCiAgICAgICAgDQogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsNCiAgICAgICAgICBpZDogdGhpcy5jdXJyZW50UmVjb3JkLmlkLA0KICAgICAgICAgIHN0YXR1czogdGhpcy5yZXZpZXdGb3JtLnN0YXR1cywNCiAgICAgICAgICByZXZpZXdDb21tZW50OiB0aGlzLnJldmlld0Zvcm0ucmV2aWV3Q29tbWVudCwNCiAgICAgICAgICByZXZpZXdlcklkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmlkDQogICAgICAgIH0NCg0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLnB1dCgnL2FwaS9hZG1pbi90ZXN0LXJlY29yZHMvcmV2aWV3JywgcGFyYW1zKQ0KICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKA0KICAgICAgICAgICAgdGhpcy5yZXZpZXdGb3JtLnN0YXR1cyA9PT0gJ0FQUFJPVkVEJyA/ICflrqHmoLjpgJrov4fmiJDlip8nIDogJ+mps+WbnuaIkOWKnycNCiAgICAgICAgICApDQogICAgICAgICAgdGhpcy5yZXZpZXdEaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoUmVjb3JkTGlzdCgpDQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WuoeaguOWksei0pTonLCBlcnJvcikNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5a6h5qC45aSx6LSlOiAnICsgZXJyb3IubWVzc2FnZSkNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5aSE55CG6K+m5oOF5p+l55yLDQogICAgaGFuZGxlRGV0YWlsKHJlY29yZCkgew0KICAgICAgdGhpcy5jdXJyZW50UmVjb3JkID0gcmVjb3JkDQogICAgICB0aGlzLmRldGFpbERpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCg0KICAgIC8vIOWkhOeQhua3u+WKoA0KICAgIGhhbmRsZUFkZCgpIHsNCiAgICAgIHRoaXMuZWRpdE1vZGUgPSBmYWxzZQ0KICAgICAgdGhpcy5mb3JtID0gew0KPT09PT09PQ0KICAgIGhhbmRsZVJldmlldyhyZWNvcmQsIHR5cGUpIHsNCiAgICAgIHRoaXMuY3VycmVudFJlY29yZCA9IHsgLi4ucmVjb3JkIH0NCiAgICAgIHRoaXMucmV2aWV3VHlwZSA9IHR5cGUNCiAgICAgIHRoaXMucmV2aWV3Rm9ybS5yZXZpZXdDb21tZW50ID0gJycNCiAgICAgIHRoaXMucmV2aWV3RGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGhhbmRsZURldGFpbChyZWNvcmQpIHsNCiAgICAgIHRoaXMuY3VycmVudFJlY29yZCA9IHsgLi4ucmVjb3JkIH0NCiAgICAgIHRoaXMuZGV0YWlsRGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGhhbmRsZUVkaXQocmVjb3JkKSB7DQogICAgICB0aGlzLmN1cnJlbnRSZWNvcmQgPSByZWNvcmQ7DQogICAgICB0aGlzLmVkaXRGb3JtID0gew0KICAgICAgICBzdHVkZW50SWQ6IHJlY29yZC5zdHVkZW50Py5pZCwNCiAgICAgICAgdGVhY2hlcklkOiByZWNvcmQudGVhY2hlcj8uaWQsDQogICAgICAgIHNwb3J0c0l0ZW1JZDogcmVjb3JkLnNwb3J0c0l0ZW0/LmlkLA0KICAgICAgICBzY29yZTogcmVjb3JkLnNjb3JlLA0KICAgICAgICB0ZXN0VGltZTogcmVjb3JkLnRlc3RUaW1lLA0KICAgICAgICBzdGF0dXM6IHJlY29yZC5zdGF0dXMsDQogICAgICAgIHJlbWFyazogcmVjb3JkLnJlbWFyayB8fCAnJw0KICAgICAgfTsNCiAgICAgIHRoaXMuZWRpdERpYWxvZ1Zpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgYXN5bmMgc3VibWl0RWRpdCgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGF3YWl0IHRoaXMuJHJlZnMuZWRpdEZvcm0udmFsaWRhdGUoKTsNCiAgICAgICAgDQogICAgICAgIC8vIOaehOmAoOivt+axguaVsOaNru+8jOehruS/neaVsOaNruagvOW8j+ato+ehrg0KICAgICAgICBjb25zdCBlZGl0RGF0YSA9IHsNCiAgICAgICAgICBpZDogdGhpcy5jdXJyZW50UmVjb3JkLmlkLA0KICAgICAgICAgIHN0dWRlbnQ6IHsgaWQ6IHRoaXMuZWRpdEZvcm0uc3R1ZGVudElkIH0sDQogICAgICAgICAgdGVhY2hlcjogeyBpZDogdGhpcy5lZGl0Rm9ybS50ZWFjaGVySWQgfSwNCiAgICAgICAgICBzcG9ydHNJdGVtOiB7IGlkOiB0aGlzLmVkaXRGb3JtLnNwb3J0c0l0ZW1JZCB9LA0KICAgICAgICAgIHNjb3JlOiBwYXJzZUZsb2F0KHRoaXMuZWRpdEZvcm0uc2NvcmUpLA0KICAgICAgICAgIHRlc3RUaW1lOiB0aGlzLmVkaXRGb3JtLnRlc3RUaW1lID8gbmV3IERhdGUodGhpcy5lZGl0Rm9ybS50ZXN0VGltZSkudG9JU09TdHJpbmcoKSA6IG51bGwsDQogICAgICAgICAgc3RhdHVzOiB0aGlzLmVkaXRGb3JtLnN0YXR1cywNCiAgICAgICAgICByZW1hcms6IHRoaXMuZWRpdEZvcm0ucmVtYXJrDQogICAgICAgIH07DQoNCiAgICAgICAgY29uc29sZS5sb2coJ1N1Ym1pdHRpbmcgZWRpdCBkYXRhOicsIGVkaXREYXRhKTsNCg0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLnB1dCgNCiAgICAgICAgICBgL2FwaS9hZG1pbi90ZXN0LXJlY29yZHMvJHt0aGlzLmN1cnJlbnRSZWNvcmQuaWR9YCwNCiAgICAgICAgICBlZGl0RGF0YQ0KICAgICAgICApOw0KDQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpOw0KICAgICAgICAgIHRoaXMuZWRpdERpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoUmVjb3JkTGlzdCgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZGF0YS5tc2cgfHwgJ+S/ruaUueWksei0pScpOw0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCfkv67mlLnlpLHotKU6JywgZXJyb3IpOw0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkv67mlLnlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2U/LmRhdGE/Lm1zZyB8fCBlcnJvci5tZXNzYWdlKSk7DQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVBZGQoKSB7DQogICAgICB0aGlzLmFkZEZvcm0gPSB7DQo+Pj4+Pj4+IDlhYTcwZGZiODkzMjZkMDc1MzQ4YWRiNzg2ZjlmY2E2MjA5MDQyMzMNCiAgICAgICAgc3R1ZGVudElkOiAnJywNCiAgICAgICAgc3BvcnRzSXRlbUlkOiAnJywNCiAgICAgICAgc2NvcmU6IDAsDQogICAgICAgIHRlc3RUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTkpLnJlcGxhY2UoJ1QnLCAnICcpDQogICAgICB9DQo8PDw8PDw8IEhFQUQNCiAgICAgIHRoaXMuZm9ybURpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCg0KICAgIC8vIOWkhOeQhue8lui+kQ0KICAgIGhhbmRsZUVkaXQocmVjb3JkKSB7DQogICAgICB0aGlzLmVkaXRNb2RlID0gdHJ1ZQ0KICAgICAgdGhpcy5jdXJyZW50UmVjb3JkID0gcmVjb3JkDQogICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgIHN0dWRlbnRJZDogcmVjb3JkLnN0dWRlbnQuaWQsDQogICAgICAgIHNwb3J0c0l0ZW1JZDogcmVjb3JkLnNwb3J0c0l0ZW0uaWQsDQogICAgICAgIHNjb3JlOiByZWNvcmQuc2NvcmUsDQogICAgICAgIHRlc3RUaW1lOiByZWNvcmQudGVzdFRpbWUNCiAgICAgIH0NCiAgICAgIHRoaXMuZm9ybURpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCg0KICAgIC8vIOaPkOS6pOihqOWNlQ0KICAgIGFzeW5jIHN1Ym1pdEZvcm0oKSB7DQogICAgICB0cnkgew0KICAgICAgICBhd2FpdCB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKQ0KICAgICAgICANCiAgICAgICAgY29uc3QgZGF0YSA9IHsNCiAgICAgICAgICBzdHVkZW50OiB7IGlkOiB0aGlzLmZvcm0uc3R1ZGVudElkIH0sDQogICAgICAgICAgc3BvcnRzSXRlbTogeyBpZDogdGhpcy5mb3JtLnNwb3J0c0l0ZW1JZCB9LA0KICAgICAgICAgIHRlYWNoZXI6IHsgaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuaWQgfSwNCiAgICAgICAgICBzY29yZTogdGhpcy5mb3JtLnNjb3JlLA0KICAgICAgICAgIHRlc3RUaW1lOiB0aGlzLmZvcm0udGVzdFRpbWUNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0aGlzLmVkaXRNb2RlKSB7DQogICAgICAgICAgZGF0YS5pZCA9IHRoaXMuY3VycmVudFJlY29yZC5pZA0KICAgICAgICAgIGF3YWl0IHRoaXMuJGh0dHAucHV0KGAvYXBpL2FkbWluL3Rlc3QtcmVjb3Jkcy8ke2RhdGEuaWR9YCwgZGF0YSkNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL2FkbWluL3Rlc3QtcmVjb3Jkcy9hZGQnLCBkYXRhKQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5oiQ5YqfJykNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuZm9ybURpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICBhd2FpdCB0aGlzLmZldGNoUmVjb3JkTGlzdCgpDQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuZWRpdE1vZGUgPyAn5L+u5pS55aSx6LSlOicgOiAn5re75Yqg5aSx6LSlOicsIGVycm9yKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCh0aGlzLmVkaXRNb2RlID8gJ+S/ruaUuScgOiAn5re75YqgJykgKyAn5aSx6LSlOiAnICsgZXJyb3IubWVzc2FnZSkNCj09PT09PT0NCiAgICAgIHRoaXMuYWRkRGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIGlmICh0aGlzLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLmZldGNoU3R1ZGVudHMoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlSXRlbUNoYW5nZShpdGVtSWQpIHsNCiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gdGhpcy5zcG9ydHNJdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gaXRlbUlkKQ0KICAgIH0sDQogICAgYXN5bmMgc3VibWl0QWRkKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgdGhpcy4kcmVmcy5hZGRGb3JtLnZhbGlkYXRlKCkNCiAgICAgICAgDQogICAgICAgIC8vIOi9rOaNouaXpeacn+aXtumXtOagvOW8jw0KICAgICAgICBjb25zdCB0ZXN0VGltZSA9IHRoaXMuYWRkRm9ybS50ZXN0VGltZSA/IG5ldyBEYXRlKHRoaXMuYWRkRm9ybS50ZXN0VGltZSkgOiBuZXcgRGF0ZSgpOw0KICAgICAgICANCiAgICAgICAgLy8g5p6E6YCg6K+35rGC5pWw5o2uDQogICAgICAgIGNvbnN0IHJlY29yZERhdGEgPSB7DQogICAgICAgICAgc3R1ZGVudDogeyBpZDogcGFyc2VJbnQodGhpcy5hZGRGb3JtLnN0dWRlbnRJZCkgfSwNCiAgICAgICAgICBzcG9ydHNJdGVtOiB7IGlkOiBwYXJzZUludCh0aGlzLmFkZEZvcm0uc3BvcnRzSXRlbUlkKSB9LA0KICAgICAgICAgIHRlYWNoZXI6IHsgaWQ6IHBhcnNlSW50KHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuaWQpIH0sDQogICAgICAgICAgc2NvcmU6IHBhcnNlRmxvYXQodGhpcy5hZGRGb3JtLnNjb3JlKSwNCiAgICAgICAgICB0ZXN0VGltZTogdGVzdFRpbWUudG9JU09TdHJpbmcoKSwNCiAgICAgICAgICBzdGF0dXM6ICdQRU5ESU5HJw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBjb25zb2xlLmxvZygnU3VibWl0dGluZyByZWNvcmQgZGF0YTonLCByZWNvcmREYXRhKTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2FkbWluL3Rlc3QtcmVjb3Jkcy9hZGQnLCByZWNvcmREYXRhKQ0KICAgICAgICANCiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5b2V5YWl5oiQ5YqfJykNCiAgICAgICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuZmV0Y2hSZWNvcmRMaXN0KCkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyB8fCAn5b2V5YWl5aSx6LSlJykNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcign5b2V5YWl5aSx6LSlOicsIGVycm9yKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhPy5tc2cgfHwgJ+W9leWFpeWksei0pScpDQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBzdWJtaXRSZXZpZXcoKSB7DQogICAgICB0cnkgew0KICAgICAgICBpZiAodGhpcy5yZXZpZXdUeXBlID09PSAncmVqZWN0Jykgew0KICAgICAgICAgIC8vIOmps+WbnuaXtumqjOivgeihqOWNlQ0KICAgICAgICAgIGF3YWl0IHRoaXMuJHJlZnMucmV2aWV3Rm9ybS52YWxpZGF0ZSgpDQogICAgICAgIH0NCg0KICAgICAgICBjb25zdCBwYXJhbXMgPSB7DQogICAgICAgICAgaWQ6IHRoaXMuY3VycmVudFJlY29yZC5pZCwNCiAgICAgICAgICBzdGF0dXM6IHRoaXMucmV2aWV3VHlwZSA9PT0gJ2FwcHJvdmUnID8gJ0FQUFJPVkVEJyA6ICdSRUpFQ1RFRCcsDQogICAgICAgICAgcmV2aWV3Q29tbWVudDogdGhpcy5yZXZpZXdUeXBlID09PSAnYXBwcm92ZScgPyAn5a6h5qC46YCa6L+HJyA6IHRoaXMucmV2aWV3Rm9ybS5yZXZpZXdDb21tZW50LA0KICAgICAgICAgIHJldmlld2VySWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuaWQNCiAgICAgICAgfQ0KDQogICAgICAgIGNvbnNvbGUubG9nKCdTdWJtaXR0aW5nIHJldmlldzonLCBwYXJhbXMpDQoNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wdXQoJy9hcGkvYWRtaW4vdGVzdC1yZWNvcmRzL3JldmlldycsIHBhcmFtcykNCg0KICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHRoaXMucmV2aWV3VHlwZSA9PT0gJ2FwcHJvdmUnID8gJ+WuoeaguOmAmui/h+aIkOWKnycgOiAn6amz5Zue5oiQ5YqfJykNCiAgICAgICAgICB0aGlzLnJldmlld0RpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hSZWNvcmRMaXN0KCkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLmRhdGEubXNnIHx8ICflrqHmoLjlpLHotKUnKQ0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCflrqHmoLjlpLHotKU6JywgZXJyb3IpDQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WuoeaguOWksei0pTogJyArIChlcnJvci5yZXNwb25zZT8uZGF0YT8ubXNnIHx8IGVycm9yLm1lc3NhZ2UpKQ0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgZmV0Y2hTdHVkZW50cygpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvYWRtaW4vdXNlcnMnLCB7DQogICAgICAgICAgcGFyYW1zOiB7IHVzZXJUeXBlOiAnU1RVREVOVCcgfQ0KICAgICAgICB9KQ0KICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgdGhpcy5zdHVkZW50cyA9IHJlcy5kYXRhLmRhdGENCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5a2m55Sf5YiX6KGo5aSx6LSlOicsIGVycm9yKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5blrabnlJ/liJfooajlpLHotKUnKQ0KPj4+Pj4+PiA5YWE3MGRmYjg5MzI2ZDA3NTM0OGFkYjc4NmY5ZmNhNjIwOTA0MjMzDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["DataReview.vue"],"names":[],"mappings":";AAqaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataReview.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div class=\"data-review\">\r\n    <!-- 搜索和筛选区域 -->\r\n    <div class=\"filter-section\">\r\n      <el-form :inline=\"true\" :model=\"filterForm\" class=\"filter-form\">\r\n        <el-form-item label=\"测试项目\">\r\n          <el-select v-model=\"filterForm.sportsItemId\" placeholder=\"选择测试项目\">\r\n            <el-option\r\n              v-for=\"item in sportsItems\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"录入教师\">\r\n          <el-select v-model=\"filterForm.teacherId\" placeholder=\"选择教师\">\r\n            <el-option\r\n              v-for=\"teacher in teachers\"\r\n              :key=\"teacher.id\"\r\n              :label=\"teacher.realName\"\r\n              :value=\"teacher.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"审核状态\">\r\n          <el-select v-model=\"filterForm.status\" placeholder=\"选择状态\">\r\n            <el-option label=\"待审核\" value=\"PENDING\"></el-option>\r\n            <el-option label=\"已通过\" value=\"APPROVED\"></el-option>\r\n            <el-option label=\"已驳回\" value=\"REJECTED\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试时间\">\r\n          <el-date-picker\r\n            v-model=\"filterForm.dateRange\"\r\n            type=\"daterange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            format=\"yyyy-MM-dd\"\r\n            value-format=\"yyyy-MM-dd\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\r\n          <el-button @click=\"resetFilter\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"operation-buttons\">\r\n        <el-button type=\"primary\" @click=\"handleAdd\">\r\n          <i class=\"el-icon-plus\"></i> 录入成绩\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 数据列表 -->\r\n    <el-table\r\n<<<<<<< HEAD\r\n      :data=\"recordList\"\r\n=======\r\n      :data=\"recordList || []\"\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n      border\r\n      stripe\r\n      v-loading=\"loading\"\r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\r\n      <el-table-column label=\"学生姓名\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row?.student?.realName || '未知' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"测试项目\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row?.sportsItem?.name || '未知' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"测试成绩\">\r\n        <template slot-scope=\"scope\">\r\n<<<<<<< HEAD\r\n          <span :class=\"{ 'abnormal-score': scope.row.isAbnormal }\">\r\n            {{ scope.row?.score }}{{ scope.row?.sportsItem?.unit || '' }}\r\n          </span>\r\n          <el-tooltip v-if=\"scope.row.isAbnormal\" effect=\"dark\" placement=\"top\">\r\n            <div slot=\"content\">{{ scope.row.abnormalReason }}</div>\r\n            <i class=\"el-icon-warning-outline warning-icon\"></i>\r\n          </el-tooltip>\r\n=======\r\n          <span :class=\"{ 'abnormal-score': isAbnormalScore(scope.row) }\">\r\n            {{ scope.row?.score }}{{ scope.row?.sportsItem?.unit || '' }}\r\n          </span>\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"录入教师\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row?.teacher?.realName || '未知' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"testTime\" label=\"测试时间\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          {{ formatDate(scope.row.testTime) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"getStatusType(scope.row.status)\">\r\n            {{ getStatusLabel(scope.row.status) }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"250\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n<<<<<<< HEAD\r\n            @click=\"handleReview(scope.row)\"\r\n=======\r\n            @click=\"handleReview(scope.row, 'approve')\"\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n            v-if=\"scope.row.status === 'PENDING'\"\r\n          >审核</el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"warning\"\r\n            @click=\"handleEdit(scope.row)\"\r\n<<<<<<< HEAD\r\n            v-if=\"scope.row.status === 'PENDING'\"\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n          >修改</el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"info\"\r\n            @click=\"handleDetail(scope.row)\"\r\n          >详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"page.current\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"page.size\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"page.total\"\r\n      ></el-pagination>\r\n    </div>\r\n\r\n    <!-- 审核对话框 -->\r\n<<<<<<< HEAD\r\n    <el-dialog title=\"成绩审核\" :visible.sync=\"reviewDialogVisible\" width=\"500px\">\r\n      <div class=\"review-info\">\r\n        <p><strong>学生：</strong>{{ currentRecord?.student?.realName || '未知' }}</p>\r\n        <p><strong>测试项目：</strong>{{ currentRecord?.sportsItem?.name || '未知' }}</p>\r\n        <p>\r\n          <strong>测试成绩：</strong>\r\n          <span :class=\"{ 'abnormal-score': currentRecord?.isAbnormal }\">\r\n            {{ currentRecord?.score }}{{ currentRecord?.sportsItem?.unit || '' }}\r\n          </span>\r\n          <el-tooltip v-if=\"currentRecord?.isAbnormal\" effect=\"dark\" placement=\"top\">\r\n            <div slot=\"content\">{{ currentRecord?.abnormalReason }}</div>\r\n            <i class=\"el-icon-warning-outline warning-icon\"></i>\r\n          </el-tooltip>\r\n        </p>\r\n        <p><strong>测试时间：</strong>{{ formatDate(currentRecord?.testTime) }}</p>\r\n      </div>\r\n\r\n      <el-form :model=\"reviewForm\" :rules=\"reviewRules\" ref=\"reviewForm\">\r\n        <el-form-item label=\"审核结果\" prop=\"status\">\r\n          <el-radio-group v-model=\"reviewForm.status\">\r\n            <el-radio label=\"APPROVED\">通过</el-radio>\r\n            <el-radio label=\"REJECTED\">驳回</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item \r\n          label=\"审核意见\" \r\n          prop=\"reviewComment\"\r\n          :required=\"reviewForm.status === 'REJECTED'\"\r\n        >\r\n          <el-input\r\n            type=\"textarea\"\r\n            v-model=\"reviewForm.reviewComment\"\r\n=======\r\n    <el-dialog\r\n      :title=\"reviewDialogTitle\"\r\n      :visible.sync=\"reviewDialogVisible\"\r\n      width=\"500px\"\r\n    >\r\n      <div class=\"review-info\" v-if=\"currentRecord\">\r\n        <p>学生：{{ currentRecord.student?.realName || '未知' }}</p>\r\n        <p>测试项目：{{ currentRecord.sportsItem?.name || '未知' }}</p>\r\n        <p>测试成绩：{{ currentRecord.score }}{{ currentRecord.sportsItem?.unit || '' }}</p>\r\n        <p>测试时间：{{ formatDate(currentRecord.testTime) }}</p>\r\n      </div>\r\n\r\n      <div v-if=\"reviewType === 'reject'\" class=\"reject-form\">\r\n        <el-form :model=\"reviewForm\" :rules=\"reviewRules\" ref=\"reviewForm\">\r\n          <el-form-item label=\"驳回原因\" prop=\"reviewComment\">\r\n            <el-input\r\n              type=\"textarea\"\r\n              v-model=\"reviewForm.reviewComment\"\r\n              :rows=\"3\"\r\n              placeholder=\"请输入驳回原因\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"reviewDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitReview\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 详情对话框 -->\r\n    <el-dialog title=\"详细信息\" :visible.sync=\"detailDialogVisible\" width=\"500px\">\r\n      <div class=\"detail-info\" v-if=\"currentRecord\">\r\n        <p><strong>学生：</strong>{{ currentRecord.student?.realName || '未知' }}</p>\r\n        <p><strong>测试项目：</strong>{{ currentRecord.sportsItem?.name || '未知' }}</p>\r\n        <p><strong>测试成绩：</strong>{{ currentRecord.score }}{{ currentRecord.sportsItem?.unit || '' }}</p>\r\n        <p><strong>录入教师：</strong>{{ currentRecord.teacher?.realName || '未知' }}</p>\r\n        <p><strong>测试时间：</strong>{{ formatDate(currentRecord.testTime) }}</p>\r\n        <p><strong>审核状态：</strong>{{ getStatusLabel(currentRecord.status) }}</p>\r\n        <p><strong>审核意见：</strong>{{ currentRecord.reviewComment || '无' }}</p>\r\n        <p><strong>审核时间：</strong>{{ formatDate(currentRecord.reviewTime) || '未审核' }}</p>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 修改对话框 -->\r\n    <el-dialog title=\"修改测试记录\" :visible.sync=\"editDialogVisible\" width=\"500px\">\r\n      <el-form :model=\"editForm\" ref=\"editForm\" :rules=\"editRules\" label-width=\"100px\">\r\n        <el-form-item label=\"学生姓名\" prop=\"studentId\">\r\n          <el-select v-model=\"editForm.studentId\" placeholder=\"选择学生\" disabled>\r\n            <el-option\r\n              :label=\"currentRecord.student?.realName\"\r\n              :value=\"currentRecord.student?.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试项目\" prop=\"sportsItemId\">\r\n          <el-select v-model=\"editForm.sportsItemId\" placeholder=\"选择测试项目\" disabled>\r\n            <el-option\r\n              :label=\"currentRecord.sportsItem?.name\"\r\n              :value=\"currentRecord.sportsItem?.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试成绩\" prop=\"score\">\r\n          <el-input-number \r\n            v-model=\"editForm.score\" \r\n            :precision=\"2\"\r\n            :step=\"0.1\"\r\n            :min=\"0\"\r\n          ></el-input-number>\r\n          <span style=\"margin-left: 10px\">{{ currentRecord.sportsItem?.unit }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试时间\" prop=\"testTime\">\r\n          <el-date-picker\r\n            v-model=\"editForm.testTime\"\r\n            type=\"datetime\"\r\n            placeholder=\"选择测试时间\"\r\n            format=\"yyyy-MM-dd HH:mm:ss\"\r\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"审核状态\" prop=\"status\">\r\n          <el-select v-model=\"editForm.status\" placeholder=\"选择状态\">\r\n            <el-option label=\"待审核\" value=\"PENDING\"></el-option>\r\n            <el-option label=\"已通过\" value=\"APPROVED\"></el-option>\r\n            <el-option label=\"已驳回\" value=\"REJECTED\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"审核意见\" prop=\"reviewComment\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            v-model=\"editForm.reviewComment\"\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n            :rows=\"3\"\r\n            placeholder=\"请输入审核意见\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n<<<<<<< HEAD\r\n\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"reviewDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitReview\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 详情对话框 -->\r\n    <el-dialog title=\"详细信息\" :visible.sync=\"detailDialogVisible\" width=\"500px\">\r\n      <div class=\"detail-info\">\r\n        <p><strong>学生：</strong>{{ currentRecord?.student?.realName || '未知' }}</p>\r\n        <p><strong>测试项目：</strong>{{ currentRecord?.sportsItem?.name || '未知' }}</p>\r\n        <p>\r\n          <strong>测试成绩：</strong>\r\n          <span :class=\"{ 'abnormal-score': currentRecord?.isAbnormal }\">\r\n            {{ currentRecord?.score }}{{ currentRecord?.sportsItem?.unit || '' }}\r\n          </span>\r\n          <el-tooltip v-if=\"currentRecord?.isAbnormal\" effect=\"dark\" placement=\"top\">\r\n            <div slot=\"content\">{{ currentRecord?.abnormalReason }}</div>\r\n            <i class=\"el-icon-warning-outline warning-icon\"></i>\r\n          </el-tooltip>\r\n        </p>\r\n        <p><strong>录入教师：</strong>{{ currentRecord?.teacher?.realName || '未知' }}</p>\r\n        <p><strong>测试时间：</strong>{{ formatDate(currentRecord?.testTime) }}</p>\r\n        <p><strong>审核状态：</strong>{{ getStatusLabel(currentRecord?.status) }}</p>\r\n        <p><strong>审核意见：</strong>{{ currentRecord?.reviewComment || '无' }}</p>\r\n        <p><strong>审核人：</strong>{{ currentRecord?.reviewer?.realName || '未审核' }}</p>\r\n        <p><strong>审核时间：</strong>{{ formatDate(currentRecord?.reviewTime) || '未审核' }}</p>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 添加/修改对话框 -->\r\n    <el-dialog \r\n      :title=\"editMode ? '修改成绩' : '录入成绩'\" \r\n      :visible.sync=\"formDialogVisible\" \r\n      width=\"500px\"\r\n    >\r\n      <el-form :model=\"form\" :rules=\"formRules\" ref=\"form\" label-width=\"100px\">\r\n        <el-form-item label=\"学生\" prop=\"studentId\">\r\n          <el-select \r\n            v-model=\"form.studentId\" \r\n            placeholder=\"选择学生\" \r\n            filterable\r\n            :disabled=\"editMode\"\r\n          >\r\n=======\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 添加数据录入对话框 -->\r\n    <el-dialog title=\"录入成绩\" :visible.sync=\"addDialogVisible\" width=\"500px\">\r\n      <el-form :model=\"addForm\" :rules=\"addRules\" ref=\"addForm\" label-width=\"100px\">\r\n        <el-form-item label=\"学生\" prop=\"studentId\">\r\n          <el-select v-model=\"addForm.studentId\" placeholder=\"选择学生\" filterable>\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n            <el-option\r\n              v-for=\"student in students\"\r\n              :key=\"student.id\"\r\n              :label=\"student.realName\"\r\n              :value=\"student.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试项目\" prop=\"sportsItemId\">\r\n<<<<<<< HEAD\r\n          <el-select \r\n            v-model=\"form.sportsItemId\" \r\n            placeholder=\"选择测试项目\"\r\n            :disabled=\"editMode\"\r\n          >\r\n=======\r\n          <el-select v-model=\"addForm.sportsItemId\" placeholder=\"选择测试项目\" @change=\"handleItemChange\">\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n            <el-option\r\n              v-for=\"item in sportsItems\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试成绩\" prop=\"score\">\r\n          <el-input-number \r\n<<<<<<< HEAD\r\n            v-model=\"form.score\" \r\n=======\r\n            v-model=\"addForm.score\" \r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n            :precision=\"2\"\r\n            :step=\"0.1\"\r\n            :min=\"0\"\r\n          ></el-input-number>\r\n<<<<<<< HEAD\r\n          <span style=\"margin-left: 10px\">\r\n            {{ getSportsItemUnit(form.sportsItemId) }}\r\n          </span>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试时间\" prop=\"testTime\">\r\n          <el-date-picker\r\n            v-model=\"form.testTime\"\r\n=======\r\n          <span style=\"margin-left: 10px\">{{ selectedItem?.unit }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试时间\" prop=\"testTime\">\r\n          <el-date-picker\r\n            v-model=\"addForm.testTime\"\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n            type=\"datetime\"\r\n            placeholder=\"选择测试时间\"\r\n            format=\"yyyy-MM-dd HH:mm:ss\"\r\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n<<<<<<< HEAD\r\n        <el-button @click=\"formDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n=======\r\n        <el-button @click=\"addDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitAdd\">确定</el-button>\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DataReview',\r\n  data() {\r\n    return {\r\n<<<<<<< HEAD\r\n      // 列表数据\r\n      recordList: [],\r\n      loading: false,\r\n\r\n      // 筛选表单\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n      filterForm: {\r\n        sportsItemId: '',\r\n        teacherId: '',\r\n        status: '',\r\n        dateRange: []\r\n      },\r\n<<<<<<< HEAD\r\n\r\n      // 分页信息\r\n=======\r\n      sportsItems: [],\r\n      teachers: [],\r\n      recordList: [],\r\n      loading: false,\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n      page: {\r\n        current: 1,\r\n        size: 10,\r\n        total: 0\r\n      },\r\n<<<<<<< HEAD\r\n\r\n      // 基础数据\r\n      sportsItems: [],\r\n      teachers: [],\r\n      students: [],\r\n\r\n      // 当前操作的记录\r\n      currentRecord: null,\r\n\r\n      // 审核对话框\r\n      reviewDialogVisible: false,\r\n      reviewForm: {\r\n        status: 'APPROVED',\r\n        reviewComment: ''\r\n      },\r\n      reviewRules: {\r\n        status: [{ required: true, message: '请选择审核结果' }],\r\n        reviewComment: [{ \r\n          required: true, \r\n          message: '请输入审核意见',\r\n          trigger: 'blur',\r\n          validator: (rule, value, callback) => {\r\n            if (this.reviewForm.status === 'REJECTED' && !value) {\r\n              callback(new Error('驳回时必须填写审核意见'));\r\n            } else {\r\n              callback();\r\n            }\r\n          }\r\n        }]\r\n      },\r\n\r\n      // 详情对话框\r\n      detailDialogVisible: false,\r\n\r\n      // 添加/修改对话框\r\n      formDialogVisible: false,\r\n      editMode: false,\r\n      form: {\r\n        studentId: '',\r\n        sportsItemId: '',\r\n        score: 0,\r\n        testTime: new Date().toISOString().slice(0, 19).replace('T', ' ')\r\n      },\r\n      formRules: {\r\n        studentId: [{ required: true, message: '请选择学生' }],\r\n        sportsItemId: [{ required: true, message: '请选择测试项目' }],\r\n        score: [{ required: true, message: '请输入成绩' }],\r\n        testTime: [{ required: true, message: '请选择测试时间' }]\r\n      }\r\n    }\r\n  },\r\n\r\n=======\r\n      reviewDialogVisible: false,\r\n      detailDialogVisible: false,\r\n      editDialogVisible: false,\r\n      currentRecord: null,\r\n      reviewType: '',\r\n      reviewForm: {\r\n        reviewComment: ''\r\n      },\r\n      reviewRules: {\r\n        reviewComment: [\r\n          { required: true, message: '请输入驳回原因', trigger: 'blur' }\r\n        ]\r\n      },\r\n      editForm: {\r\n        studentId: '',\r\n        sportsItemId: '',\r\n        score: 0,\r\n        testTime: '',\r\n        status: '',\r\n        reviewComment: ''\r\n      },\r\n      editRules: {\r\n        studentId: [{ required: true, message: '请选择学生', trigger: 'change' }],\r\n        teacherId: [{ required: true, message: '请选择教师', trigger: 'change' }],\r\n        sportsItemId: [{ required: true, message: '请选择测试项目', trigger: 'change' }],\r\n        score: [{ required: true, message: '请输入成绩', trigger: 'blur' }],\r\n        testTime: [{ required: true, message: '请选择测试时间', trigger: 'change' }]\r\n      },\r\n      addDialogVisible: false,\r\n      addForm: {\r\n        studentId: '',\r\n        sportsItemId: '',\r\n        score: 0,\r\n        testTime: ''\r\n      },\r\n      addRules: {\r\n        studentId: [\r\n          { required: true, message: '请选择学生', trigger: 'change' }\r\n        ],\r\n        sportsItemId: [\r\n          { required: true, message: '请选择测试项目', trigger: 'change' }\r\n        ],\r\n        score: [\r\n          { required: true, message: '请输入测试成绩', trigger: 'blur' }\r\n        ],\r\n        testTime: [\r\n          { required: true, message: '请选择测试时间', trigger: 'change' }\r\n        ]\r\n      },\r\n      selectedItem: null,\r\n      students: [],\r\n      rejectReason: ''\r\n    }\r\n  },\r\n  computed: {\r\n    reviewDialogTitle() {\r\n      return this.reviewType === 'approve' ? '审核通过确认' : '驳回确认'\r\n    }\r\n  },\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n  async created() {\r\n    try {\r\n      this.loading = true\r\n      // 先获取基础数据\r\n      await Promise.all([\r\n        this.fetchSportsItems(),\r\n        this.fetchTeachers(),\r\n        this.fetchStudents()\r\n      ])\r\n      // 再获取记录列表\r\n      await this.fetchRecordList()\r\n    } catch (error) {\r\n      console.error('初始化数据失败:', error)\r\n      this.$message.error('初始化数据失败')\r\n    } finally {\r\n      this.loading = false\r\n    }\r\n  },\r\n<<<<<<< HEAD\r\n\r\n  methods: {\r\n    // 格式化日期\r\n=======\r\n  methods: {\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    formatDate(date) {\r\n      if (!date) return ''\r\n      return new Date(date).toLocaleString()\r\n    },\r\n<<<<<<< HEAD\r\n\r\n    // 获取状态样式\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    getStatusType(status) {\r\n      const typeMap = {\r\n        'PENDING': 'warning',\r\n        'APPROVED': 'success',\r\n        'REJECTED': 'danger'\r\n      }\r\n      return typeMap[status] || 'info'\r\n    },\r\n<<<<<<< HEAD\r\n\r\n    // 获取状态文本\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    getStatusLabel(status) {\r\n      const labelMap = {\r\n        'PENDING': '待审核',\r\n        'APPROVED': '已通过',\r\n        'REJECTED': '已驳回'\r\n      }\r\n      return labelMap[status] || '未知'\r\n    },\r\n<<<<<<< HEAD\r\n\r\n    // 获取项目单位\r\n    getSportsItemUnit(itemId) {\r\n      const item = this.sportsItems.find(i => i.id === itemId)\r\n      return item ? item.unit : ''\r\n    },\r\n\r\n    // 获取体育项目列表\r\n=======\r\n    isAbnormalScore(record) {\r\n      if (!record || !record.sportsItem) return false;\r\n      \r\n      const abnormalRules = {\r\n        '100米跑': (score) => score < 9 || score > 20,\r\n        '立定跳远': (score) => score < 1.5 || score > 3.5,\r\n        '引体向上': (score) => score < 0 || score > 30,\r\n        '1000米跑': (score) => score < 180 || score > 600,\r\n        '仰卧起坐': (score) => score < 10 || score > 80\r\n      };\r\n\r\n      const rule = abnormalRules[record.sportsItem.name];\r\n      return rule ? rule(record.score) : false;\r\n    },\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    async fetchSportsItems() {\r\n      try {\r\n        const res = await this.$http.get('/api/admin/sports-items')\r\n        if (res.data.code === 200) {\r\n          this.sportsItems = res.data.data || []\r\n        }\r\n      } catch (error) {\r\n        console.error('获取体育项目失败:', error)\r\n<<<<<<< HEAD\r\n        this.$message.error('获取体育项目失败')\r\n      }\r\n    },\r\n\r\n    // 获取教师列表\r\n=======\r\n        this.$message.error('获取体育项目失败: ' + error.message)\r\n        this.sportsItems = []\r\n      }\r\n    },\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    async fetchTeachers() {\r\n      try {\r\n        const res = await this.$http.get('/api/admin/users', {\r\n          params: { userType: 'TEACHER' }\r\n        })\r\n        if (res.data.code === 200) {\r\n<<<<<<< HEAD\r\n          this.teachers = res.data.data.content || []\r\n        }\r\n      } catch (error) {\r\n        console.error('获取教师列表失败:', error)\r\n        this.$message.error('获取教师列表失败')\r\n      }\r\n    },\r\n\r\n    // 获取学生列表\r\n    async fetchStudents() {\r\n      try {\r\n        const res = await this.$http.get('/api/admin/users', {\r\n          params: { userType: 'STUDENT' }\r\n        })\r\n        if (res.data.code === 200) {\r\n          this.students = res.data.data.content || []\r\n        }\r\n      } catch (error) {\r\n        console.error('获取学生列表失败:', error)\r\n        this.$message.error('获取学生列表失败')\r\n      }\r\n    },\r\n\r\n    // 获取记录列表\r\n=======\r\n          this.teachers = res.data.data || []\r\n        }\r\n      } catch (error) {\r\n        console.error('获取教师列表失败:', error)\r\n        this.$message.error('获取教师列表失败: ' + error.message)\r\n        this.teachers = []\r\n      }\r\n    },\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    async fetchRecordList() {\r\n      try {\r\n        this.loading = true\r\n        const params = {\r\n          status: this.filterForm.status,\r\n          teacherId: this.filterForm.teacherId,\r\n          sportsItemId: this.filterForm.sportsItemId,\r\n          startDate: this.filterForm.dateRange?.[0] || null,\r\n          endDate: this.filterForm.dateRange?.[1] || null,\r\n          page: this.page.current - 1,\r\n          size: this.page.size\r\n        }\r\n        \r\n<<<<<<< HEAD\r\n        const res = await this.$http.get('/api/admin/test-records/review', { params })\r\n        if (res.data.code === 200) {\r\n          this.recordList = res.data.data.content || []\r\n          this.page.total = res.data.data.totalElements || 0\r\n        }\r\n      } catch (error) {\r\n        console.error('获取记录列表失败:', error)\r\n        this.$message.error('获取记录列表失败')\r\n=======\r\n        console.log('Fetching records with params:', params)\r\n        const res = await this.$http.get('/api/admin/test-records/review', { params })\r\n        console.log('Response:', res.data)\r\n\r\n        if (res.data.code === 200) {\r\n          this.recordList = Array.isArray(res.data.data.content) ? res.data.data.content : []\r\n          this.page.total = res.data.data.totalElements || 0\r\n        } else {\r\n          throw new Error(res.data.msg || '获取记录列表失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('获取记录列表失败:', error)\r\n        this.$message.error('获取记录列表失败: ' + error.message)\r\n        this.recordList = []\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n<<<<<<< HEAD\r\n\r\n    // 处理搜索\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    handleSearch() {\r\n      this.page.current = 1\r\n      this.fetchRecordList()\r\n    },\r\n<<<<<<< HEAD\r\n\r\n    // 重置筛选\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    resetFilter() {\r\n      this.filterForm = {\r\n        sportsItemId: '',\r\n        teacherId: '',\r\n        status: '',\r\n        dateRange: []\r\n      }\r\n      this.handleSearch()\r\n    },\r\n<<<<<<< HEAD\r\n\r\n    // 处理分页大小改变\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    handleSizeChange(val) {\r\n      this.page.size = val\r\n      this.fetchRecordList()\r\n    },\r\n<<<<<<< HEAD\r\n\r\n    // 处理页码改变\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n    handleCurrentChange(val) {\r\n      this.page.current = val\r\n      this.fetchRecordList()\r\n    },\r\n<<<<<<< HEAD\r\n\r\n    // 处理审核\r\n    handleReview(record) {\r\n      this.currentRecord = record\r\n      this.reviewForm = {\r\n        status: 'APPROVED',\r\n        reviewComment: ''\r\n      }\r\n      this.reviewDialogVisible = true\r\n    },\r\n\r\n    // 提交审核\r\n    async submitReview() {\r\n      try {\r\n        await this.$refs.reviewForm.validate()\r\n        \r\n        const params = {\r\n          id: this.currentRecord.id,\r\n          status: this.reviewForm.status,\r\n          reviewComment: this.reviewForm.reviewComment,\r\n          reviewerId: this.$store.state.user.id\r\n        }\r\n\r\n        const res = await this.$http.put('/api/admin/test-records/review', params)\r\n        if (res.data.code === 200) {\r\n          this.$message.success(\r\n            this.reviewForm.status === 'APPROVED' ? '审核通过成功' : '驳回成功'\r\n          )\r\n          this.reviewDialogVisible = false\r\n          await this.fetchRecordList()\r\n        }\r\n      } catch (error) {\r\n        console.error('审核失败:', error)\r\n        this.$message.error('审核失败: ' + error.message)\r\n      }\r\n    },\r\n\r\n    // 处理详情查看\r\n    handleDetail(record) {\r\n      this.currentRecord = record\r\n      this.detailDialogVisible = true\r\n    },\r\n\r\n    // 处理添加\r\n    handleAdd() {\r\n      this.editMode = false\r\n      this.form = {\r\n=======\r\n    handleReview(record, type) {\r\n      this.currentRecord = { ...record }\r\n      this.reviewType = type\r\n      this.reviewForm.reviewComment = ''\r\n      this.reviewDialogVisible = true\r\n    },\r\n    handleDetail(record) {\r\n      this.currentRecord = { ...record }\r\n      this.detailDialogVisible = true\r\n    },\r\n    handleEdit(record) {\r\n      this.currentRecord = record;\r\n      this.editForm = {\r\n        studentId: record.student?.id,\r\n        teacherId: record.teacher?.id,\r\n        sportsItemId: record.sportsItem?.id,\r\n        score: record.score,\r\n        testTime: record.testTime,\r\n        status: record.status,\r\n        remark: record.remark || ''\r\n      };\r\n      this.editDialogVisible = true;\r\n    },\r\n    async submitEdit() {\r\n      try {\r\n        await this.$refs.editForm.validate();\r\n        \r\n        // 构造请求数据，确保数据格式正确\r\n        const editData = {\r\n          id: this.currentRecord.id,\r\n          student: { id: this.editForm.studentId },\r\n          teacher: { id: this.editForm.teacherId },\r\n          sportsItem: { id: this.editForm.sportsItemId },\r\n          score: parseFloat(this.editForm.score),\r\n          testTime: this.editForm.testTime ? new Date(this.editForm.testTime).toISOString() : null,\r\n          status: this.editForm.status,\r\n          remark: this.editForm.remark\r\n        };\r\n\r\n        console.log('Submitting edit data:', editData);\r\n\r\n        const res = await this.$http.put(\r\n          `/api/admin/test-records/${this.currentRecord.id}`,\r\n          editData\r\n        );\r\n\r\n        if (res.data.code === 200) {\r\n          this.$message.success('修改成功');\r\n          this.editDialogVisible = false;\r\n          await this.fetchRecordList();\r\n        } else {\r\n          throw new Error(res.data.msg || '修改失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('修改失败:', error);\r\n        this.$message.error('修改失败: ' + (error.response?.data?.msg || error.message));\r\n      }\r\n    },\r\n    handleAdd() {\r\n      this.addForm = {\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n        studentId: '',\r\n        sportsItemId: '',\r\n        score: 0,\r\n        testTime: new Date().toISOString().slice(0, 19).replace('T', ' ')\r\n      }\r\n<<<<<<< HEAD\r\n      this.formDialogVisible = true\r\n    },\r\n\r\n    // 处理编辑\r\n    handleEdit(record) {\r\n      this.editMode = true\r\n      this.currentRecord = record\r\n      this.form = {\r\n        studentId: record.student.id,\r\n        sportsItemId: record.sportsItem.id,\r\n        score: record.score,\r\n        testTime: record.testTime\r\n      }\r\n      this.formDialogVisible = true\r\n    },\r\n\r\n    // 提交表单\r\n    async submitForm() {\r\n      try {\r\n        await this.$refs.form.validate()\r\n        \r\n        const data = {\r\n          student: { id: this.form.studentId },\r\n          sportsItem: { id: this.form.sportsItemId },\r\n          teacher: { id: this.$store.state.user.id },\r\n          score: this.form.score,\r\n          testTime: this.form.testTime\r\n        }\r\n\r\n        if (this.editMode) {\r\n          data.id = this.currentRecord.id\r\n          await this.$http.put(`/api/admin/test-records/${data.id}`, data)\r\n          this.$message.success('修改成功')\r\n        } else {\r\n          await this.$http.post('/api/admin/test-records/add', data)\r\n          this.$message.success('添加成功')\r\n        }\r\n\r\n        this.formDialogVisible = false\r\n        await this.fetchRecordList()\r\n      } catch (error) {\r\n        console.error(this.editMode ? '修改失败:' : '添加失败:', error)\r\n        this.$message.error((this.editMode ? '修改' : '添加') + '失败: ' + error.message)\r\n=======\r\n      this.addDialogVisible = true\r\n      if (this.students.length === 0) {\r\n        this.fetchStudents()\r\n      }\r\n    },\r\n    handleItemChange(itemId) {\r\n      this.selectedItem = this.sportsItems.find(item => item.id === itemId)\r\n    },\r\n    async submitAdd() {\r\n      try {\r\n        await this.$refs.addForm.validate()\r\n        \r\n        // 转换日期时间格式\r\n        const testTime = this.addForm.testTime ? new Date(this.addForm.testTime) : new Date();\r\n        \r\n        // 构造请求数据\r\n        const recordData = {\r\n          student: { id: parseInt(this.addForm.studentId) },\r\n          sportsItem: { id: parseInt(this.addForm.sportsItemId) },\r\n          teacher: { id: parseInt(this.$store.state.user.id) },\r\n          score: parseFloat(this.addForm.score),\r\n          testTime: testTime.toISOString(),\r\n          status: 'PENDING'\r\n        }\r\n        \r\n        console.log('Submitting record data:', recordData);\r\n        \r\n        const res = await this.$http.post('/admin/test-records/add', recordData)\r\n        \r\n        if (res.data.code === 200) {\r\n          this.$message.success('录入成功')\r\n          this.addDialogVisible = false\r\n          this.fetchRecordList()\r\n        } else {\r\n          this.$message.error(res.data.msg || '录入失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('录入失败:', error)\r\n        this.$message.error(error.response?.data?.msg || '录入失败')\r\n      }\r\n    },\r\n    async submitReview() {\r\n      try {\r\n        if (this.reviewType === 'reject') {\r\n          // 驳回时验证表单\r\n          await this.$refs.reviewForm.validate()\r\n        }\r\n\r\n        const params = {\r\n          id: this.currentRecord.id,\r\n          status: this.reviewType === 'approve' ? 'APPROVED' : 'REJECTED',\r\n          reviewComment: this.reviewType === 'approve' ? '审核通过' : this.reviewForm.reviewComment,\r\n          reviewerId: this.$store.state.user.id\r\n        }\r\n\r\n        console.log('Submitting review:', params)\r\n\r\n        const res = await this.$http.put('/api/admin/test-records/review', params)\r\n\r\n        if (res.data.code === 200) {\r\n          this.$message.success(this.reviewType === 'approve' ? '审核通过成功' : '驳回成功')\r\n          this.reviewDialogVisible = false\r\n          await this.fetchRecordList()\r\n        } else {\r\n          throw new Error(res.data.msg || '审核失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('审核失败:', error)\r\n        this.$message.error('审核失败: ' + (error.response?.data?.msg || error.message))\r\n      }\r\n    },\r\n    async fetchStudents() {\r\n      try {\r\n        const res = await this.$http.get('/admin/users', {\r\n          params: { userType: 'STUDENT' }\r\n        })\r\n        if (res.data.code === 200) {\r\n          this.students = res.data.data\r\n        }\r\n      } catch (error) {\r\n        console.error('获取学生列表失败:', error)\r\n        this.$message.error('获取学生列表失败')\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.data-review {\r\n  padding: 20px;\r\n}\r\n\r\n.filter-section {\r\n  margin-bottom: 20px;\r\n  background-color: #f5f7fa;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n<<<<<<< HEAD\r\n=======\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n}\r\n\r\n.filter-form {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n}\r\n\r\n.abnormal-score {\r\n  color: #f56c6c;\r\n  font-weight: bold;\r\n}\r\n\r\n<<<<<<< HEAD\r\n.warning-icon {\r\n  color: #e6a23c;\r\n  margin-left: 5px;\r\n}\r\n\r\n=======\r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n.review-info, .detail-info {\r\n  background-color: #f5f7fa;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n<<<<<<< HEAD\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n</style>\r\n=======\r\n.warning-text {\r\n  color: #e6a23c;\r\n  margin-top: 10px;\r\n}\r\n\r\n.warning-text i {\r\n  margin-right: 5px;\r\n}\r\n\r\n.operation-buttons {\r\n  margin-left: 20px;\r\n}\r\n\r\n.reject-form {\r\n  margin-top: 20px;\r\n}\r\n</style> \r\n>>>>>>> 9aa70dfb89326d075348adb786f9fca620904233\r\n"]}]}