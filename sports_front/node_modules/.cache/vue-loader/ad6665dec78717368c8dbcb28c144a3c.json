{"remainingRequest":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\student\\NoticeList.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\student\\NoticeList.vue","mtime":1742806879713},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1741946991478},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741946992817},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1741947007540}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdOb3RpY2VMaXN0JywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2VhcmNoS2V5d29yZDogJycsDQogICAgICBzZWFyY2hUeXBlOiAnJywNCiAgICAgIGN1cnJlbnRQYWdlOiAxLA0KICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgdG90YWw6IDAsDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIG5vdGljZUxpc3Q6IFtdLA0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICB2aWV3aW5nTm90aWNlOiB7fQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmZldGNoTm90aWNlTGlzdCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBmZXRjaE5vdGljZUxpc3QoKSB7DQogICAgICB0cnkgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgnL2FwaS9zdHVkZW50L25vdGljZXMnLCB7DQogICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICBrZXl3b3JkOiB0aGlzLnNlYXJjaEtleXdvcmQsDQogICAgICAgICAgICB0eXBlOiB0aGlzLnNlYXJjaFR5cGUsDQogICAgICAgICAgICBwYWdlOiB0aGlzLmN1cnJlbnRQYWdlIC0gMSwNCiAgICAgICAgICAgIHNpemU6IHRoaXMucGFnZVNpemUNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7DQogICAgICAgICAgdGhpcy5ub3RpY2VMaXN0ID0gZGF0YS5jb250ZW50IHx8IFtdOw0KICAgICAgICAgIHRoaXMudG90YWwgPSBkYXRhLnRvdGFsRWxlbWVudHMgfHwgMDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLmRhdGEubWVzc2FnZSB8fCAn6I635Y+W6YCa55+l5YiX6KGo5aSx6LSlJyk7DQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlumAmuefpeWIl+ihqOWksei0pTonLCBlcnJvcik7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IubWVzc2FnZSB8fCAn6I635Y+W6YCa55+l5YiX6KGo5aSx6LSlJyk7DQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVNlYXJjaCgpIHsNCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxDQogICAgICB0aGlzLmZldGNoTm90aWNlTGlzdCgpDQogICAgfSwNCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbA0KICAgICAgdGhpcy5mZXRjaE5vdGljZUxpc3QoKQ0KICAgIH0sDQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWwNCiAgICAgIHRoaXMuZmV0Y2hOb3RpY2VMaXN0KCkNCiAgICB9LA0KICAgIGhhbmRsZVZpZXcobm90aWNlKSB7DQogICAgICB0aGlzLnZpZXdpbmdOb3RpY2UgPSB7IC4uLm5vdGljZSB9DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBnZXRUeXBlVGFnVHlwZSh0eXBlKSB7DQogICAgICBjb25zdCB0eXBlcyA9IHsNCiAgICAgICAgJ1RFU1RfU0NIRURVTEUnOiAncHJpbWFyeScsDQogICAgICAgICdTQ09SRV9SRUxFQVNFJzogJ3N1Y2Nlc3MnLA0KICAgICAgICAnU1lTVEVNX01BSU5URU5BTkNFJzogJ3dhcm5pbmcnLA0KICAgICAgICAnT1RIRVInOiAnaW5mbycNCiAgICAgIH0NCiAgICAgIHJldHVybiB0eXBlc1t0eXBlXSB8fCAnaW5mbycNCiAgICB9LA0KICAgIGdldFR5cGVMYWJlbCh0eXBlKSB7DQogICAgICBjb25zdCBsYWJlbHMgPSB7DQogICAgICAgICdURVNUX1NDSEVEVUxFJzogJ+S9k+a1i+WuieaOkicsDQogICAgICAgICdTQ09SRV9SRUxFQVNFJzogJ+aIkOe7qeWFrOW4gycsDQogICAgICAgICdTWVNURU1fTUFJTlRFTkFOQ0UnOiAn57O757uf57u05oqkJywNCiAgICAgICAgJ09USEVSJzogJ+WFtuS7lumAmuefpScNCiAgICAgIH0NCiAgICAgIHJldHVybiBsYWJlbHNbdHlwZV0gfHwgJ+WFtuS7lumAmuefpScNCiAgICB9LA0KICAgIGZvcm1hdERhdGVUaW1lKGRhdGV0aW1lKSB7DQogICAgICBpZiAoIWRhdGV0aW1lKSByZXR1cm4gJycNCiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRldGltZSkudG9Mb2NhbGVTdHJpbmcoKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["NoticeList.vue"],"names":[],"mappings":";AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NoticeList.vue","sourceRoot":"src/views/student","sourcesContent":["<template>\r\n  <div class=\"notice-list\">\r\n    <!-- 顶部搜索栏 -->\r\n    <div class=\"search-bar\">\r\n      <el-input\r\n        v-model=\"searchKeyword\"\r\n        placeholder=\"搜索通知标题\"\r\n        style=\"width: 200px\"\r\n        @keyup.enter.native=\"handleSearch\"\r\n      >\r\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"handleSearch\"></el-button>\r\n      </el-input>\r\n      <el-select \r\n        v-model=\"searchType\" \r\n        placeholder=\"通知类型\" \r\n        clearable\r\n        style=\"width: 120px; margin-left: 10px\"\r\n      >\r\n        <el-option label=\"全部\" value=\"\"></el-option>\r\n        <el-option label=\"体测安排\" value=\"TEST_SCHEDULE\"></el-option>\r\n        <el-option label=\"成绩公布\" value=\"SCORE_RELEASE\"></el-option>\r\n        <el-option label=\"系统维护\" value=\"SYSTEM_MAINTENANCE\"></el-option>\r\n        <el-option label=\"其他通知\" value=\"OTHER\"></el-option>\r\n      </el-select>\r\n    </div>\r\n\r\n    <!-- 通知列表 -->\r\n    <el-table\r\n      :data=\"noticeList\"\r\n      border\r\n      style=\"width: 100%\"\r\n      v-loading=\"loading\"\r\n    >\r\n      <el-table-column prop=\"type\" label=\"类型\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"getTypeTagType(scope.row.type)\">\r\n            {{ getTypeLabel(scope.row.type) }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"title\" label=\"标题\" show-overflow-tooltip>\r\n        <template slot-scope=\"scope\">\r\n          <span :class=\"{'important-notice': scope.row.priority === 'HIGH'}\">\r\n            {{ scope.row.title }}\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createTime\" label=\"发布时间\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          {{ formatDateTime(scope.row.createTime) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"100\" fixed=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"small\"\r\n            @click=\"handleView(scope.row)\"\r\n          >\r\n            查看详情\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"currentPage\"\r\n        :page-sizes=\"[10, 20, 50]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n\r\n    <!-- 查看通知详情的对话框 -->\r\n    <el-dialog\r\n      :title=\"viewingNotice.title\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"600px\"\r\n    >\r\n      <div class=\"notice-detail\">\r\n        <div class=\"notice-header\">\r\n          <div class=\"notice-type\">\r\n            <el-tag :type=\"getTypeTagType(viewingNotice.type)\">\r\n              {{ getTypeLabel(viewingNotice.type) }}\r\n            </el-tag>\r\n          </div>\r\n        </div>\r\n        <div class=\"notice-meta\">\r\n          <span>发布时间：{{ formatDateTime(viewingNotice.createTime) }}</span>\r\n          <span v-if=\"viewingNotice.priority === 'HIGH'\" class=\"notice-priority\">\r\n            <i class=\"el-icon-warning\"></i>重要通知\r\n          </span>\r\n        </div>\r\n        <div class=\"notice-content\">{{ viewingNotice.content }}</div>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'NoticeList',\r\n  data() {\r\n    return {\r\n      searchKeyword: '',\r\n      searchType: '',\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      loading: false,\r\n      noticeList: [],\r\n      dialogVisible: false,\r\n      viewingNotice: {}\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchNoticeList()\r\n  },\r\n  methods: {\r\n    async fetchNoticeList() {\r\n      try {\r\n        this.loading = true;\r\n        const response = await this.$axios.get('/api/student/notices', {\r\n          params: {\r\n            keyword: this.searchKeyword,\r\n            type: this.searchType,\r\n            page: this.currentPage - 1,\r\n            size: this.pageSize\r\n          }\r\n        });\r\n\r\n        if (response.data.code === 200) {\r\n          const data = response.data.data;\r\n          this.noticeList = data.content || [];\r\n          this.total = data.totalElements || 0;\r\n        } else {\r\n          this.$message.error(response.data.message || '获取通知列表失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('获取通知列表失败:', error);\r\n        this.$message.error(error.message || '获取通知列表失败');\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    handleSearch() {\r\n      this.currentPage = 1\r\n      this.fetchNoticeList()\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.fetchNoticeList()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val\r\n      this.fetchNoticeList()\r\n    },\r\n    handleView(notice) {\r\n      this.viewingNotice = { ...notice }\r\n      this.dialogVisible = true\r\n    },\r\n    getTypeTagType(type) {\r\n      const types = {\r\n        'TEST_SCHEDULE': 'primary',\r\n        'SCORE_RELEASE': 'success',\r\n        'SYSTEM_MAINTENANCE': 'warning',\r\n        'OTHER': 'info'\r\n      }\r\n      return types[type] || 'info'\r\n    },\r\n    getTypeLabel(type) {\r\n      const labels = {\r\n        'TEST_SCHEDULE': '体测安排',\r\n        'SCORE_RELEASE': '成绩公布',\r\n        'SYSTEM_MAINTENANCE': '系统维护',\r\n        'OTHER': '其他通知'\r\n      }\r\n      return labels[type] || '其他通知'\r\n    },\r\n    formatDateTime(datetime) {\r\n      if (!datetime) return ''\r\n      return new Date(datetime).toLocaleString()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.notice-list {\r\n  padding: 20px;\r\n\r\n  .search-bar {\r\n    margin-bottom: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .important-notice {\r\n    color: #f56c6c;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .pagination-container {\r\n    margin-top: 20px;\r\n    text-align: right;\r\n  }\r\n\r\n  .notice-detail {\r\n    .notice-header {\r\n      margin-bottom: 20px;\r\n    }\r\n\r\n    .notice-meta {\r\n      color: #909399;\r\n      margin-bottom: 20px;\r\n      font-size: 14px;\r\n\r\n      .notice-priority {\r\n        margin-left: 20px;\r\n        color: #f56c6c;\r\n      }\r\n    }\r\n\r\n    .notice-content {\r\n      line-height: 1.6;\r\n      white-space: pre-wrap;\r\n      color: #303133;\r\n    }\r\n  }\r\n}\r\n</style> "]}]}