{"remainingRequest":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\student\\ScoreAppeal.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\student\\ScoreAppeal.vue","mtime":1742457759753},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\babel.config.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741946992817},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1741946991478},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741946992817},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1741947007540}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maW5kLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTY29yZUFwcGVhbCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBzdWJtaXR0aW5nOiBmYWxzZSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGFwcGVhbExpc3Q6IFtdLAogICAgICB0ZXN0UmVjb3JkczogW10sCiAgICAgIC8vIOWtmOWCqOW3sumAmui/h+WuoeaguOeahOa1i+ivleiusOW9lQogICAgICBjdXJyZW50UmVjb3JkOiBudWxsLAogICAgICBhcHBlYWxGb3JtOiB7CiAgICAgICAgdGVzdFJlY29yZElkOiAnJywKICAgICAgICBleHBlY3RlZFNjb3JlOiB1bmRlZmluZWQsCiAgICAgICAgcmVhc29uOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHRlc3RSZWNvcmRJZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeimgeeUs+ivieeahOa1i+ivleiusOW9lScsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dLAogICAgICAgIGV4cGVjdGVkU2NvcmU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmnJ/mnJvmiJDnu6knLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcmVhc29uOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55Sz6K+J55CG55SxJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH0sIHsKICAgICAgICAgIG1pbjogMTAsCiAgICAgICAgICBtYXg6IDUwMCwKICAgICAgICAgIG1lc3NhZ2U6ICfnlLPor4nnkIbnlLHplb/luqblupTlnKgxMC01MDDlrZfkuYvpl7QnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoQXBwZWFsTGlzdCgpOwogICAgdGhpcy5mZXRjaEFwcGVhbGFibGVSZWNvcmRzKCk7IC8vIOiOt+WPluWPr+eUs+ivieeahOiusOW9lQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5Y+v55Sz6K+J55qE6K6w5b2VCiAgICBhc3luYyBmZXRjaEFwcGVhbGFibGVSZWNvcmRzKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgY29uc3QgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgICAgIGNvbnNvbGUubG9nKCfmraPlnKjojrflj5blj6/nlLPor4norrDlvZXvvIx1c2VySWQ6JywgdXNlcklkKTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgnL2FwaS9zdHVkZW50L3Rlc3QtcmVjb3Jkcy9hcHBlYWxhYmxlJyk7CiAgICAgICAgY29uc29sZS5sb2coJ+iOt+WPluWPr+eUs+ivieiusOW9leWTjeW6lDonLCByZXNwb25zZS5kYXRhKTsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMudGVzdFJlY29yZHMgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICBjb25zb2xlLmxvZygn6K6+572u5Y+v55Sz6K+J6K6w5b2VOicsIHRoaXMudGVzdFJlY29yZHMpOwogICAgICAgICAgaWYgKHRoaXMudGVzdFJlY29yZHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5pqC5peg5Y+v55Sz6K+J55qE5rWL6K+V6K6w5b2VJyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlIHx8ICfojrflj5blj6/nlLPor4norrDlvZXlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5Y+v55Sz6K+J6K6w5b2V5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5blj6/nlLPor4norrDlvZXlpLHotKUnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOiOt+WPlueUs+ivieWIl+ihqAogICAgYXN5bmMgZmV0Y2hBcHBlYWxMaXN0KCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoJy9hcGkvc3R1ZGVudC9hcHBlYWxzJyk7CiAgICAgICAgY29uc29sZS5sb2coJ+iOt+WPluWIsOeahOeUs+ivieWIl+ihqDonLCByZXNwb25zZS5kYXRhKTsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIC8vIOehruS/nei/lOWbnueahOaVsOaNruaYr+aVsOe7hAogICAgICAgICAgdGhpcy5hcHBlYWxMaXN0ID0gQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhLmRhdGEpID8gcmVzcG9uc2UuZGF0YS5kYXRhIDogcmVzcG9uc2UuZGF0YS5kYXRhLmNvbnRlbnQgfHwgW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlIHx8ICfojrflj5bnlLPor4nliJfooajlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZTsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bnlLPor4nliJfooajlpLHotKU6JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoKChfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlID09PSB2b2lkIDAgfHwgKF9lcnJvciRyZXNwb25zZSA9IF9lcnJvciRyZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZS5tZXNzYWdlKSB8fCAn6I635Y+W55Sz6K+J5YiX6KGo5aSx6LSlJyk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlpITnkIborrDlvZXpgInmi6nlj5jljJYKICAgIGhhbmRsZVJlY29yZENoYW5nZShyZWNvcmRJZCkgewogICAgICB0aGlzLmN1cnJlbnRSZWNvcmQgPSB0aGlzLnRlc3RSZWNvcmRzLmZpbmQociA9PiByLmlkID09PSByZWNvcmRJZCk7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRSZWNvcmQpIHsKICAgICAgICAvLyDorr7nva7ljp/lp4vmiJDnu6kKICAgICAgICB0aGlzLmFwcGVhbEZvcm0uZXhwZWN0ZWRTY29yZSA9IHRoaXMuY3VycmVudFJlY29yZC5zY29yZTsKICAgICAgfQogICAgfSwKICAgIC8vIOaPkOS6pOeUs+iviQogICAgc3VibWl0QXBwZWFsKCkgewogICAgICB0aGlzLiRyZWZzLmFwcGVhbEZvcm0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuc3VibWl0dGluZyA9IHRydWU7CiAgICAgICAgICAvLyDmnoTpgKDmj5DkuqTmlbDmja7vvIznoa7kv50gZXhwZWN0ZWRTY29yZSDmmK/mlbDlrZfnsbvlnosKICAgICAgICAgIGNvbnN0IHN1Ym1pdERhdGEgPSB7CiAgICAgICAgICAgIHRlc3RSZWNvcmRJZDogdGhpcy5hcHBlYWxGb3JtLnRlc3RSZWNvcmRJZCwKICAgICAgICAgICAgZXhwZWN0ZWRTY29yZTogcGFyc2VGbG9hdCh0aGlzLmFwcGVhbEZvcm0uZXhwZWN0ZWRTY29yZSksCiAgICAgICAgICAgIHJlYXNvbjogdGhpcy5hcHBlYWxGb3JtLnJlYXNvbgogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgnL2FwaS9zdHVkZW50L2FwcGVhbHMnLCBzdWJtaXREYXRhKTsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+eUs+ivieaPkOS6pOaIkOWKnycpOwogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5mZXRjaEFwcGVhbExpc3QoKTsKICAgICAgICAgICAgdGhpcy4kcmVmcy5hcHBlYWxGb3JtLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLmRhdGEubWVzc2FnZSB8fCAn5o+Q5Lqk55Sz6K+J5aSx6LSlJyk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHZhciBfZXJyb3IkcmVzcG9uc2UyOwogICAgICAgICAgY29uc29sZS5lcnJvcign5o+Q5Lqk55Sz6K+J5aSx6LSlOicsIGVycm9yKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoKChfZXJyb3IkcmVzcG9uc2UyID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZTIgPT09IHZvaWQgMCB8fCAoX2Vycm9yJHJlc3BvbnNlMiA9IF9lcnJvciRyZXNwb25zZTIuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlMi5tZXNzYWdlKSB8fCAn5o+Q5Lqk55Sz6K+J5aSx6LSlJyk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIHRoaXMuc3VibWl0dGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g54q25oCB5pi+56S655u45YWz5pa55rOVCiAgICBnZXRTdGF0dXNUeXBlKHN0YXR1cykgewogICAgICBjb25zdCB0eXBlcyA9IHsKICAgICAgICAnUEVORElORyc6ICd3YXJuaW5nJywKICAgICAgICAnQVBQUk9WRUQnOiAnc3VjY2VzcycsCiAgICAgICAgJ1JFSkVDVEVEJzogJ2RhbmdlcicKICAgICAgfTsKICAgICAgcmV0dXJuIHR5cGVzW3N0YXR1c10gfHwgJ2luZm8nOwogICAgfSwKICAgIGdldFN0YXR1c1RleHQoc3RhdHVzKSB7CiAgICAgIGNvbnN0IHRleHRzID0gewogICAgICAgICdQRU5ESU5HJzogJ+W+heWuoeaguCcsCiAgICAgICAgJ0FQUFJPVkVEJzogJ+W3sumAmui/hycsCiAgICAgICAgJ1JFSkVDVEVEJzogJ+W3sumps+WbnicKICAgICAgfTsKICAgICAgcmV0dXJuIHRleHRzW3N0YXR1c10gfHwgc3RhdHVzOwogICAgfSwKICAgIGZvcm1hdERhdGVUaW1lKGRhdGV0aW1lKSB7CiAgICAgIGlmICghZGF0ZXRpbWUpIHJldHVybiAnJzsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGV0aW1lKS50b0xvY2FsZVN0cmluZygpOwogICAgfQogIH0KfTs="},{"version":3,"names":["name","data","loading","submitting","dialogVisible","appealList","testRecords","currentRecord","appealForm","testRecordId","expectedScore","undefined","reason","rules","required","message","trigger","min","max","created","fetchAppealList","fetchAppealableRecords","methods","userId","localStorage","getItem","console","log","response","$axios","get","code","length","$message","info","error","Array","isArray","content","_error$response","handleRecordChange","recordId","find","r","id","score","submitAppeal","$refs","validate","valid","submitData","parseFloat","post","success","resetFields","_error$response2","getStatusType","status","types","getStatusText","texts","formatDateTime","datetime","Date","toLocaleString"],"sources":["src/views/student/ScoreAppeal.vue"],"sourcesContent":["<template>\n  <div class=\"score-appeal\">\n    <!-- 顶部说明卡片 -->\n    <el-card class=\"info-card\">\n      <div class=\"info-content\">\n        <i class=\"el-icon-info\"></i>\n        <div class=\"info-text\">\n          <h3>体测成绩申诉</h3>\n          <p>如果您对体测成绩有异议，可以在此提交申诉。请详细说明申诉理由，我们会尽快处理。</p>\n        </div>\n      </div>\n    </el-card>\n\n    <!-- 申诉按钮 -->\n    <div class=\"operation-bar\">\n      <el-button type=\"primary\" @click=\"dialogVisible = true\">\n        提交申诉\n      </el-button>\n    </div>\n\n    <!-- 申诉记录列表 -->\n    <el-table\n      :data=\"appealList\"\n      border\n      style=\"width: 100%\"\n      v-loading=\"loading\"\n    >\n      <el-table-column prop=\"createTime\" label=\"申诉时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ formatDateTime(scope.row.createTime) }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"sportsItemName\" label=\"测试项目\"></el-table-column>\n      <el-table-column prop=\"originalScore\" label=\"原始成绩\"></el-table-column>\n      <el-table-column prop=\"expectedScore\" label=\"期望成绩\"></el-table-column>\n      <el-table-column prop=\"reason\" label=\"申诉理由\" show-overflow-tooltip></el-table-column>\n      <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"getStatusType(scope.row.status)\">\n            {{ getStatusText(scope.row.status) }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"reviewComment\" label=\"审核意见\" show-overflow-tooltip></el-table-column>\n      <el-table-column prop=\"reviewTime\" label=\"审核时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ formatDateTime(scope.row.reviewTime) }}\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 申诉表单对话框 -->\n    <el-dialog \n      title=\"提交申诉\" \n      :visible.sync=\"dialogVisible\"\n      width=\"600px\"\n      :destroy-on-close=\"true\"\n      :close-on-click-modal=\"false\"\n    >\n      <el-form \n        :model=\"appealForm\" \n        :rules=\"rules\" \n        ref=\"appealForm\" \n        label-width=\"100px\"\n      >\n        <el-form-item label=\"测试记录\" prop=\"testRecordId\">\n          <el-select \n            v-model=\"appealForm.testRecordId\" \n            placeholder=\"请选择要申诉的测试记录\"\n            style=\"width: 100%\"\n            @change=\"handleRecordChange\"\n          >\n            <el-option\n              v-for=\"record in testRecords\"\n              :key=\"record.id\"\n              :label=\"`${record.sportsItemName} - ${record.score}分`\"\n              :value=\"record.id\"\n            >\n              <span style=\"float: left\">{{ record.sportsItemName }}</span>\n              <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ record.score }}分</span>\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"期望成绩\" prop=\"expectedScore\">\n          <el-input-number \n            v-model=\"appealForm.expectedScore\" \n            :min=\"0\" \n            :max=\"100\"\n            :precision=\"1\"\n            :step=\"0.1\"\n            :controls-position=\"'right'\"\n            style=\"width: 200px\"\n          ></el-input-number>\n        </el-form-item>\n        <el-form-item label=\"申诉理由\" prop=\"reason\">\n          <el-input \n            type=\"textarea\" \n            v-model=\"appealForm.reason\"\n            :rows=\"4\"\n            placeholder=\"请详细说明申诉理由，例如：成绩记录错误、测试过程中的特殊情况等...\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitAppeal\" :loading=\"submitting\">\n          提 交\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ScoreAppeal',\n  data() {\n    return {\n      loading: false,\n      submitting: false,\n      dialogVisible: false,\n      appealList: [],\n      testRecords: [], // 存储已通过审核的测试记录\n      currentRecord: null,\n      appealForm: {\n        testRecordId: '',\n        expectedScore: undefined,\n        reason: ''\n      },\n      rules: {\n        testRecordId: [\n          { required: true, message: '请选择要申诉的测试记录', trigger: 'change' }\n        ],\n        expectedScore: [\n          { required: true, message: '请输入期望成绩', trigger: 'blur' }\n        ],\n        reason: [\n          { required: true, message: '请输入申诉理由', trigger: 'blur' },\n          { min: 10, max: 500, message: '申诉理由长度应在10-500字之间', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  created() {\n    this.fetchAppealList()\n    this.fetchAppealableRecords() // 获取可申诉的记录\n  },\n  methods: {\n    // 获取可申诉的记录\n    async fetchAppealableRecords() {\n      try {\n        this.loading = true\n        const userId = localStorage.getItem('userId')\n        console.log('正在获取可申诉记录，userId:', userId)\n        \n        const response = await this.$axios.get('/api/student/test-records/appealable')\n        console.log('获取可申诉记录响应:', response.data)\n        \n        if (response.data.code === 200) {\n          this.testRecords = response.data.data\n          console.log('设置可申诉记录:', this.testRecords)\n          \n          if (this.testRecords.length === 0) {\n            this.$message.info('暂无可申诉的测试记录')\n          }\n        } else {\n          this.$message.error(response.data.message || '获取可申诉记录失败')\n        }\n      } catch (error) {\n        console.error('获取可申诉记录失败:', error)\n        this.$message.error('获取可申诉记录失败')\n      } finally {\n        this.loading = false\n      }\n    },\n\n    // 获取申诉列表\n    async fetchAppealList() {\n      try {\n        this.loading = true\n        const response = await this.$axios.get('/api/student/appeals')\n        console.log('获取到的申诉列表:', response.data)\n        \n        if (response.data.code === 200) {\n          // 确保返回的数据是数组\n          this.appealList = Array.isArray(response.data.data) ? \n            response.data.data : \n            (response.data.data.content || [])\n        } else {\n          this.$message.error(response.data.message || '获取申诉列表失败')\n        }\n      } catch (error) {\n        console.error('获取申诉列表失败:', error)\n        this.$message.error(error.response?.data?.message || '获取申诉列表失败')\n      } finally {\n        this.loading = false\n      }\n    },\n\n    // 处理记录选择变化\n    handleRecordChange(recordId) {\n      this.currentRecord = this.testRecords.find(r => r.id === recordId)\n      if (this.currentRecord) {\n        // 设置原始成绩\n        this.appealForm.expectedScore = this.currentRecord.score\n      }\n    },\n\n    // 提交申诉\n    submitAppeal() {\n      this.$refs.appealForm.validate(async valid => {\n        if (!valid) {\n          return\n        }\n\n        try {\n          this.submitting = true\n          // 构造提交数据，确保 expectedScore 是数字类型\n          const submitData = {\n            testRecordId: this.appealForm.testRecordId,\n            expectedScore: parseFloat(this.appealForm.expectedScore),\n            reason: this.appealForm.reason\n          }\n\n          const response = await this.$axios.post('/api/student/appeals', submitData)\n          \n          if (response.data.code === 200) {\n            this.$message.success('申诉提交成功')\n            this.dialogVisible = false\n            this.fetchAppealList()\n            this.$refs.appealForm.resetFields()\n          } else {\n            this.$message.error(response.data.message || '提交申诉失败')\n          }\n        } catch (error) {\n          console.error('提交申诉失败:', error)\n          this.$message.error(error.response?.data?.message || '提交申诉失败')\n        } finally {\n          this.submitting = false\n        }\n      })\n    },\n\n    // 状态显示相关方法\n    getStatusType(status) {\n      const types = {\n        'PENDING': 'warning',\n        'APPROVED': 'success',\n        'REJECTED': 'danger'\n      }\n      return types[status] || 'info'\n    },\n\n    getStatusText(status) {\n      const texts = {\n        'PENDING': '待审核',\n        'APPROVED': '已通过',\n        'REJECTED': '已驳回'\n      }\n      return texts[status] || status\n    },\n\n    formatDateTime(datetime) {\n      if (!datetime) return ''\n      return new Date(datetime).toLocaleString()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.score-appeal {\n  padding: 20px;\n\n  .info-card {\n    margin-bottom: 20px;\n    \n    .info-content {\n      display: flex;\n      align-items: flex-start;\n\n      .el-icon-info {\n        font-size: 24px;\n        color: #409EFF;\n        margin-right: 15px;\n      }\n\n      .info-text {\n        h3 {\n          margin: 0 0 10px;\n          color: #303133;\n        }\n\n        p {\n          margin: 0;\n          color: #606266;\n        }\n      }\n    }\n  }\n\n  .operation-bar {\n    margin: 20px 0;\n  }\n\n  // 添加一些动画效果\n  .el-dialog {\n    .el-select {\n      width: 100%;\n    }\n    \n    .el-input-number {\n      width: 180px;\n    }\n    \n    .el-textarea {\n      textarea {\n        transition: border-color 0.3s;\n        &:hover, &:focus {\n          border-color: #409EFF;\n        }\n      }\n    }\n  }\n\n  // 添加表格内容的样式\n  .el-table {\n    margin-top: 20px;\n    \n    .el-tag {\n      margin: 0;\n    }\n    \n    .cell {\n      white-space: pre-line;\n    }\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]}]}