{"remainingRequest":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\admin\\DataReview.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\admin\\DataReview.vue","mtime":1741511201233},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\babel.config.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1741355860000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEYXRhUmV2aWV3JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gLi4uIOi/memHjOaYr+S5i+WJjeeahGRhdGHphY3nva4KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyAuLi4g6L+Z6YeM5piv5LmL5YmN55qEbWV0aG9kc+mFjee9rgogIH0KfTs="},{"version":3,"names":["name","data","methods"],"sources":["src/views/admin/DataReview.vue"],"sourcesContent":["<template>\r\n  <div class=\"data-review\">\r\n    <!-- 搜索和筛选区域 -->\r\n    <div class=\"filter-section\">\r\n      <el-form :inline=\"true\" :model=\"filterForm\" class=\"filter-form\">\r\n        <el-form-item label=\"测试项目\">\r\n          <el-select v-model=\"filterForm.sportsItemId\" placeholder=\"选择测试项目\">\r\n            <el-option\r\n              v-for=\"item in sportsItems\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"录入教师\">\r\n          <el-select v-model=\"filterForm.teacherId\" placeholder=\"选择教师\">\r\n            <el-option\r\n              v-for=\"teacher in teachers\"\r\n              :key=\"teacher.id\"\r\n              :label=\"teacher.realName\"\r\n              :value=\"teacher.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"审核状态\">\r\n          <el-select v-model=\"filterForm.status\" placeholder=\"选择状态\">\r\n            <el-option label=\"待审核\" value=\"PENDING\"></el-option>\r\n            <el-option label=\"已通过\" value=\"APPROVED\"></el-option>\r\n            <el-option label=\"已驳回\" value=\"REJECTED\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试时间\">\r\n          <el-date-picker\r\n            v-model=\"filterForm.dateRange\"\r\n            type=\"daterange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            format=\"yyyy-MM-dd\"\r\n            value-format=\"yyyy-MM-dd\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\r\n          <el-button @click=\"resetFilter\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"operation-buttons\">\r\n        <el-button type=\"primary\" @click=\"handleAdd\">\r\n          <i class=\"el-icon-plus\"></i> 录入成绩\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 数据列表 -->\r\n    <el-table\r\n      :data=\"recordList\"\r\n      border\r\n      stripe\r\n      v-loading=\"loading\"\r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\r\n      <el-table-column label=\"学生姓名\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row?.student?.realName || '未知' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"测试项目\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row?.sportsItem?.name || '未知' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"测试成绩\">\r\n        <template slot-scope=\"scope\">\r\n          <span :class=\"{ 'abnormal-score': scope.row.isAbnormal }\">\r\n            {{ scope.row?.score }}{{ scope.row?.sportsItem?.unit || '' }}\r\n          </span>\r\n          <el-tooltip v-if=\"scope.row.isAbnormal\" effect=\"dark\" placement=\"top\">\r\n            <div slot=\"content\">{{ scope.row.abnormalReason }}</div>\r\n            <i class=\"el-icon-warning-outline warning-icon\"></i>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"录入教师\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row?.teacher?.realName || '未知' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"testTime\" label=\"测试时间\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          {{ formatDate(scope.row.testTime) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"getStatusType(scope.row.status)\">\r\n            {{ getStatusLabel(scope.row.status) }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"250\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleReview(scope.row)\"\r\n            v-if=\"scope.row.status === 'PENDING'\"\r\n          >审核</el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"warning\"\r\n            @click=\"handleEdit(scope.row)\"\r\n            v-if=\"scope.row.status === 'PENDING'\"\r\n          >修改</el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"info\"\r\n            @click=\"handleDetail(scope.row)\"\r\n          >详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"page.current\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"page.size\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"page.total\"\r\n      ></el-pagination>\r\n    </div>\r\n\r\n    <!-- 审核对话框 -->\r\n    <el-dialog title=\"成绩审核\" :visible.sync=\"reviewDialogVisible\" width=\"500px\">\r\n      <div class=\"review-info\">\r\n        <p><strong>学生：</strong>{{ currentRecord?.student?.realName || '未知' }}</p>\r\n        <p><strong>测试项目：</strong>{{ currentRecord?.sportsItem?.name || '未知' }}</p>\r\n        <p>\r\n          <strong>测试成绩：</strong>\r\n          <span :class=\"{ 'abnormal-score': currentRecord?.isAbnormal }\">\r\n            {{ currentRecord?.score }}{{ currentRecord?.sportsItem?.unit || '' }}\r\n          </span>\r\n          <el-tooltip v-if=\"currentRecord?.isAbnormal\" effect=\"dark\" placement=\"top\">\r\n            <div slot=\"content\">{{ currentRecord?.abnormalReason }}</div>\r\n            <i class=\"el-icon-warning-outline warning-icon\"></i>\r\n          </el-tooltip>\r\n        </p>\r\n        <p><strong>测试时间：</strong>{{ formatDate(currentRecord?.testTime) }}</p>\r\n      </div>\r\n\r\n      <el-form :model=\"reviewForm\" :rules=\"reviewRules\" ref=\"reviewForm\">\r\n        <el-form-item label=\"审核结果\" prop=\"status\">\r\n          <el-radio-group v-model=\"reviewForm.status\">\r\n            <el-radio label=\"APPROVED\">通过</el-radio>\r\n            <el-radio label=\"REJECTED\">驳回</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item \r\n          label=\"审核意见\" \r\n          prop=\"reviewComment\"\r\n          :required=\"reviewForm.status === 'REJECTED'\"\r\n        >\r\n          <el-input\r\n            type=\"textarea\"\r\n            v-model=\"reviewForm.reviewComment\"\r\n            :rows=\"3\"\r\n            placeholder=\"请输入审核意见\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"reviewDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitReview\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 详情对话框 -->\r\n    <el-dialog title=\"详细信息\" :visible.sync=\"detailDialogVisible\" width=\"500px\">\r\n      <div class=\"detail-info\">\r\n        <p><strong>学生：</strong>{{ currentRecord?.student?.realName || '未知' }}</p>\r\n        <p><strong>测试项目：</strong>{{ currentRecord?.sportsItem?.name || '未知' }}</p>\r\n        <p>\r\n          <strong>测试成绩：</strong>\r\n          <span :class=\"{ 'abnormal-score': currentRecord?.isAbnormal }\">\r\n            {{ currentRecord?.score }}{{ currentRecord?.sportsItem?.unit || '' }}\r\n          </span>\r\n          <el-tooltip v-if=\"currentRecord?.isAbnormal\" effect=\"dark\" placement=\"top\">\r\n            <div slot=\"content\">{{ currentRecord?.abnormalReason }}</div>\r\n            <i class=\"el-icon-warning-outline warning-icon\"></i>\r\n          </el-tooltip>\r\n        </p>\r\n        <p><strong>录入教师：</strong>{{ currentRecord?.teacher?.realName || '未知' }}</p>\r\n        <p><strong>测试时间：</strong>{{ formatDate(currentRecord?.testTime) }}</p>\r\n        <p><strong>审核状态：</strong>{{ getStatusLabel(currentRecord?.status) }}</p>\r\n        <p><strong>审核意见：</strong>{{ currentRecord?.reviewComment || '无' }}</p>\r\n        <p><strong>审核人：</strong>{{ currentRecord?.reviewer?.realName || '未审核' }}</p>\r\n        <p><strong>审核时间：</strong>{{ formatDate(currentRecord?.reviewTime) || '未审核' }}</p>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 添加/修改对话框 -->\r\n    <el-dialog \r\n      :title=\"editMode ? '修改成绩' : '录入成绩'\" \r\n      :visible.sync=\"formDialogVisible\" \r\n      width=\"500px\"\r\n    >\r\n      <el-form :model=\"form\" :rules=\"formRules\" ref=\"form\" label-width=\"100px\">\r\n        <el-form-item label=\"学生\" prop=\"studentId\">\r\n          <el-select \r\n            v-model=\"form.studentId\" \r\n            placeholder=\"选择学生\" \r\n            filterable\r\n            :disabled=\"editMode\"\r\n          >\r\n            <el-option\r\n              v-for=\"student in students\"\r\n              :key=\"student.id\"\r\n              :label=\"student.realName\"\r\n              :value=\"student.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试项目\" prop=\"sportsItemId\">\r\n          <el-select \r\n            v-model=\"form.sportsItemId\" \r\n            placeholder=\"选择测试项目\"\r\n            :disabled=\"editMode\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in sportsItems\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试成绩\" prop=\"score\">\r\n          <el-input-number \r\n            v-model=\"form.score\" \r\n            :precision=\"2\"\r\n            :step=\"0.1\"\r\n            :min=\"0\"\r\n          ></el-input-number>\r\n          <span style=\"margin-left: 10px\">\r\n            {{ getSportsItemUnit(form.sportsItemId) }}\r\n          </span>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试时间\" prop=\"testTime\">\r\n          <el-date-picker\r\n            v-model=\"form.testTime\"\r\n            type=\"datetime\"\r\n            placeholder=\"选择测试时间\"\r\n            format=\"yyyy-MM-dd HH:mm:ss\"\r\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"formDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DataReview',\r\n  data() {\r\n    return {\r\n      // ... 这里是之前的data配置\r\n    }\r\n  },\r\n  methods: {\r\n    // ... 这里是之前的methods配置\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.data-review {\r\n  padding: 20px;\r\n}\r\n\r\n.filter-section {\r\n  margin-bottom: 20px;\r\n  background-color: #f5f7fa;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.abnormal-score {\r\n  color: #f56c6c;\r\n  font-weight: bold;\r\n}\r\n\r\n.warning-icon {\r\n  color: #e6a23c;\r\n  margin-left: 5px;\r\n}\r\n\r\n.review-info, .detail-info {\r\n  background-color: #f5f7fa;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n</style>"],"mappings":"AAiRA;EACAA,IAAA;EACAC,KAAA;IACA;MACA;IAAA,CACA;EACA;EACAC,OAAA;IACA;EAAA;AAEA","ignoreList":[]}]}