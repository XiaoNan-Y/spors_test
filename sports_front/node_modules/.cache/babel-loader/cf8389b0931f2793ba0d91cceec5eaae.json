{"remainingRequest":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\router\\index.js","mtime":1739359690048},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\babel.config.js","mtime":1739347249330},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739346865238},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739346847767}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3Iuc29tZS5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IExvZ2luIGZyb20gJy4uL3ZpZXdzL0xvZ2luLnZ1ZSc7CmltcG9ydCBBZG1pbkxheW91dCBmcm9tICcuLi9sYXlvdXRzL0FkbWluTGF5b3V0LnZ1ZSc7ClZ1ZS51c2UoVnVlUm91dGVyKTsKY29uc3Qgcm91dGVzID0gW3sKICBwYXRoOiAnL2xvZ2luJywKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudDogTG9naW4sCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiBmYWxzZQogIH0KfSwgewogIHBhdGg6ICcvYWRtaW4nLAogIGNvbXBvbmVudDogQWRtaW5MYXlvdXQsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlLAogICAgcm9sZTogJ0FETUlOJwogIH0sCiAgY2hpbGRyZW46IFt7CiAgICBwYXRoOiAnZGFzaGJvYXJkJywKICAgIG5hbWU6ICdBZG1pbkRhc2hib2FyZCcsCiAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvYWRtaW4vRGFzaGJvYXJkLnZ1ZScpCiAgfSwgewogICAgcGF0aDogJ3VzZXJzL3N0dWRlbnQnLAogICAgbmFtZTogJ1N0dWRlbnRNYW5hZ2VtZW50JywKICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCcuLi92aWV3cy9hZG1pbi9TdHVkZW50TWFuYWdlbWVudC52dWUnKQogIH0sIHsKICAgIHBhdGg6ICd1c2Vycy90ZWFjaGVyJywKICAgIG5hbWU6ICdUZWFjaGVyTWFuYWdlbWVudCcsCiAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvYWRtaW4vVGVhY2hlck1hbmFnZW1lbnQudnVlJykKICB9LCB7CiAgICBwYXRoOiAnc3BvcnRzLWl0ZW1zJywKICAgIG5hbWU6ICdTcG9ydHNJdGVtcycsCiAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvYWRtaW4vU3BvcnRzSXRlbXMudnVlJykKICB9LCB7CiAgICBwYXRoOiAnbm90aWNlcycsCiAgICBuYW1lOiAnTm90aWNlTWFuYWdlbWVudCcsCiAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvYWRtaW4vTm90aWNlTWFuYWdlbWVudC52dWUnKQogIH0sIHsKICAgIHBhdGg6ICdkYXRhLXJldmlldycsCiAgICBuYW1lOiAnRGF0YVJldmlldycsCiAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvYWRtaW4vRGF0YVJldmlldy52dWUnKQogIH0sIHsKICAgIHBhdGg6ICdwcm9maWxlJywKICAgIG5hbWU6ICdBZG1pblByb2ZpbGUnLAogICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uL3ZpZXdzL2FkbWluL1Byb2ZpbGUudnVlJykKICB9XQp9LCB7CiAgcGF0aDogJy8nLAogIHJlZGlyZWN0OiAnL2xvZ2luJwp9XTsKY29uc3Qgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgbW9kZTogJ2hpc3RvcnknLAogIGJhc2U6IHByb2Nlc3MuZW52LkJBU0VfVVJMLAogIHJvdXRlcwp9KTsKCi8vIOeugOWMlui3r+eUseWuiOWNq+mAu+i+kQpyb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20sIG5leHQpID0+IHsKICB2YXIgX3RvJG1hdGNoZWQkZmluZDsKICBjb25zdCB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKTsKICBjb25zdCByZXF1aXJlc0F1dGggPSB0by5tYXRjaGVkLnNvbWUocmVjb3JkID0+IHJlY29yZC5tZXRhLnJlcXVpcmVzQXV0aCk7CiAgaWYgKCFyZXF1aXJlc0F1dGgpIHsKICAgIC8vIOS4jemcgOimgeiupOivgeeahOi3r+eUse+8jOebtOaOpemAmui/hwogICAgbmV4dCgpOwogICAgcmV0dXJuOwogIH0KICBpZiAoIXVzZXIpIHsKICAgIC8vIOmcgOimgeiupOivgeS9huacqueZu+W9le+8jOmHjeWumuWQkeWIsOeZu+W9lemhtQogICAgbmV4dCgnL2xvZ2luJyk7CiAgICByZXR1cm47CiAgfQoKICAvLyDmo4Dmn6Xop5LoibLmnYPpmZAKICBjb25zdCByZXF1aXJlZFJvbGUgPSAoX3RvJG1hdGNoZWQkZmluZCA9IHRvLm1hdGNoZWQuZmluZChyZWNvcmQgPT4gcmVjb3JkLm1ldGEucm9sZSkpID09PSBudWxsIHx8IF90byRtYXRjaGVkJGZpbmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90byRtYXRjaGVkJGZpbmQubWV0YS5yb2xlOwogIGlmIChyZXF1aXJlZFJvbGUgJiYgcmVxdWlyZWRSb2xlICE9PSB1c2VyLnVzZXJUeXBlKSB7CiAgICBuZXh0KCcvbG9naW4nKTsKICAgIHJldHVybjsKICB9CiAgbmV4dCgpOwp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"names":["Vue","VueRouter","Login","AdminLayout","use","routes","path","name","component","meta","requiresAuth","role","children","redirect","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","_to$matched$find","user","JSON","parse","localStorage","getItem","matched","some","record","requiredRole","find","userType"],"sources":["C:/Users/HP/Desktop/sports_test/sports_front/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Login from '../views/Login.vue'\r\nimport AdminLayout from '../layouts/AdminLayout.vue'\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: Login,\r\n    meta: { requiresAuth: false }\r\n  },\r\n  {\r\n    path: '/admin',\r\n    component: AdminLayout,\r\n    meta: { requiresAuth: true, role: 'ADMIN' },\r\n    children: [\r\n      {\r\n        path: 'dashboard',\r\n        name: 'AdminDashboard',\r\n        component: () => import('../views/admin/Dashboard.vue')\r\n      },\r\n      {\r\n        path: 'users/student',\r\n        name: 'StudentManagement',\r\n        component: () => import('../views/admin/StudentManagement.vue')\r\n      },\r\n      {\r\n        path: 'users/teacher',\r\n        name: 'TeacherManagement',\r\n        component: () => import('../views/admin/TeacherManagement.vue')\r\n      },\r\n      {\r\n        path: 'sports-items',\r\n        name: 'SportsItems',\r\n        component: () => import('../views/admin/SportsItems.vue')\r\n      },\r\n      {\r\n        path: 'notices',\r\n        name: 'NoticeManagement',\r\n        component: () => import('../views/admin/NoticeManagement.vue')\r\n      },\r\n      {\r\n        path: 'data-review',\r\n        name: 'DataReview',\r\n        component: () => import('../views/admin/DataReview.vue')\r\n      },\r\n      {\r\n        path: 'profile',\r\n        name: 'AdminProfile',\r\n        component: () => import('../views/admin/Profile.vue')\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    path: '/',\r\n    redirect: '/login'\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n})\r\n\r\n// 简化路由守卫逻辑\r\nrouter.beforeEach((to, from, next) => {\r\n  const user = JSON.parse(localStorage.getItem('user'))\r\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth)\r\n  \r\n  if (!requiresAuth) {\r\n    // 不需要认证的路由，直接通过\r\n    next()\r\n    return\r\n  }\r\n\r\n  if (!user) {\r\n    // 需要认证但未登录，重定向到登录页\r\n    next('/login')\r\n    return\r\n  }\r\n\r\n  // 检查角色权限\r\n  const requiredRole = to.matched.find(record => record.meta.role)?.meta.role\r\n  if (requiredRole && requiredRole !== user.userType) {\r\n    next('/login')\r\n    return\r\n  }\r\n\r\n  next()\r\n})\r\n\r\nexport default router "],"mappings":";;;AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,KAAK,MAAM,oBAAoB;AACtC,OAAOC,WAAW,MAAM,4BAA4B;AAEpDH,GAAG,CAACI,GAAG,CAACH,SAAS,CAAC;AAElB,MAAMI,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAEN,KAAK;EAChBO,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAC9B,CAAC,EACD;EACEJ,IAAI,EAAE,QAAQ;EACdE,SAAS,EAAEL,WAAW;EACtBM,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEC,IAAI,EAAE;EAAQ,CAAC;EAC3CC,QAAQ,EAAE,CACR;IACEN,IAAI,EAAE,WAAW;IACjBC,IAAI,EAAE,gBAAgB;IACtBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,8BAA8B;EACxD,CAAC,EACD;IACEF,IAAI,EAAE,eAAe;IACrBC,IAAI,EAAE,mBAAmB;IACzBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,sCAAsC;EAChE,CAAC,EACD;IACEF,IAAI,EAAE,eAAe;IACrBC,IAAI,EAAE,mBAAmB;IACzBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,sCAAsC;EAChE,CAAC,EACD;IACEF,IAAI,EAAE,cAAc;IACpBC,IAAI,EAAE,aAAa;IACnBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,gCAAgC;EAC1D,CAAC,EACD;IACEF,IAAI,EAAE,SAAS;IACfC,IAAI,EAAE,kBAAkB;IACxBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,qCAAqC;EAC/D,CAAC,EACD;IACEF,IAAI,EAAE,aAAa;IACnBC,IAAI,EAAE,YAAY;IAClBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,+BAA+B;EACzD,CAAC,EACD;IACEF,IAAI,EAAE,SAAS;IACfC,IAAI,EAAE,cAAc;IACpBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,4BAA4B;EACtD,CAAC;AAEL,CAAC,EACD;EACEF,IAAI,EAAE,GAAG;EACTO,QAAQ,EAAE;AACZ,CAAC,CACF;AAED,MAAMC,MAAM,GAAG,IAAIb,SAAS,CAAC;EAC3Bc,IAAI,EAAE,SAAS;EACfC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ;EAC1Bd;AACF,CAAC,CAAC;;AAEF;AACAS,MAAM,CAACM,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EAAA,IAAAC,gBAAA;EACpC,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,MAAMnB,YAAY,GAAGW,EAAE,CAACS,OAAO,CAACC,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACvB,IAAI,CAACC,YAAY,CAAC;EAExE,IAAI,CAACA,YAAY,EAAE;IACjB;IACAa,IAAI,CAAC,CAAC;IACN;EACF;EAEA,IAAI,CAACE,IAAI,EAAE;IACT;IACAF,IAAI,CAAC,QAAQ,CAAC;IACd;EACF;;EAEA;EACA,MAAMU,YAAY,IAAAT,gBAAA,GAAGH,EAAE,CAACS,OAAO,CAACI,IAAI,CAACF,MAAM,IAAIA,MAAM,CAACvB,IAAI,CAACE,IAAI,CAAC,cAAAa,gBAAA,uBAA3CA,gBAAA,CAA6Cf,IAAI,CAACE,IAAI;EAC3E,IAAIsB,YAAY,IAAIA,YAAY,KAAKR,IAAI,CAACU,QAAQ,EAAE;IAClDZ,IAAI,CAAC,QAAQ,CAAC;IACd;EACF;EAEAA,IAAI,CAAC,CAAC;AACR,CAAC,CAAC;AAEF,eAAeT,MAAM","ignoreList":[]}]}