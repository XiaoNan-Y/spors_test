{"remainingRequest":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\admin\\UserList.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\views\\admin\\UserList.vue","mtime":1741700320330},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\babel.config.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741946992817},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1741946991478},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741946992817},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1741947007540}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyczogW10sCiAgICAgIHVzZXJUeXBlOiAnJywKICAgICAgLy8gJ1NUVURFTlQnIG9yICdURUFDSEVSJwogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGZldGNoVXNlcnMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLnVzZXJUeXBlID09PSAnU1RVREVOVCcgPyAnL3N0dWRlbnRzJyA6ICcvdGVhY2hlcnMnOwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kYXhpb3MuZ2V0KGAvYXBpL2FkbWluL3VzZXJzJHtlbmRwb2ludH1gLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgcGFnZU51bTogdGhpcy5jdXJyZW50UGFnZSwKICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMudXNlcnMgPSByZXNwb25zZS5kYXRhLmRhdGEuY29udGVudDsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLmRhdGEudG90YWxFbGVtZW50czsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1zZyB8fCAn6I635Y+W55So5oi35YiX6KGo5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPlueUqOaIt+WIl+ihqOWksei0pe+8micgKyBlcnJvci5tZXNzYWdlKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVBhZ2VDaGFuZ2UocGFnZSkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsKICAgICAgdGhpcy5mZXRjaFVzZXJzKCk7CiAgICB9LAogICAgaGFuZGxlRWRpdChyb3cpIHsKICAgICAgdGhpcy4kZW1pdCgnZWRpdCcsIHJvdyk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTliKDpmaTor6XnlKjmiLc/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGF4aW9zLmRlbGV0ZShgL2FwaS9hZG1pbi91c2Vycy8ke3Jvdy5pZH1gKTsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgICB0aGlzLmZldGNoVXNlcnMoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tc2cgfHwgJ+WIoOmZpOWksei0pScpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliKDpmaTlpLHotKXvvJonICsgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaFVzZXJzKCk7CiAgfSwKICB3YXRjaDogewogICAgdXNlclR5cGU6IHsKICAgICAgaGFuZGxlcihuZXdWYWwpIHsKICAgICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgICAgIHRoaXMuZmV0Y2hVc2VycygpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["data","users","userType","currentPage","pageSize","total","methods","fetchUsers","endpoint","response","$axios","get","params","pageNum","code","content","totalElements","$message","error","msg","message","handlePageChange","page","handleEdit","row","$emit","handleDelete","$confirm","confirmButtonText","cancelButtonText","type","then","delete","id","success","catch","created","watch","handler","newVal","immediate"],"sources":["src/views/admin/UserList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-table :data=\"users\" border>\r\n      <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\r\n      <el-table-column prop=\"realName\" label=\"姓名\"></el-table-column>\r\n      <el-table-column prop=\"studentNumber\" label=\"学号\" v-if=\"userType === 'STUDENT'\"></el-table-column>\r\n      <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n      <el-table-column prop=\"phone\" label=\"电话\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-pagination\r\n      @current-change=\"handlePageChange\"\r\n      :current-page.sync=\"currentPage\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"total, prev, pager, next\"\r\n      :total=\"total\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      users: [],\r\n      userType: '', // 'STUDENT' or 'TEACHER'\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchUsers() {\r\n      try {\r\n        const endpoint = this.userType === 'STUDENT' ? '/students' : '/teachers';\r\n        const response = await this.$axios.get(`/api/admin/users${endpoint}`, {\r\n          params: {\r\n            pageNum: this.currentPage,\r\n            pageSize: this.pageSize\r\n          }\r\n        });\r\n        if (response.data.code === 200) {\r\n          this.users = response.data.data.content;\r\n          this.total = response.data.data.totalElements;\r\n        } else {\r\n          this.$message.error(response.data.msg || '获取用户列表失败');\r\n        }\r\n      } catch (error) {\r\n        this.$message.error('获取用户列表失败：' + error.message);\r\n      }\r\n    },\r\n    handlePageChange(page) {\r\n      this.currentPage = page;\r\n      this.fetchUsers();\r\n    },\r\n    handleEdit(row) {\r\n      this.$emit('edit', row);\r\n    },\r\n    handleDelete(row) {\r\n      this.$confirm('确认删除该用户?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(async () => {\r\n        try {\r\n          const response = await this.$axios.delete(`/api/admin/users/${row.id}`);\r\n          if (response.data.code === 200) {\r\n            this.$message.success('删除成功');\r\n            this.fetchUsers();\r\n          } else {\r\n            this.$message.error(response.data.msg || '删除失败');\r\n          }\r\n        } catch (error) {\r\n          this.$message.error('删除失败：' + error.message);\r\n        }\r\n      }).catch(() => {});\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchUsers();\r\n  },\r\n  watch: {\r\n    userType: {\r\n      handler(newVal) {\r\n        if (newVal) {\r\n          this.currentPage = 1;\r\n          this.fetchUsers();\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script> "],"mappings":"AA2BA;EACAA,KAAA;IACA;MACAC,KAAA;MACAC,QAAA;MAAA;MACAC,WAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAC,WAAA;MACA;QACA,MAAAC,QAAA,QAAAN,QAAA;QACA,MAAAO,QAAA,cAAAC,MAAA,CAAAC,GAAA,oBAAAH,QAAA;UACAI,MAAA;YACAC,OAAA,OAAAV,WAAA;YACAC,QAAA,OAAAA;UACA;QACA;QACA,IAAAK,QAAA,CAAAT,IAAA,CAAAc,IAAA;UACA,KAAAb,KAAA,GAAAQ,QAAA,CAAAT,IAAA,CAAAA,IAAA,CAAAe,OAAA;UACA,KAAAV,KAAA,GAAAI,QAAA,CAAAT,IAAA,CAAAA,IAAA,CAAAgB,aAAA;QACA;UACA,KAAAC,QAAA,CAAAC,KAAA,CAAAT,QAAA,CAAAT,IAAA,CAAAmB,GAAA;QACA;MACA,SAAAD,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA,eAAAA,KAAA,CAAAE,OAAA;MACA;IACA;IACAC,iBAAAC,IAAA;MACA,KAAAnB,WAAA,GAAAmB,IAAA;MACA,KAAAf,UAAA;IACA;IACAgB,WAAAC,GAAA;MACA,KAAAC,KAAA,SAAAD,GAAA;IACA;IACAE,aAAAF,GAAA;MACA,KAAAG,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAC,IAAA;QACA;UACA,MAAAtB,QAAA,cAAAC,MAAA,CAAAsB,MAAA,qBAAAR,GAAA,CAAAS,EAAA;UACA,IAAAxB,QAAA,CAAAT,IAAA,CAAAc,IAAA;YACA,KAAAG,QAAA,CAAAiB,OAAA;YACA,KAAA3B,UAAA;UACA;YACA,KAAAU,QAAA,CAAAC,KAAA,CAAAT,QAAA,CAAAT,IAAA,CAAAmB,GAAA;UACA;QACA,SAAAD,KAAA;UACA,KAAAD,QAAA,CAAAC,KAAA,WAAAA,KAAA,CAAAE,OAAA;QACA;MACA,GAAAe,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAA7B,UAAA;EACA;EACA8B,KAAA;IACAnC,QAAA;MACAoC,QAAAC,MAAA;QACA,IAAAA,MAAA;UACA,KAAApC,WAAA;UACA,KAAAI,UAAA;QACA;MACA;MACAiC,SAAA;IACA;EACA;AACA","ignoreList":[]}]}