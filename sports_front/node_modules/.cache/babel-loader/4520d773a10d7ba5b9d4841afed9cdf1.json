{"remainingRequest":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\src\\utils\\request.js","mtime":1742792153850},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\babel.config.js","mtime":1741355860000},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741946992817},{"path":"C:\\Users\\HP\\Desktop\\sports_test\\sports_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1741946991478}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7CgovLyDliJvlu7ogYXhpb3Mg5a6e5L6LCmNvbnN0IHJlcXVlc3QgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwJywKICAvLyDlkI7nq6/mnI3liqHlnLDlnYAKICB0aW1lb3V0OiA1MDAwIC8vIOivt+axgui2heaXtuaXtumXtAp9KTsKCi8vIOivt+axguaLpuaIquWZqApyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShjb25maWcgPT4gewogIC8vIOWmguaenOaYr+eZu+W9leivt+axgu+8jOS4jemcgOimgea3u+WKoCB0b2tlbiDlkowgdXNlcklkCiAgaWYgKGNvbmZpZy51cmwuaW5jbHVkZXMoJy9hcGkvdXNlcnMvbG9naW4nKSkgewogICAgcmV0dXJuIGNvbmZpZzsKICB9CgogIC8vIOS7jiBsb2NhbFN0b3JhZ2Ug6I635Y+WIHRva2VuIOWSjCB1c2VySWQKICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogIGNvbnN0IHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKCiAgLy8g5re75Yqg6K+m57uG55qE6K+35rGC5pel5b+XCiAgY29uc29sZS5sb2coJ+ivt+axguaLpuaIquWZqDonLCB7CiAgICB1cmw6IGNvbmZpZy51cmwsCiAgICBtZXRob2Q6IGNvbmZpZy5tZXRob2QsCiAgICB0b2tlbiwKICAgIHVzZXJJZCwKICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzCiAgfSk7CgogIC8vIOiuvue9ruivt+axguWktAogIGNvbmZpZy5oZWFkZXJzID0gewogICAgLi4uY29uZmlnLmhlYWRlcnMsCiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgfTsKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dG9rZW59YDsKICB9CgogIC8vIOehruS/nSB1c2VySWQg5a2Y5Zyo5LiU5LiN5Li656m6CiAgaWYgKHVzZXJJZCAmJiB1c2VySWQudHJpbSgpKSB7CiAgICBjb25maWcuaGVhZGVyc1sndXNlcklkJ10gPSB1c2VySWQudHJpbSgpOwogICAgY29uc29sZS5sb2coJ+iuvue9ruivt+axguWktCB1c2VySWQ6JywgdXNlcklkKTsKICB9IGVsc2UgewogICAgY29uc29sZS53YXJuKCd1c2VySWTkuI3lrZjlnKjmiJbkuLrnqbonKTsKICAgIC8vIOWmguaenOS4jeaYr+eZu+W9leebuOWFs+eahOivt+axgu+8jOWImemHjeWumuWQkeWIsOeZu+W9lemhtQogICAgaWYgKCFjb25maWcudXJsLmluY2x1ZGVzKCcvYXBpL3VzZXJzJykpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJzsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCfmnKrnmbvlvZXmiJbnmbvlvZXlt7Lov4fmnJ8nKTsKICAgIH0KICB9CiAgcmV0dXJuIGNvbmZpZzsKfSwgZXJyb3IgPT4gewogIGNvbnNvbGUuZXJyb3IoJ+ivt+axgumUmeivrzonLCBlcnJvcik7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CgovLyDlk43lupTmi6bmiKrlmagKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhOwoKICAvLyDmt7vliqDosIPor5Xml6Xlv5cKICBjb25zb2xlLmxvZygnUmVzcG9uc2UgZGF0YTonLCByZXMpOwoKICAvLyDlpoLmnpzov5Tlm57nmoTkuI3mmK/moIflh4bmoLzlvI/vvIznm7TmjqXov5Tlm57mlbDmja4KICBpZiAocmVzLmNvZGUgPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KICBpZiAocmVzLmNvZGUgIT09IDIwMCkgewogICAgLy8g5aaC5p6c5pivNDAx6ZSZ6K+v77yM6K+05piOdG9rZW7lpLHmlYjvvIzpnIDopoHph43mlrDnmbvlvZUKICAgIGlmIChyZXMuY29kZSA9PT0gNDAxKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbG9naW4nOwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCfmnKrnmbvlvZXmiJbnmbvlvZXlt7Lov4fmnJ8nKSk7CiAgICB9CgogICAgLy8g5YW25LuW6ZSZ6K+v55u05o6l5o+Q56S6CiAgICBNZXNzYWdlKHsKICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UgfHwgcmVzLm1zZyB8fCAn6ZSZ6K+vJywKICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgZHVyYXRpb246IDUgKiAxMDAwCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLm1lc3NhZ2UgfHwgcmVzLm1zZyB8fCAn6ZSZ6K+vJykpOwogIH0KICByZXR1cm4gcmVzcG9uc2U7Cn0sIGVycm9yID0+IHsKICB2YXIgX2Vycm9yJHJlc3BvbnNlOwogIGNvbnNvbGUuZXJyb3IoJ1Jlc3BvbnNlIGVycm9yOicsIGVycm9yKTsKICAvLyDlpoLmnpzmmK80MDHplJnor6/vvIzor7TmmI50b2tlbuWkseaViO+8jOmcgOimgemHjeaWsOeZu+W9lQogIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbG9naW4nOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcign5pyq55m75b2V5oiW55m75b2V5bey6L+H5pyfJykpOwogIH0KICBNZXNzYWdlLmVycm9yKCgoX2Vycm9yJHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwIHx8IChfZXJyb3IkcmVzcG9uc2UgPSBfZXJyb3IkcmVzcG9uc2UuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UubWVzc2FnZSkgfHwgJ+ivt+axguWksei0pScpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCByZXF1ZXN0Ow=="},{"version":3,"names":["axios","Message","request","create","baseURL","process","env","VUE_APP_API_URL","timeout","interceptors","use","config","url","includes","token","localStorage","getItem","userId","console","log","method","headers","trim","warn","window","location","href","Promise","reject","error","response","res","data","code","undefined","clear","Error","message","msg","type","duration","_error$response","status"],"sources":["C:/Users/HP/Desktop/sports_test/sports_front/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\n\r\n// 创建 axios 实例\r\nconst request = axios.create({\r\n  baseURL: process.env.VUE_APP_API_URL || 'http://localhost:8080', // 后端服务地址\r\n  timeout: 5000 // 请求超时时间\r\n})\r\n\r\n// 请求拦截器\r\nrequest.interceptors.request.use(\r\n  config => {\r\n    // 如果是登录请求，不需要添加 token 和 userId\r\n    if (config.url.includes('/api/users/login')) {\r\n      return config\r\n    }\r\n    \r\n    // 从 localStorage 获取 token 和 userId\r\n    const token = localStorage.getItem('token')\r\n    const userId = localStorage.getItem('userId')\r\n    \r\n    // 添加详细的请求日志\r\n    console.log('请求拦截器:', {\r\n      url: config.url,\r\n      method: config.method,\r\n      token,\r\n      userId,\r\n      headers: config.headers\r\n    })\r\n    \r\n    // 设置请求头\r\n    config.headers = {\r\n      ...config.headers,\r\n      'Content-Type': 'application/json'\r\n    }\r\n    \r\n    if (token) {\r\n      config.headers['Authorization'] = `Bearer ${token}`\r\n    }\r\n    \r\n    // 确保 userId 存在且不为空\r\n    if (userId && userId.trim()) {\r\n      config.headers['userId'] = userId.trim()\r\n      console.log('设置请求头 userId:', userId)\r\n    } else {\r\n      console.warn('userId不存在或为空')\r\n      // 如果不是登录相关的请求，则重定向到登录页\r\n      if (!config.url.includes('/api/users')) {\r\n        window.location.href = '/login'\r\n        return Promise.reject('未登录或登录已过期')\r\n      }\r\n    }\r\n    \r\n    return config\r\n  },\r\n  error => {\r\n    console.error('请求错误:', error)\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 响应拦截器\r\nrequest.interceptors.response.use(\r\n  response => {\r\n    const res = response.data\r\n    \r\n    // 添加调试日志\r\n    console.log('Response data:', res)\r\n    \r\n    // 如果返回的不是标准格式，直接返回数据\r\n    if (res.code === undefined) {\r\n      return response\r\n    }\r\n    \r\n    if (res.code !== 200) {\r\n      // 如果是401错误，说明token失效，需要重新登录\r\n      if (res.code === 401) {\r\n        localStorage.clear()\r\n        window.location.href = '/login'\r\n        return Promise.reject(new Error('未登录或登录已过期'))\r\n      }\r\n      \r\n      // 其他错误直接提示\r\n      Message({\r\n        message: res.message || res.msg || '错误',\r\n        type: 'error',\r\n        duration: 5 * 1000\r\n      })\r\n      return Promise.reject(new Error(res.message || res.msg || '错误'))\r\n    }\r\n    return response\r\n  },\r\n  error => {\r\n    console.error('Response error:', error)\r\n    // 如果是401错误，说明token失效，需要重新登录\r\n    if (error.response && error.response.status === 401) {\r\n      localStorage.clear()\r\n      window.location.href = '/login'\r\n      return Promise.reject(new Error('未登录或登录已过期'))\r\n    }\r\n    \r\n    Message.error(error.response?.data?.message || '请求失败')\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default request "],"mappings":"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","ignoreList":[]}]}