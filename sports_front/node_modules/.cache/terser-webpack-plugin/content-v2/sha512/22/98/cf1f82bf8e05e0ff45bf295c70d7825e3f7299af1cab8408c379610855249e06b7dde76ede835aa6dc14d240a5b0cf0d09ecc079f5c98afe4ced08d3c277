{"map":"{\"version\":3,\"sources\":[\"js/chunk-a45ab8d4.9a0c14fb.js\"],\"names\":[\"window\",\"push\",\"0179\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"r\",\"render\",\"_vm\",\"this\",\"_c\",\"_self\",\"staticClass\",\"attrs\",\"slot\",\"_v\",\"placeholder\",\"size\",\"on\",\"change\",\"fetchRecords\",\"model\",\"value\",\"selectedSemester\",\"callback\",\"$$v\",\"expression\",\"_l\",\"semesters\",\"item\",\"key\",\"label\",\"staticStyle\",\"width\",\"data\",\"testRecords\",\"prop\",\"scopedSlots\",\"_u\",\"fn\",\"scope\",\"class\",\"score-pass\",\"row\",\"isPassed\",\"score-fail\",\"_s\",\"score\",\"type\",\"click\",\"$event\",\"viewDetail\",\"hasAppeal\",\"_e\",\"submitAppeal\",\"title\",\"visible\",\"detailDialogVisible\",\"update:visible\",\"currentRecord\",\"itemName\",\"testDate\",\"location\",\"standard\",\"scoreDescription\",\"appealDialogVisible\",\"ref\",\"appealForm\",\"rules\",\"appealRules\",\"label-width\",\"rows\",\"reason\",\"$set\",\"action\",\"on-success\",\"handleUploadSuccess\",\"on-error\",\"handleUploadError\",\"file-list\",\"evidenceFiles\",\"submitAppealForm\",\"staticRenderFns\",\"TestRecordsvue_type_script_lang_js\",\"name\",\"[object Object]\",\"required\",\"message\",\"trigger\",\"min\",\"fetchSemesters\",\"methods\",\"response\",\"$http\",\"get\",\"length\",\"error\",\"$message\",\"params\",\"semester\",\"record\",\"file\",\"fileList\",\"success\",\"$refs\",\"validate\",\"post\",\"id\",\"map\",\"fileUrl\",\"student_TestRecordsvue_type_script_lang_js\",\"componentNormalizer\",\"component\",\"Object\",\"0a4e\",\"e007\",\"exports\"],\"mappings\":\"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\"}","code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-a45ab8d4\"],{\"0179\":function(e,t,s){\"use strict\";s.r(t);var a=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"test-records-container\"},[t(\"el-card\",[t(\"div\",{staticClass:\"card-header\",attrs:{slot:\"header\"},slot:\"header\"},[t(\"span\",[e._v(\"体测成绩记录\")]),t(\"el-select\",{attrs:{placeholder:\"选择学期\",size:\"small\"},on:{change:e.fetchRecords},model:{value:e.selectedSemester,callback:function(t){e.selectedSemester=t},expression:\"selectedSemester\"}},e._l(e.semesters,(function(e){return t(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.testRecords}},[t(\"el-table-column\",{attrs:{prop:\"itemName\",label:\"测试项目\"}}),t(\"el-table-column\",{attrs:{prop:\"testDate\",label:\"测试日期\",width:\"180\"}}),t(\"el-table-column\",{attrs:{prop:\"score\",label:\"成绩\",width:\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"span\",{class:{\"score-pass\":s.row.isPassed,\"score-fail\":!s.row.isPassed}},[e._v(\" \"+e._s(s.row.score)+\" \")])]}}])}),t(\"el-table-column\",{attrs:{prop:\"standard\",label:\"达标要求\",width:\"150\"}}),t(\"el-table-column\",{attrs:{prop:\"status\",label:\"状态\",width:\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"el-tag\",{attrs:{type:s.row.isPassed?\"success\":\"danger\"}},[e._v(\" \"+e._s(s.row.isPassed?\"达标\":\"未达标\")+\" \")])]}}])}),t(\"el-table-column\",{attrs:{label:\"操作\",width:\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(s){return[t(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){return e.viewDetail(s.row)}}},[e._v(\"查看详情\")]),s.row.hasAppeal?e._e():t(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){return e.submitAppeal(s.row)}}},[e._v(\" 成绩申诉 \")])]}}])})],1)],1),t(\"el-dialog\",{attrs:{title:\"成绩详情\",visible:e.detailDialogVisible,width:\"40%\"},on:{\"update:visible\":function(t){e.detailDialogVisible=t}}},[e.currentRecord?t(\"div\",{staticClass:\"detail-content\"},[t(\"div\",{staticClass:\"detail-item\"},[t(\"span\",{staticClass:\"label\"},[e._v(\"测试项目：\")]),t(\"span\",[e._v(e._s(e.currentRecord.itemName))])]),t(\"div\",{staticClass:\"detail-item\"},[t(\"span\",{staticClass:\"label\"},[e._v(\"测试时间：\")]),t(\"span\",[e._v(e._s(e.currentRecord.testDate))])]),t(\"div\",{staticClass:\"detail-item\"},[t(\"span\",{staticClass:\"label\"},[e._v(\"测试地点：\")]),t(\"span\",[e._v(e._s(e.currentRecord.location))])]),t(\"div\",{staticClass:\"detail-item\"},[t(\"span\",{staticClass:\"label\"},[e._v(\"测试成绩：\")]),t(\"span\",{class:{\"score-pass\":e.currentRecord.isPassed,\"score-fail\":!e.currentRecord.isPassed}},[e._v(\" \"+e._s(e.currentRecord.score)+\" \")])]),t(\"div\",{staticClass:\"detail-item\"},[t(\"span\",{staticClass:\"label\"},[e._v(\"评分标准：\")]),t(\"span\",[e._v(e._s(e.currentRecord.standard))])]),t(\"div\",{staticClass:\"detail-item\"},[t(\"span\",{staticClass:\"label\"},[e._v(\"评分说明：\")]),t(\"p\",[e._v(e._s(e.currentRecord.scoreDescription))])])]):e._e()]),t(\"el-dialog\",{attrs:{title:\"成绩申诉\",visible:e.appealDialogVisible,width:\"50%\"},on:{\"update:visible\":function(t){e.appealDialogVisible=t}}},[t(\"el-form\",{ref:\"appealForm\",attrs:{model:e.appealForm,rules:e.appealRules,\"label-width\":\"100px\"}},[t(\"el-form-item\",{attrs:{label:\"申诉理由\",prop:\"reason\"}},[t(\"el-input\",{attrs:{type:\"textarea\",rows:4,placeholder:\"请详细说明申诉理由\"},model:{value:e.appealForm.reason,callback:function(t){e.$set(e.appealForm,\"reason\",t)},expression:\"appealForm.reason\"}})],1),t(\"el-form-item\",{attrs:{label:\"证据材料\",prop:\"evidence\"}},[t(\"el-upload\",{staticClass:\"upload-demo\",attrs:{action:\"/api/upload\",\"on-success\":e.handleUploadSuccess,\"on-error\":e.handleUploadError,\"file-list\":e.appealForm.evidenceFiles}},[t(\"el-button\",{attrs:{size:\"small\",type:\"primary\"}},[e._v(\"上传文件\")]),t(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[e._v(\"可上传图片、视频等证据材料\")])],1)],1)],1),t(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[t(\"el-button\",{on:{click:function(t){e.appealDialogVisible=!1}}},[e._v(\"取消\")]),t(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitAppealForm}},[e._v(\"提交申诉\")])],1)],1)],1)},l=[],r=(s(\"e9f5\"),s(\"ab43\"),{name:\"TestRecords\",data(){return{selectedSemester:\"\",semesters:[],testRecords:[],detailDialogVisible:!1,appealDialogVisible:!1,currentRecord:null,appealForm:{reason:\"\",evidenceFiles:[]},appealRules:{reason:[{required:!0,message:\"请输入申诉理由\",trigger:\"blur\"},{min:10,message:\"申诉理由不能少于10个字\",trigger:\"blur\"}]}}},created(){this.fetchSemesters(),this.fetchRecords()},methods:{async fetchSemesters(){try{const e=await this.$http.get(\"/api/student/semesters\");this.semesters=e.data,this.semesters.length>0&&(this.selectedSemester=this.semesters[0].value)}catch(e){this.$message.error(\"获取学期信息失败\")}},async fetchRecords(){try{const e=await this.$http.get(\"/api/student/test-records\",{params:{semester:this.selectedSemester}});this.testRecords=e.data}catch(e){this.$message.error(\"获取成绩记录失败\")}},viewDetail(e){this.currentRecord=e,this.detailDialogVisible=!0},submitAppeal(e){this.currentRecord=e,this.appealDialogVisible=!0,this.appealForm={reason:\"\",evidenceFiles:[]}},handleUploadSuccess(e,t,s){this.appealForm.evidenceFiles=s,this.$message.success(\"文件上传成功\")},handleUploadError(){this.$message.error(\"文件上传失败\")},async submitAppealForm(){try{await this.$refs.appealForm.validate(),await this.$http.post(`/api/student/test-records/${this.currentRecord.id}/appeal`,{reason:this.appealForm.reason,evidenceFiles:this.appealForm.evidenceFiles.map(e=>e.response.fileUrl)}),this.$message.success(\"申诉提交成功\"),this.appealDialogVisible=!1,this.fetchRecords()}catch(e){e.message&&this.$message.error(e.message)}}}}),i=r,o=(s(\"0a4e\"),s(\"2877\")),c=Object(o[\"a\"])(i,a,l,!1,null,\"0b445f98\",null);t[\"default\"]=c.exports},\"0a4e\":function(e,t,s){\"use strict\";s(\"e007\")},e007:function(e,t,s){}}]);","extractedComments":[]}