(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5008bcf5"],{"096c":function(e,t,a){},2501:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"student-management"},[t("div",{staticClass:"filter-section"},[t("el-form",{attrs:{inline:!0,model:e.filterForm}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"搜索姓名/学号",clearable:""},on:{clear:e.handleSearch},model:{value:e.filterForm.keyword,callback:function(t){e.$set(e.filterForm,"keyword",t)},expression:"filterForm.keyword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),t("el-button",{attrs:{type:"success"},on:{click:e.handleAdd}},[e._v("添加学生")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.students,border:""}},[t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"realName",label:"姓名"}}),t("el-table-column",{attrs:{prop:"studentNumber",label:"学号"}}),t("el-table-column",{attrs:{prop:"className",label:"班级"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),t("el-table-column",{attrs:{prop:"phone",label:"电话"}}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handlePageChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("user-form",{ref:"userForm",attrs:{"user-type":"STUDENT"},on:{saved:e.handleSaved}})],1)],1)},l=[],r=a("82e5"),n={name:"TeacherStudentManagement",components:{UserForm:r["a"]},data(){return{students:[],loading:!1,currentPage:1,pageSize:10,total:0,filterForm:{keyword:""},dialogVisible:!1,dialogTitle:"添加学生",currentUser:null}},methods:{async fetchStudents(){try{this.loading=!0;const e=await this.$axios.get("/api/teacher/students",{params:{pageNum:this.currentPage,pageSize:this.pageSize,keyword:this.filterForm.keyword}});200===e.data.code?(this.students=e.data.data.content,this.total=e.data.data.totalElements):this.$message.error(e.data.msg||"获取学生列表失败")}catch(t){var e;this.$message.error((null===(e=t.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.msg)||t.message||"获取学生列表失败")}finally{this.loading=!1}},handleSearch(){this.currentPage=1,this.fetchStudents()},handlePageChange(e){this.currentPage=e,this.fetchStudents()},handleAdd(){this.dialogTitle="添加学生",this.currentUser=null,this.dialogVisible=!0},handleEdit(e){this.dialogTitle="编辑学生",this.currentUser=e,this.dialogVisible=!0,this.$nextTick(()=>{this.$refs.userForm.setFormData(e)})},async handleDelete(e){try{await this.$confirm("确认删除该学生?","提示",{type:"warning"});const t=await this.$axios.delete("/api/teacher/students/"+e.id);200===t.data.code?(this.$message.success("删除成功"),this.fetchStudents()):this.$message.error(t.data.msg||"删除失败")}catch(t){"cancel"!==t&&this.$message.error("删除失败："+t.message)}},handleSaved(){this.dialogVisible=!1,this.fetchStudents()}},created(){this.fetchStudents()}},i=n,o=(a("2cb7"),a("2877")),c=Object(o["a"])(i,s,l,!1,null,"31cbc6fc",null);t["default"]=c.exports},"2cb7":function(e,t,a){"use strict";a("096c")}}]);
//# sourceMappingURL=chunk-5008bcf5.ce5f1d95.js.map