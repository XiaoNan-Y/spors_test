(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c786940"],{"2a2b":function(t,e,a){"use strict";a("2ce6")},"2ce6":function(t,e,a){},dac2:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"class-stats"},[e("div",{staticClass:"filter-section"},[e("el-form",{attrs:{inline:!0,model:t.filterForm}},[e("el-form-item",{attrs:{label:"班级"}},[e("el-select",{attrs:{placeholder:"选择班级",clearable:""},model:{value:t.filterForm.className,callback:function(e){t.$set(t.filterForm,"className",e)},expression:"filterForm.className"}},t._l(t.classNames,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"测试项目"}},[e("el-select",{attrs:{placeholder:"选择测试项目",clearable:""},model:{value:t.filterForm.sportsItemId,callback:function(e){t.$set(t.filterForm,"sportsItemId",e)},expression:"filterForm.sportsItemId"}},t._l(t.sportsItems,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"状态"}},[e("el-select",{attrs:{placeholder:"选择状态",clearable:""},model:{value:t.filterForm.status,callback:function(e){t.$set(t.filterForm,"status",e)},expression:"filterForm.status"}},[e("el-option",{attrs:{label:"待审核",value:"PENDING"}}),e("el-option",{attrs:{label:"已通过",value:"APPROVED"}}),e("el-option",{attrs:{label:"已驳回",value:"REJECTED"}})],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),e("el-button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.statistics,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"className",label:"班级",align:"center"}}),e("el-table-column",{attrs:{prop:"totalCount",label:"总人数",align:"center"}}),e("el-table-column",{attrs:{prop:"averageScore",label:"平均分",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.averageScore.toFixed(2))+" ")]}}])}),e("el-table-column",{attrs:{label:"优秀率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.calculateRate(e.row.excellentCount,e.row.totalCount))+"% ")]}}])}),e("el-table-column",{attrs:{label:"及格率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.calculateRate(e.row.passCount,e.row.totalCount))+"% ")]}}])})],1)],1)},l=[],o=(a("d9e2"),{name:"ClassStats",data(){return{loading:!1,statistics:[],classNames:[],sportsItems:[],filterForm:{className:"",sportsItemId:"",status:"APPROVED"}}},created(){this.loadClassNames(),this.loadSportsItems(),this.loadStatistics()},methods:{async loadClassNames(){try{const t=await this.$axios.get("/api/teacher/classes");200===t.data.code&&(this.classNames=t.data.data)}catch(t){console.error("获取班级列表失败:",t),this.$message.error("获取班级列表失败")}},async loadSportsItems(){try{const t=await this.$axios.get("/api/teacher/sports-items");200===t.data.code&&(this.sportsItems=t.data.data)}catch(t){console.error("获取体育项目列表失败:",t),this.$message.error("获取体育项目列表失败")}},async loadStatistics(){this.loading=!0;try{const t={className:this.filterForm.className||"",sportsItemId:this.filterForm.sportsItemId||"",status:this.filterForm.status||""};console.log("发送统计查询参数:",t);const e=await this.$axios.get("/api/teacher/statistics/class",{params:t});if(console.log("统计数据原始响应:",e),200!==e.data.code)throw new Error(e.data.message||"获取统计数据失败");this.statistics=e.data.data,console.log("处理后的统计数据:",this.statistics),0===this.statistics.length&&this.$message.warning("没有找到符合条件的统计数据")}catch(e){var t;console.error("获取统计数据失败:",e),this.$message.error("获取统计数据失败: "+((null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)||e.message))}finally{this.loading=!1}},handleSearch(){this.loadStatistics()},handleReset(){this.filterForm={className:"",sportsItemId:"",status:"APPROVED"},this.loadStatistics()},calculateRate(t,e){return e?(t/e*100).toFixed(2):"0.00"}}}),r=o,i=(a("2a2b"),a("2877")),c=Object(i["a"])(r,s,l,!1,null,"52193fee",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-3c786940.8f371996.js.map