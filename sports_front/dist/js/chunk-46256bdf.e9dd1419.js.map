{"version":3,"sources":["webpack:///./src/views/teacher/ScoreAppealReview.vue?5cda","webpack:///./src/views/teacher/ScoreAppealReview.vue","webpack:///src/views/teacher/ScoreAppealReview.vue","webpack:///./src/views/teacher/ScoreAppealReview.vue?7e38","webpack:///./src/views/teacher/ScoreAppealReview.vue?fe8a"],"names":["render","_vm","this","_c","_self","staticClass","attrs","searchForm","model","value","status","callback","$$v","$set","expression","on","searchAppeals","_v","staticStyle","appealList","scopedSlots","_u","key","fn","scope","_s","row","originalScore","expectedScore","formatDateTime","createTime","getStatusTag","getStatusLabel","$event","handleReview","total","pageSize","currentPage","handlePageChange","reviewDialogVisible","reviewForm","currentAppeal","studentName","testItem","reason","reviewComment","slot","submitReview","staticRenderFns","name","data","created","getAppeals","methods","console","log","page","size","response","$axios","get","params","code","content","totalElements","$message","error","message","_error$response","put","id","success","warning","datetime","date","Date","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","tags","labels","component"],"mappings":"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","file":"js/chunk-46256bdf.e9dd1419.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScoreAppealReview.vue?vue&type=style&index=0&id=5c83f780&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"appeal-review\"},[_c('div',{staticClass:\"search-bar\"},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',{attrs:{\"label\":\"处理状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择状态\",\"clearable\":\"\"},model:{value:(_vm.searchForm.status),callback:function ($$v) {_vm.$set(_vm.searchForm, \"status\", $$v)},expression:\"searchForm.status\"}},[_c('el-option',{attrs:{\"label\":\"待处理\",\"value\":\"PENDING\"}}),_c('el-option',{attrs:{\"label\":\"已通过\",\"value\":\"APPROVED\"}}),_c('el-option',{attrs:{\"label\":\"已驳回\",\"value\":\"REJECTED\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchAppeals}},[_vm._v(\"查询\")])],1)],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.appealList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"studentName\",\"label\":\"学生姓名\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"studentNumber\",\"label\":\"学号\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"className\",\"label\":\"班级\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"testItem\",\"label\":\"测试项目\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"label\":\"成绩信息\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(\"原始成绩: \"+_vm._s(scope.row.originalScore))]),_c('div',[_vm._v(\"期望成绩: \"+_vm._s(scope.row.expectedScore))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"reason\",\"label\":\"申诉理由\",\"min-width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"申请时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.formatDateTime(scope.row.createTime))+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm.getStatusTag(scope.row.status)}},[_vm._v(\" \"+_vm._s(_vm.getStatusLabel(scope.row.status))+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":scope.row.status !== 'PENDING'},on:{\"click\":function($event){return _vm.handleReview(scope.row)}}},[_vm._v(\" 审核 \")])]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next\",\"total\":_vm.total,\"page-size\":_vm.pageSize,\"current-page\":_vm.currentPage},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"current-change\":_vm.handlePageChange}})],1),_c('el-dialog',{attrs:{\"title\":\"申诉审核\",\"visible\":_vm.reviewDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.reviewDialogVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.reviewForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"学生姓名\"}},[_c('span',[_vm._v(_vm._s(_vm.currentAppeal ? _vm.currentAppeal.studentName : ''))])]),_c('el-form-item',{attrs:{\"label\":\"测试项目\"}},[_c('span',[_vm._v(_vm._s(_vm.currentAppeal ? _vm.currentAppeal.testItem : ''))])]),_c('el-form-item',{attrs:{\"label\":\"原始成绩\"}},[_c('span',[_vm._v(_vm._s(_vm.currentAppeal ? _vm.currentAppeal.originalScore : ''))])]),_c('el-form-item',{attrs:{\"label\":\"期望成绩\"}},[_c('span',[_vm._v(_vm._s(_vm.currentAppeal ? _vm.currentAppeal.expectedScore : ''))])]),_c('el-form-item',{attrs:{\"label\":\"申诉理由\"}},[_c('div',{staticClass:\"appeal-reason\"},[_vm._v(_vm._s(_vm.currentAppeal ? _vm.currentAppeal.reason : ''))])]),_c('el-form-item',{attrs:{\"label\":\"审核结果\"}},[_c('el-radio-group',{model:{value:(_vm.reviewForm.status),callback:function ($$v) {_vm.$set(_vm.reviewForm, \"status\", $$v)},expression:\"reviewForm.status\"}},[_c('el-radio',{attrs:{\"label\":\"APPROVED\"}},[_vm._v(\"通过\")]),_c('el-radio',{attrs:{\"label\":\"REJECTED\"}},[_vm._v(\"驳回\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"审核意见\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"请输入审核意见\"},model:{value:(_vm.reviewForm.reviewComment),callback:function ($$v) {_vm.$set(_vm.reviewForm, \"reviewComment\", $$v)},expression:\"reviewForm.reviewComment\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.reviewDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitReview}},[_vm._v(\"确定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"appeal-review\">\r\n    <div class=\"search-bar\">\r\n      <el-form :inline=\"true\" :model=\"searchForm\">\r\n        <el-form-item label=\"处理状态\">\r\n          <el-select v-model=\"searchForm.status\" placeholder=\"选择状态\" clearable>\r\n            <el-option label=\"待处理\" value=\"PENDING\"/>\r\n            <el-option label=\"已通过\" value=\"APPROVED\"/>\r\n            <el-option label=\"已驳回\" value=\"REJECTED\"/>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"searchAppeals\">查询</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <el-table :data=\"appealList\" border style=\"width: 100%\">\r\n      <el-table-column prop=\"studentName\" label=\"学生姓名\" width=\"120\"/>\r\n      <el-table-column prop=\"studentNumber\" label=\"学号\" width=\"120\"/>\r\n      <el-table-column prop=\"className\" label=\"班级\" width=\"120\"/>\r\n      <el-table-column prop=\"testItem\" label=\"测试项目\" width=\"120\"/>\r\n      <el-table-column label=\"成绩信息\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          <div>原始成绩: {{ scope.row.originalScore }}</div>\r\n          <div>期望成绩: {{ scope.row.expectedScore }}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"reason\" label=\"申诉理由\" min-width=\"200\"/>\r\n      <el-table-column prop=\"createTime\" label=\"申请时间\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          {{ formatDateTime(scope.row.createTime) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"getStatusTag(scope.row.status)\">\r\n            {{ getStatusLabel(scope.row.status) }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button \r\n            type=\"primary\" \r\n            size=\"small\" \r\n            @click=\"handleReview(scope.row)\"\r\n            :disabled=\"scope.row.status !== 'PENDING'\"\r\n          >\r\n            审核\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"pagination\">\r\n      <el-pagination\r\n        background\r\n        layout=\"total, prev, pager, next\"\r\n        :total=\"total\"\r\n        :page-size=\"pageSize\"\r\n        :current-page.sync=\"currentPage\"\r\n        @current-change=\"handlePageChange\"\r\n      />\r\n    </div>\r\n\r\n    <!-- 审核对话框 -->\r\n    <el-dialog\r\n      title=\"申诉审核\"\r\n      :visible.sync=\"reviewDialogVisible\"\r\n      width=\"50%\"\r\n    >\r\n      <el-form :model=\"reviewForm\" label-width=\"100px\">\r\n        <el-form-item label=\"学生姓名\">\r\n          <span>{{ currentAppeal ? currentAppeal.studentName : '' }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试项目\">\r\n          <span>{{ currentAppeal ? currentAppeal.testItem : '' }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"原始成绩\">\r\n          <span>{{ currentAppeal ? currentAppeal.originalScore : '' }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"期望成绩\">\r\n          <span>{{ currentAppeal ? currentAppeal.expectedScore : '' }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"申诉理由\">\r\n          <div class=\"appeal-reason\">{{ currentAppeal ? currentAppeal.reason : '' }}</div>\r\n        </el-form-item>\r\n        <el-form-item label=\"审核结果\">\r\n          <el-radio-group v-model=\"reviewForm.status\">\r\n            <el-radio label=\"APPROVED\">通过</el-radio>\r\n            <el-radio label=\"REJECTED\">驳回</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"审核意见\">\r\n          <el-input\r\n            v-model=\"reviewForm.reviewComment\"\r\n            type=\"textarea\"\r\n            :rows=\"4\"\r\n            placeholder=\"请输入审核意见\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"reviewDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitReview\">确定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ScoreAppealReview',\r\n  data() {\r\n    return {\r\n      appealList: [],\r\n      total: 0,\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      searchForm: {\r\n        status: ''\r\n      },\r\n      reviewDialogVisible: false,\r\n      currentAppeal: null,\r\n      reviewForm: {\r\n        status: '',\r\n        reviewComment: ''\r\n      }\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.getAppeals()\r\n  },\r\n\r\n  methods: {\r\n    // 获取申诉列表\r\n    async getAppeals() {\r\n      try {\r\n        console.log('正在获取申诉列表，参数:', {\r\n          status: this.searchForm.status,\r\n          page: this.currentPage - 1,\r\n          size: this.pageSize\r\n        })\r\n        \r\n        // 修改请求路径，确保与后端匹配\r\n        const response = await this.$axios.get('/api/teacher/score-appeals', {\r\n          params: {\r\n            status: this.searchForm.status || null,  // 如果为空字符串，则传null\r\n            page: this.currentPage - 1,\r\n            size: this.pageSize\r\n          }\r\n        })\r\n\r\n        console.log('API响应数据:', response.data)\r\n\r\n        if (response.data.code === 200) {\r\n          const { content, totalElements } = response.data.data\r\n          this.appealList = content || []\r\n          this.total = totalElements || 0\r\n          console.log('处理后的申诉列表:', this.appealList)\r\n        } else {\r\n          this.$message.error(response.data.message || '获取数据失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('获取申诉列表失败:', error)\r\n        this.$message.error('获取申诉列表失败: ' + (error.response?.data?.message || error.message))\r\n      }\r\n    },\r\n\r\n    // 搜索\r\n    searchAppeals() {\r\n      this.currentPage = 1\r\n      this.getAppeals()\r\n    },\r\n\r\n    // 处理审核\r\n    handleReview(row) {\r\n      this.currentAppeal = row\r\n      this.reviewForm = {\r\n        status: '',\r\n        reviewComment: ''\r\n      }\r\n      this.reviewDialogVisible = true\r\n    },\r\n\r\n    // 提交审核\r\n    async submitReview() {\r\n      if (!this.reviewForm.status) {\r\n        this.$message.warning('请选择审核结果')\r\n        return\r\n      }\r\n\r\n      try {\r\n        const response = await this.$axios.put(\r\n          `/api/teacher/score-appeals/${this.currentAppeal.id}/review`,\r\n          {\r\n            status: this.reviewForm.status,\r\n            reviewComment: this.reviewForm.reviewComment,\r\n            expectedScore: this.currentAppeal.expectedScore\r\n          }\r\n        )\r\n\r\n        if (response.data.code === 200) {\r\n          this.$message.success('审核成功')\r\n          this.reviewDialogVisible = false\r\n          this.getAppeals()\r\n        } else {\r\n          this.$message.error(response.data.message || '审核失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('审核失败:', error)\r\n        this.$message.error('审核失败')\r\n      }\r\n    },\r\n\r\n    // 页码改变\r\n    handlePageChange(page) {\r\n      this.currentPage = page\r\n      this.getAppeals()\r\n    },\r\n\r\n    // 格式化日期时间\r\n    formatDateTime(datetime) {\r\n      if (!datetime) return ''\r\n      const date = new Date(datetime)\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\r\n    },\r\n\r\n    // 获取状态标签类型\r\n    getStatusTag(status) {\r\n      const tags = {\r\n        'PENDING': 'warning',\r\n        'APPROVED': 'success',\r\n        'REJECTED': 'danger'\r\n      }\r\n      return tags[status] || ''\r\n    },\r\n\r\n    // 获取状态标签文本\r\n    getStatusLabel(status) {\r\n      const labels = {\r\n        'PENDING': '待处理',\r\n        'APPROVED': '已通过',\r\n        'REJECTED': '已驳回'\r\n      }\r\n      return labels[status] || status\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.appeal-review {\r\n  padding: 20px;\r\n}\r\n\r\n.search-bar {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n\r\n.appeal-reason {\r\n  padding: 10px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n  min-height: 60px;\r\n}\r\n\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScoreAppealReview.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScoreAppealReview.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ScoreAppealReview.vue?vue&type=template&id=5c83f780&scoped=true\"\nimport script from \"./ScoreAppealReview.vue?vue&type=script&lang=js\"\nexport * from \"./ScoreAppealReview.vue?vue&type=script&lang=js\"\nimport style0 from \"./ScoreAppealReview.vue?vue&type=style&index=0&id=5c83f780&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c83f780\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}