{"version":3,"sources":["webpack:///./src/views/admin/ExemptionReview.vue","webpack:///src/views/admin/ExemptionReview.vue","webpack:///./src/views/admin/ExemptionReview.vue?fddd","webpack:///./src/views/admin/ExemptionReview.vue?3f54","webpack:///./src/views/admin/ExemptionReview.vue?6d91"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","fixStudentNames","model","value","filters","type","callback","$$v","$set","expression","status","nativeOn","$event","indexOf","_k","keyCode","key","handleSearch","apply","arguments","keyword","resetFilters","directives","name","rawName","loading","staticStyle","records","scopedSlots","_u","fn","scope","_s","row","getStatusType","getStatusText","formatDateTime","applyTime","createdAt","handleReview","_e","handleModify","currentPage","pageSize","total","handleSizeChange","handleCurrentChange","reviewDialog","visible","ref","reviewForm","adminReviewComment","slot","submitReview","modifyDialog","modifyForm","submitModify","staticRenderFns","data","undefined","currentRecord","created","fetchRecords","methods","params","page","size","console","log","response","$http","get","statusText","headers","code","content","totalElements","$message","error","msg","types","PENDING_TEACHER","PENDING_ADMIN","APPROVED","REJECTED","REJECTED_TEACHER","texts","datetime","Date","toLocaleString","val","put","id","adminReviewTime","toISOString","success","warning","post","component"],"mappings":"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","file":"js/chunk-61645b83.adfb4cc6.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"exemption-review\"},[_c('div',{staticClass:\"header\"},[_c('h2',[_vm._v(\"免测/重测申请审核\")]),_c('div',{staticClass:\"actions\"},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.fixStudentNames}},[_c('i',{staticClass:\"el-icon-refresh\"}),_vm._v(\" 修复学生信息 \")])],1)]),_c('div',{staticClass:\"filters\"},[_c('el-form',{staticClass:\"filter-form\",attrs:{\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"申请类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择申请类型\",\"clearable\":\"\"},model:{value:(_vm.filters.type),callback:function ($$v) {_vm.$set(_vm.filters, \"type\", $$v)},expression:\"filters.type\"}},[_c('el-option',{attrs:{\"label\":\"免测\",\"value\":\"EXEMPTION\"}}),_c('el-option',{attrs:{\"label\":\"重测\",\"value\":\"RETEST\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择状态\",\"clearable\":\"\"},model:{value:(_vm.filters.status),callback:function ($$v) {_vm.$set(_vm.filters, \"status\", $$v)},expression:\"filters.status\"}},[_c('el-option',{attrs:{\"label\":\"待教师审核\",\"value\":\"PENDING_TEACHER\"}}),_c('el-option',{attrs:{\"label\":\"待管理员审核\",\"value\":\"PENDING_ADMIN\"}}),_c('el-option',{attrs:{\"label\":\"已通过\",\"value\":\"APPROVED\"}}),_c('el-option',{attrs:{\"label\":\"教师已驳回\",\"value\":\"REJECTED_TEACHER\"}}),_c('el-option',{attrs:{\"label\":\"已驳回\",\"value\":\"REJECTED\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"关键字\"}},[_c('el-input',{attrs:{\"placeholder\":\"学号/姓名\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleSearch.apply(null, arguments)}},model:{value:(_vm.filters.keyword),callback:function ($$v) {_vm.$set(_vm.filters, \"keyword\", $$v)},expression:\"filters.keyword\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSearch}},[_vm._v(\"查询\")]),_c('el-button',{on:{\"click\":_vm.resetFilters}},[_vm._v(\"重置\")])],1)],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.records,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"序号\",\"type\":\"index\",\"width\":\"50\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"studentNumber\",\"label\":\"学号\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"studentName\",\"label\":\"姓名\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"className\",\"label\":\"班级\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"申请类型\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.type === 'EXEMPTION' ? '免测' : '重测')+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"reason\",\"label\":\"申请原因\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm.getStatusType(scope.row.status)}},[_vm._v(\" \"+_vm._s(_vm.getStatusText(scope.row.status))+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"teacherReviewComment\",\"label\":\"教师审核意见\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"adminReviewComment\",\"label\":\"管理员审核意见\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"createdAt\",\"label\":\"申请时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.formatDateTime(scope.row.applyTime || scope.row.createdAt))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status === 'PENDING_ADMIN')?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleReview(scope.row)}}},[_vm._v(\"审核\")]):_vm._e(),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm.handleModify(scope.row)}}},[_vm._v(\"修改\")])]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1),_c('el-dialog',{attrs:{\"title\":\"审核申请\",\"visible\":_vm.reviewDialog.visible,\"width\":\"500px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.reviewDialog, \"visible\", $event)}}},[_c('el-form',{ref:\"reviewForm\",attrs:{\"model\":_vm.reviewForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"审核结果\",\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.reviewForm.status),callback:function ($$v) {_vm.$set(_vm.reviewForm, \"status\", $$v)},expression:\"reviewForm.status\"}},[_c('el-radio',{attrs:{\"label\":\"APPROVED\"}},[_vm._v(\"通过\")]),_c('el-radio',{attrs:{\"label\":\"REJECTED\"}},[_vm._v(\"驳回\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"审核意见\",\"prop\":\"adminReviewComment\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"请输入审核意见\"},model:{value:(_vm.reviewForm.adminReviewComment),callback:function ($$v) {_vm.$set(_vm.reviewForm, \"adminReviewComment\", $$v)},expression:\"reviewForm.adminReviewComment\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.reviewDialog.visible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitReview}},[_vm._v(\"确定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改审核状态\",\"visible\":_vm.modifyDialog.visible,\"width\":\"500px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.modifyDialog, \"visible\", $event)}}},[_c('el-form',{ref:\"modifyForm\",attrs:{\"model\":_vm.modifyForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"审核状态\",\"prop\":\"status\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择状态\"},model:{value:(_vm.modifyForm.status),callback:function ($$v) {_vm.$set(_vm.modifyForm, \"status\", $$v)},expression:\"modifyForm.status\"}},[_c('el-option',{attrs:{\"label\":\"待教师审核\",\"value\":\"PENDING_TEACHER\"}}),_c('el-option',{attrs:{\"label\":\"待管理员审核\",\"value\":\"PENDING_ADMIN\"}}),_c('el-option',{attrs:{\"label\":\"已通过\",\"value\":\"APPROVED\"}}),_c('el-option',{attrs:{\"label\":\"教师已驳回\",\"value\":\"REJECTED_TEACHER\"}}),_c('el-option',{attrs:{\"label\":\"已驳回\",\"value\":\"REJECTED\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"审核意见\",\"prop\":\"adminReviewComment\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"请输入审核意见\"},model:{value:(_vm.modifyForm.adminReviewComment),callback:function ($$v) {_vm.$set(_vm.modifyForm, \"adminReviewComment\", $$v)},expression:\"modifyForm.adminReviewComment\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.modifyDialog.visible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitModify}},[_vm._v(\"确定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"exemption-review\">\n    <div class=\"header\">\n      <h2>免测/重测申请审核</h2>\n      <div class=\"actions\">\n        <el-button type=\"warning\" @click=\"fixStudentNames\">\n          <i class=\"el-icon-refresh\"></i> 修复学生信息\n        </el-button>\n      </div>\n    </div>\n\n    <div class=\"filters\">\n      <el-form :inline=\"true\" class=\"filter-form\">\n        <el-form-item label=\"申请类型\">\n          <el-select v-model=\"filters.type\" placeholder=\"选择申请类型\" clearable>\n            <el-option label=\"免测\" value=\"EXEMPTION\" />\n            <el-option label=\"重测\" value=\"RETEST\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"状态\">\n          <el-select v-model=\"filters.status\" placeholder=\"选择状态\" clearable>\n            <el-option label=\"待教师审核\" value=\"PENDING_TEACHER\" />\n            <el-option label=\"待管理员审核\" value=\"PENDING_ADMIN\" />\n            <el-option label=\"已通过\" value=\"APPROVED\" />\n            <el-option label=\"教师已驳回\" value=\"REJECTED_TEACHER\" />\n            <el-option label=\"已驳回\" value=\"REJECTED\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"关键字\">\n          <el-input\n            v-model=\"filters.keyword\"\n            placeholder=\"学号/姓名\"\n            clearable\n            @keyup.enter.native=\"handleSearch\"\n          />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\n          <el-button @click=\"resetFilters\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <el-table\n      v-loading=\"loading\"\n      :data=\"records\"\n      border\n      style=\"width: 100%\"\n    >\n      <el-table-column label=\"序号\" type=\"index\" width=\"50\" align=\"center\" />\n      <el-table-column prop=\"studentNumber\" label=\"学号\" width=\"120\" />\n      <el-table-column prop=\"studentName\" label=\"姓名\" width=\"120\" />\n      <el-table-column prop=\"className\" label=\"班级\" width=\"120\" />\n      <el-table-column prop=\"type\" label=\"申请类型\" width=\"100\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.type === 'EXEMPTION' ? '免测' : '重测' }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"reason\" label=\"申请原因\" show-overflow-tooltip />\n      <el-table-column prop=\"status\" label=\"状态\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"getStatusType(scope.row.status)\">\n            {{ getStatusText(scope.row.status) }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"teacherReviewComment\" label=\"教师审核意见\" show-overflow-tooltip />\n      <el-table-column prop=\"adminReviewComment\" label=\"管理员审核意见\" show-overflow-tooltip />\n      <el-table-column prop=\"createdAt\" label=\"申请时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ formatDateTime(scope.row.applyTime || scope.row.createdAt) }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"primary\"\n            @click=\"handleReview(scope.row)\"\n            v-if=\"scope.row.status === 'PENDING_ADMIN'\"\n          >审核</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"warning\"\n            @click=\"handleModify(scope.row)\"\n          >修改</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"pagination-container\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"currentPage\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\">\n      </el-pagination>\n    </div>\n\n    <!-- 审核对话框 -->\n    <el-dialog\n      title=\"审核申请\"\n      :visible.sync=\"reviewDialog.visible\"\n      width=\"500px\"\n    >\n      <el-form :model=\"reviewForm\" ref=\"reviewForm\" label-width=\"100px\">\n        <el-form-item label=\"审核结果\" prop=\"status\">\n          <el-radio-group v-model=\"reviewForm.status\">\n            <el-radio label=\"APPROVED\">通过</el-radio>\n            <el-radio label=\"REJECTED\">驳回</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"审核意见\" prop=\"adminReviewComment\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"reviewForm.adminReviewComment\"\n            :rows=\"4\"\n            placeholder=\"请输入审核意见\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"reviewDialog.visible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitReview\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 修改对话框 -->\n    <el-dialog\n      title=\"修改审核状态\"\n      :visible.sync=\"modifyDialog.visible\"\n      width=\"500px\"\n    >\n      <el-form :model=\"modifyForm\" ref=\"modifyForm\" label-width=\"100px\">\n        <el-form-item label=\"审核状态\" prop=\"status\">\n          <el-select v-model=\"modifyForm.status\" placeholder=\"选择状态\">\n            <el-option label=\"待教师审核\" value=\"PENDING_TEACHER\" />\n            <el-option label=\"待管理员审核\" value=\"PENDING_ADMIN\" />\n            <el-option label=\"已通过\" value=\"APPROVED\" />\n            <el-option label=\"教师已驳回\" value=\"REJECTED_TEACHER\" />\n            <el-option label=\"已驳回\" value=\"REJECTED\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"审核意见\" prop=\"adminReviewComment\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"modifyForm.adminReviewComment\"\n            :rows=\"4\"\n            placeholder=\"请输入审核意见\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"modifyDialog.visible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitModify\">确定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ExemptionReview',\n  data() {\n    return {\n      loading: false,\n      records: [],\n      total: 0,\n      currentPage: 1,\n      pageSize: 10,\n      filters: {\n        type: undefined,\n        status: undefined,\n        keyword: ''\n      },\n      reviewDialog: {\n        visible: false\n      },\n      reviewForm: {\n        status: '',\n        adminReviewComment: ''\n      },\n      currentRecord: null,\n      modifyDialog: {\n        visible: false\n      },\n      modifyForm: {\n        status: '',\n        adminReviewComment: ''\n      }\n    }\n  },\n  created() {\n    this.fetchRecords()\n  },\n  methods: {\n    async fetchRecords() {\n      this.loading = true\n      try {\n        const params = {\n          type: this.filters.type,\n          status: this.filters.status,\n          keyword: this.filters.keyword,\n          page: this.currentPage - 1,\n          size: this.pageSize\n        }\n        console.log('Request params:', params)\n\n        const response = await this.$http.get('/api/exemptions', { params })\n        \n        console.log('API Response:', {\n          status: response.status,\n          statusText: response.statusText,\n          headers: response.headers,\n          data: response.data\n        })\n        \n        if (response.data.code === 200) {\n          const { content, totalElements } = response.data.data || {}\n          this.records = content || []\n          this.total = totalElements || 0\n          \n          console.log('Loaded records:', this.records)\n          console.log('Total elements:', this.total)\n        } else {\n          this.$message.error(response.data.msg || '获取数据失败')\n          console.error('API error:', response.data)\n        }\n      } catch (error) {\n        console.error('获取记录失败:', error)\n        this.$message.error('获取记录失败')\n      } finally {\n        this.loading = false\n      }\n    },\n    handleSearch() {\n      this.currentPage = 1\n      this.fetchRecords()\n    },\n    resetFilters() {\n      this.filters = {\n        type: undefined,\n        status: undefined,\n        keyword: ''\n      }\n      this.handleSearch()\n    },\n    getStatusType(status) {\n      const types = {\n        PENDING_TEACHER: 'warning',\n        PENDING_ADMIN: 'warning',\n        APPROVED: 'success',\n        REJECTED: 'danger',\n        REJECTED_TEACHER: 'danger'\n      }\n      return types[status] || 'info'\n    },\n    getStatusText(status) {\n      const texts = {\n        PENDING_TEACHER: '待教师审核',\n        PENDING_ADMIN: '待管理员审核',\n        APPROVED: '已通过',\n        REJECTED: '已驳回',\n        REJECTED_TEACHER: '教师已驳回'\n      }\n      return texts[status] || status\n    },\n    formatDateTime(datetime) {\n      if (!datetime) return ''\n      return new Date(datetime).toLocaleString()\n    },\n    handleSizeChange(val) {\n      this.pageSize = val\n      this.fetchRecords()\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.fetchRecords()\n    },\n    handleReview(row) {\n      this.currentRecord = row\n      this.reviewForm = {\n        status: '',\n        adminReviewComment: ''\n      }\n      this.reviewDialog.visible = true\n    },\n    async submitReview() {\n      if (!this.reviewForm.status) {\n        this.$message.warning('请选择审核结果')\n        return\n      }\n      \n      try {\n        const response = await this.$http.put(\n          `/api/exemptions/${this.currentRecord.id}/review`,\n          {\n            status: this.reviewForm.status,\n            adminReviewComment: this.reviewForm.adminReviewComment,\n            adminReviewTime: new Date().toISOString()\n          }\n        )\n        \n        if (response.data.code === 200) {\n          this.$message.success('审核成功')\n          this.reviewDialog.visible = false\n          this.fetchRecords()\n        } else {\n          this.$message.error(response.data.msg || '审核失败')\n        }\n      } catch (error) {\n        console.error('审核失败:', error)\n        this.$message.error('审核失败')\n      }\n    },\n    async fixStudentNames() {\n      try {\n        const response = await this.$http.post('/api/data-fix/fix-exemption-names')\n        if (response.data.code === 200) {\n          this.$message.success(response.data.data || '修复成功')\n          // 重新加载数据\n          this.fetchRecords()\n        } else {\n          this.$message.error(response.data.msg || '修复失败')\n        }\n      } catch (error) {\n        console.error('修复失败:', error)\n        this.$message.error('修复失败')\n      }\n    },\n    handleModify(row) {\n      this.currentRecord = row\n      this.modifyForm = {\n        status: row.status,\n        adminReviewComment: row.adminReviewComment || ''\n      }\n      this.modifyDialog.visible = true\n    },\n    async submitModify() {\n      try {\n        const response = await this.$http.put(\n          `/api/exemptions/${this.currentRecord.id}/modify`,\n          {\n            status: this.modifyForm.status,\n            adminReviewComment: this.modifyForm.adminReviewComment\n          }\n        )\n        \n        if (response.data.code === 200) {\n          this.$message.success('修改成功')\n          this.modifyDialog.visible = false\n          this.fetchRecords()\n        } else {\n          this.$message.error(response.data.msg || '修改失败')\n        }\n      } catch (error) {\n        console.error('修改失败:', error)\n        this.$message.error('修改失败')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.exemption-review {\n  padding: 20px;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.actions {\n  display: flex;\n  gap: 10px;\n}\n\n.filters {\n  margin-bottom: 20px;\n}\n\n.pagination-container {\n  margin-top: 20px;\n  text-align: right;\n}\n</style> ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExemptionReview.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExemptionReview.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ExemptionReview.vue?vue&type=template&id=385ea296&scoped=true\"\nimport script from \"./ExemptionReview.vue?vue&type=script&lang=js\"\nexport * from \"./ExemptionReview.vue?vue&type=script&lang=js\"\nimport style0 from \"./ExemptionReview.vue?vue&type=style&index=0&id=385ea296&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"385ea296\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExemptionReview.vue?vue&type=style&index=0&id=385ea296&prod&scoped=true&lang=css\""],"sourceRoot":""}