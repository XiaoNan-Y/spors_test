{"version":3,"sources":["webpack:///./src/views/profile/index.vue?19ff","webpack:///./src/views/profile/index.vue","webpack:///./src/api/user.js","webpack:///src/views/profile/index.vue","webpack:///./src/views/profile/index.vue?bd44","webpack:///./src/views/profile/index.vue?884d"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","ref","userInfo","model","value","username","callback","$$v","$set","expression","realName","email","phone","on","updateProfile","passwordForm","oldPassword","newPassword","confirmPassword","changePassword","staticRenderFns","getUserInfo","request","url","method","updateUserInfo","data","name","created","fetchUserInfo","methods","error","console","$message","success","message","component"],"mappings":"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","file":"js/chunk-13199d7f.9296db52.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1b2cd82a&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app-container\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"个人信息\")])]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.userInfo,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userInfo.username),callback:function ($$v) {_vm.$set(_vm.userInfo, \"username\", $$v)},expression:\"userInfo.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"真实姓名\"}},[_c('el-input',{model:{value:(_vm.userInfo.realName),callback:function ($$v) {_vm.$set(_vm.userInfo, \"realName\", $$v)},expression:\"userInfo.realName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\"}},[_c('el-input',{model:{value:(_vm.userInfo.email),callback:function ($$v) {_vm.$set(_vm.userInfo, \"email\", $$v)},expression:\"userInfo.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机号\"}},[_c('el-input',{model:{value:(_vm.userInfo.phone),callback:function ($$v) {_vm.$set(_vm.userInfo, \"phone\", $$v)},expression:\"userInfo.phone\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateProfile}},[_vm._v(\"保存修改\")])],1)],1),_c('el-divider'),_c('div',{staticClass:\"password-section\"},[_c('h3',[_vm._v(\"修改密码\")]),_c('el-form',{ref:\"passwordForm\",attrs:{\"model\":_vm.passwordForm,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"原密码\",\"prop\":\"oldPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.passwordForm.oldPassword),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"oldPassword\", $$v)},expression:\"passwordForm.oldPassword\"}})],1),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.passwordForm.newPassword),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"newPassword\", $$v)},expression:\"passwordForm.newPassword\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认新密码\",\"prop\":\"confirmPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.passwordForm.confirmPassword),callback:function ($$v) {_vm.$set(_vm.passwordForm, \"confirmPassword\", $$v)},expression:\"passwordForm.confirmPassword\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.changePassword}},[_vm._v(\"修改密码\")])],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n// 获取用户信息\r\nexport function getUserInfo() {\r\n  return request({\r\n    url: '/api/users/profile',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 更新用户信息\r\nexport function updateUserInfo(data) {\r\n  return request({\r\n    url: '/api/users/profile',\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\n// 修改密码\r\nexport function changePassword(data) {\r\n  return request({\r\n    url: '/api/users/change-password',\r\n    method: 'put',\r\n    data: {\r\n      oldPassword: data.oldPassword,\r\n      newPassword: data.newPassword\r\n    }\r\n  })\r\n} ","<template>\r\n  <div class=\"app-container\">\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>个人信息</span>\r\n      </div>\r\n      \r\n      <el-form ref=\"form\" :model=\"userInfo\" label-width=\"120px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"userInfo.username\" disabled></el-input>\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"真实姓名\">\r\n          <el-input v-model=\"userInfo.realName\"></el-input>\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"邮箱\">\r\n          <el-input v-model=\"userInfo.email\"></el-input>\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"手机号\">\r\n          <el-input v-model=\"userInfo.phone\"></el-input>\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"updateProfile\">保存修改</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      \r\n      <el-divider></el-divider>\r\n      \r\n      <div class=\"password-section\">\r\n        <h3>修改密码</h3>\r\n        <el-form ref=\"passwordForm\" :model=\"passwordForm\" label-width=\"120px\">\r\n          <el-form-item label=\"原密码\" prop=\"oldPassword\">\r\n            <el-input v-model=\"passwordForm.oldPassword\" type=\"password\"></el-input>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n            <el-input v-model=\"passwordForm.newPassword\" type=\"password\"></el-input>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"确认新密码\" prop=\"confirmPassword\">\r\n            <el-input v-model=\"passwordForm.confirmPassword\" type=\"password\"></el-input>\r\n          </el-form-item>\r\n          \r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"changePassword\">修改密码</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getUserInfo, updateUserInfo, changePassword } from '@/api/user'\r\n\r\nexport default {\r\n  name: 'Profile',\r\n  data() {\r\n    return {\r\n      userInfo: {\r\n        username: '',\r\n        realName: '',\r\n        email: '',\r\n        phone: ''\r\n      },\r\n      passwordForm: {\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchUserInfo()\r\n  },\r\n  methods: {\r\n    async fetchUserInfo() {\r\n      try {\r\n        const { data } = await getUserInfo()\r\n        this.userInfo = data\r\n      } catch (error) {\r\n        console.error('获取用户信息失败:', error)\r\n      }\r\n    },\r\n    async updateProfile() {\r\n      try {\r\n        await updateUserInfo(this.userInfo)\r\n        this.$message.success('个人信息更新成功')\r\n      } catch (error) {\r\n        this.$message.error('更新失败：' + error.message)\r\n      }\r\n    },\r\n    async changePassword() {\r\n      if (this.passwordForm.newPassword !== this.passwordForm.confirmPassword) {\r\n        this.$message.error('两次输入的新密码不一致')\r\n        return\r\n      }\r\n      \r\n      try {\r\n        await changePassword({\r\n          oldPassword: this.passwordForm.oldPassword,\r\n          newPassword: this.passwordForm.newPassword\r\n        })\r\n        this.$message.success('密码修改成功')\r\n        this.passwordForm = {\r\n          oldPassword: '',\r\n          newPassword: '',\r\n          confirmPassword: ''\r\n        }\r\n      } catch (error) {\r\n        this.$message.error('密码修改失败：' + error.message)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.password-section {\r\n  margin-top: 20px;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1b2cd82a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1b2cd82a&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b2cd82a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}