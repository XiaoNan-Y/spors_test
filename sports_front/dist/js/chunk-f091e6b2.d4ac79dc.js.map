{"version":3,"sources":["webpack:///./src/views/admin/ExemptionReview.vue?95ce","webpack:///./src/views/admin/ExemptionReview.vue","webpack:///./src/api/exemption.js","webpack:///src/views/admin/ExemptionReview.vue","webpack:///./src/views/admin/ExemptionReview.vue?fddd","webpack:///./src/views/admin/ExemptionReview.vue?3f54"],"names":["render","_vm$currentRecord","_vm$currentRecord2","_vm$currentRecord3","_vm$currentRecord4","_vm$currentRecord5","_vm$currentRecord6","_vm","this","_c","_self","staticClass","ref","attrs","queryParams","model","value","type","callback","$$v","$set","expression","status","className","_l","classList","key","keyword","on","handleQuery","_v","resetQuery","directives","name","rawName","loading","staticStyle","tableData","scopedSlots","_u","fn","scope","row","_s","reason","getStatusType","getStatusText","teacherReviewComment","formatDateTime","teacherReviewTime","adminReviewComment","adminReviewTime","canReview","$event","handleReview","_e","handleDetail","pageNum","pageSize","total","handleSizeChange","handleCurrentChange","reviewDialog","title","visible","currentRecord","studentName","studentNumber","reviewForm","reviewRules","isTeacher","comment","slot","submitReview","detailDialog","student","realName","applyTime","staticRenderFns","teacherReview","data","request","url","method","adminReview","userType","localStorage","getItem","id","required","message","trigger","computed","created","getList","getClassList","methods","console","log","res","$http","get","params","code","content","totalElements","$message","error","val","statusMap","$refs","validate","valid","reviewFunc","success","msg","datetime","date","Date","toLocaleString","year","month","day","hour","minute","second","hour12","component"],"mappings":"2IAAA,W,2CCAA,IAAIA,EAAS,WAAiB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAKC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,UAAU,CAACG,IAAI,YAAYC,MAAM,CAAC,QAAS,EAAK,MAAQN,EAAIO,cAAc,CAACL,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,YAAY,CAACI,MAAM,CAAC,YAAc,SAAS,UAAY,IAAIE,MAAM,CAACC,MAAOT,EAAIO,YAAYG,KAAMC,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,YAAa,OAAQK,IAAME,WAAW,qBAAqB,CAACZ,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,OAAO,MAAQ,eAAeJ,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,OAAO,MAAQ,aAAa,IAAI,GAAGJ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,YAAY,CAACI,MAAM,CAAC,YAAc,OAAO,UAAY,IAAIE,MAAM,CAACC,MAAOT,EAAIO,YAAYQ,OAAQJ,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,YAAa,SAAUK,IAAME,WAAW,uBAAuB,CAACZ,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,MAAM,MAAQ,aAAaJ,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,MAAM,MAAQ,cAAcJ,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,MAAM,MAAQ,eAAe,IAAI,GAAGJ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,YAAY,CAACI,MAAM,CAAC,YAAc,OAAO,UAAY,IAAIE,MAAM,CAACC,MAAOT,EAAIO,YAAYS,UAAWL,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,YAAa,YAAaK,IAAME,WAAW,0BAA0Bd,EAAIiB,GAAIjB,EAAIkB,WAAW,SAASF,GAAW,OAAOd,EAAG,YAAY,CAACiB,IAAIH,EAAUV,MAAM,CAAC,MAAQU,EAAU,MAAQA,QAAe,IAAI,GAAGd,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,YAAc,UAAU,UAAY,IAAIE,MAAM,CAACC,MAAOT,EAAIO,YAAYa,QAAST,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,YAAa,UAAWK,IAAME,WAAW,0BAA0B,GAAGZ,EAAG,eAAe,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWe,GAAG,CAAC,MAAQrB,EAAIsB,cAAc,CAACtB,EAAIuB,GAAG,QAAQrB,EAAG,YAAY,CAACmB,GAAG,CAAC,MAAQrB,EAAIwB,aAAa,CAACxB,EAAIuB,GAAG,SAAS,IAAI,IAAI,GAAGrB,EAAG,WAAW,CAACuB,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYlB,MAAOT,EAAI4B,QAASd,WAAW,YAAYe,YAAY,CAAC,MAAQ,QAAQvB,MAAM,CAAC,KAAON,EAAI8B,UAAU,OAAS,GAAG,OAAS,KAAK,CAAC5B,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,QAAQ,MAAQ,KAAK,MAAQ,KAAK,MAAQ,YAAYJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,cAAc,YAAY,MAAM,MAAQ,YAAYJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,KAAK,KAAO,gBAAgB,YAAY,MAAM,MAAQ,YAAYJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,KAAK,KAAO,YAAY,YAAY,MAAM,MAAQ,YAAYJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,OAAO,MAAQ,SAAS,MAAQ,OAAOyB,YAAY/B,EAAIgC,GAAG,CAAC,CAACb,IAAI,UAAUc,GAAG,SAASC,GAAO,MAAO,CAAChC,EAAG,SAAS,CAACI,MAAM,CAAC,KAA0B,cAAnB4B,EAAMC,IAAIzB,KAAuB,UAAY,SAAS,CAACV,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAsB,cAAnBF,EAAMC,IAAIzB,KAAuB,KAAO,MAAM,cAAcR,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,YAAY,MAAM,MAAQ,UAAUyB,YAAY/B,EAAIgC,GAAG,CAAC,CAACb,IAAI,UAAUc,GAAG,SAASC,GAAO,MAAO,CAAChC,EAAG,aAAa,CAACI,MAAM,CAAC,QAAU4B,EAAMC,IAAIE,OAAO,UAAY,QAAQ,CAACnC,EAAG,OAAO,CAACE,YAAY,eAAe,CAACJ,EAAIuB,GAAGvB,EAAIoC,GAAGF,EAAMC,IAAIE,oBAAoBnC,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,KAAK,KAAO,SAAS,MAAQ,SAAS,MAAQ,OAAOyB,YAAY/B,EAAIgC,GAAG,CAAC,CAACb,IAAI,UAAUc,GAAG,SAASC,GAAO,MAAO,CAAChC,EAAG,SAAS,CAACI,MAAM,CAAC,KAAON,EAAIsC,cAAcJ,EAAMC,IAAIpB,UAAU,CAACf,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAIuC,cAAcL,EAAMC,IAAIpB,SAAS,cAAcb,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,SAAS,KAAO,uBAAuB,YAAY,MAAM,MAAQ,SAAS,wBAAwB,IAAIyB,YAAY/B,EAAIgC,GAAG,CAAC,CAACb,IAAI,UAAUc,GAAG,SAASC,GAAO,MAAO,CAAEA,EAAMC,IAAIK,qBAAsB,CAACtC,EAAG,aAAa,CAACI,MAAM,CAAC,QAAU4B,EAAMC,IAAIK,qBAAqB,UAAY,QAAQ,CAACtC,EAAG,MAAM,CAACF,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGF,EAAMC,IAAIK,sBAAsB,KAAKtC,EAAG,MAAM,CAACE,YAAY,eAAe,CAACJ,EAAIuB,GAAGvB,EAAIoC,GAAGpC,EAAIyC,eAAeP,EAAMC,IAAIO,4BAA4BxC,EAAG,OAAO,CAACF,EAAIuB,GAAG,cAAcrB,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,UAAU,KAAO,qBAAqB,YAAY,MAAM,MAAQ,SAAS,wBAAwB,IAAIyB,YAAY/B,EAAIgC,GAAG,CAAC,CAACb,IAAI,UAAUc,GAAG,SAASC,GAAO,MAAO,CAAEA,EAAMC,IAAIQ,mBAAoB,CAACzC,EAAG,aAAa,CAACI,MAAM,CAAC,QAAU4B,EAAMC,IAAIQ,mBAAmB,UAAY,QAAQ,CAACzC,EAAG,MAAM,CAACF,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGF,EAAMC,IAAIQ,oBAAoB,KAAKzC,EAAG,MAAM,CAACE,YAAY,eAAe,CAACJ,EAAIuB,GAAGvB,EAAIoC,GAAGpC,EAAIyC,eAAeP,EAAMC,IAAIS,0BAA0B1C,EAAG,OAAO,CAACF,EAAIuB,GAAG,cAAcrB,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,KAAK,MAAQ,SAAS,MAAQ,OAAOyB,YAAY/B,EAAIgC,GAAG,CAAC,CAACb,IAAI,UAAUc,GAAG,SAASC,GAAO,MAAO,CAAElC,EAAI6C,UAAUX,EAAMC,KAAMjC,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,WAAWe,GAAG,CAAC,MAAQ,SAASyB,GAAQ,OAAO9C,EAAI+C,aAAab,EAAMC,QAAQ,CAACnC,EAAIuB,GAAG,QAAQvB,EAAIgD,KAAK9C,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQe,GAAG,CAAC,MAAQ,SAASyB,GAAQ,OAAO9C,EAAIiD,aAAaf,EAAMC,QAAQ,CAACnC,EAAIuB,GAAG,gBAAgB,GAAGrB,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,gBAAgB,CAACI,MAAM,CAAC,eAAeN,EAAIO,YAAY2C,QAAQ,aAAa,CAAC,GAAI,GAAI,GAAI,KAAK,YAAYlD,EAAIO,YAAY4C,SAAS,OAAS,0CAA0C,MAAQnD,EAAIoD,OAAO/B,GAAG,CAAC,cAAcrB,EAAIqD,iBAAiB,iBAAiBrD,EAAIsD,wBAAwB,GAAGpD,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQN,EAAIuD,aAAaC,MAAM,QAAUxD,EAAIuD,aAAaE,QAAQ,MAAQ,SAASpC,GAAG,CAAC,iBAAiB,SAASyB,GAAQ,OAAO9C,EAAIa,KAAKb,EAAIuD,aAAc,UAAWT,MAAW,CAAC5C,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,IAAI,CAACF,EAAIuB,GAAG,MAAMvB,EAAIoC,GAAoB,QAAlB1C,EAACM,EAAI0D,qBAAa,IAAAhE,OAAA,EAAjBA,EAAmBiE,aAAa,KAAK3D,EAAIoC,GAAoB,QAAlBzC,EAACK,EAAI0D,qBAAa,IAAA/D,OAAA,EAAjBA,EAAmBiE,eAAe,OAAO1D,EAAG,IAAI,CAACF,EAAIuB,GAAG,MAAMvB,EAAIoC,GAAoB,QAAlBxC,EAACI,EAAI0D,qBAAa,IAAA9D,OAAA,EAAjBA,EAAmBoB,cAAcd,EAAG,IAAI,CAACF,EAAIuB,GAAG,QAAQvB,EAAIoC,GAA+B,eAAX,QAAjBvC,EAAAG,EAAI0D,qBAAa,IAAA7D,OAAA,EAAjBA,EAAmBa,MAAuB,OAAS,WAAWR,EAAG,IAAI,CAACF,EAAIuB,GAAG,QAAQvB,EAAIoC,GAAoB,QAAlBtC,EAACE,EAAI0D,qBAAa,IAAA5D,OAAA,EAAjBA,EAAmBuC,WAA6B,QAAlBtC,EAACC,EAAI0D,qBAAa,IAAA3D,GAAjBA,EAAmByC,qBAAsB,CAACtC,EAAG,IAAI,CAACF,EAAIuB,GAAG,UAAUvB,EAAIoC,GAAGpC,EAAI0D,cAAclB,yBAAyBtC,EAAG,IAAI,CAACF,EAAIuB,GAAG,UAAUvB,EAAIoC,GAAGpC,EAAIyC,eAAezC,EAAI0D,cAAchB,wBAAwB1C,EAAIgD,MAAM,GAAG9C,EAAG,UAAU,CAACG,IAAI,aAAaC,MAAM,CAAC,MAAQN,EAAI6D,WAAW,MAAQ7D,EAAI8D,YAAY,cAAc,UAAU,CAAC5D,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,WAAW,CAACJ,EAAG,iBAAiB,CAACM,MAAM,CAACC,MAAOT,EAAI6D,WAAW9C,OAAQJ,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAI6D,WAAY,SAAUjD,IAAME,WAAW,sBAAsB,CAACZ,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,aAAa,CAACN,EAAIuB,GAAG,QAAQrB,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,aAAa,CAACN,EAAIuB,GAAG,SAAS,IAAI,GAAGrB,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQN,EAAI+D,UAAY,OAAS,QAAQ,KAAO,YAAY,CAAC7D,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,WAAW,KAAO,EAAE,YAAcN,EAAI+D,UAAY,YAAc,cAAcvD,MAAM,CAACC,MAAOT,EAAI6D,WAAWG,QAASrD,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAI6D,WAAY,UAAWjD,IAAME,WAAW,yBAAyB,IAAI,GAAGZ,EAAG,MAAM,CAACE,YAAY,gBAAgBE,MAAM,CAAC,KAAO,UAAU2D,KAAK,UAAU,CAAC/D,EAAG,YAAY,CAACmB,GAAG,CAAC,MAAQ,SAASyB,GAAQ9C,EAAIuD,aAAaE,SAAU,KAAS,CAACzD,EAAIuB,GAAG,SAASrB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWe,GAAG,CAAC,MAAQrB,EAAIkE,eAAe,CAAClE,EAAIuB,GAAG,UAAU,IAAI,GAAGrB,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,OAAO,QAAUN,EAAImE,aAAaV,QAAQ,MAAQ,SAASpC,GAAG,CAAC,iBAAiB,SAASyB,GAAQ,OAAO9C,EAAIa,KAAKb,EAAImE,aAAc,UAAWrB,MAAW,CAAE9C,EAAI0D,cAAexD,EAAG,kBAAkB,CAACI,MAAM,CAAC,OAAS,EAAE,OAAS,KAAK,CAACJ,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAA8B,cAA3BpC,EAAI0D,cAAchD,KAAuB,OAAS,QAAQ,OAAOR,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAIuC,cAAcvC,EAAI0D,cAAc3C,SAAS,OAAOb,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAI0D,cAAcU,QAAUpE,EAAI0D,cAAcU,QAAQC,SAAW,KAAK,OAAOnE,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAI0D,cAAcE,eAAe,OAAO1D,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,IAAI,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAIyC,eAAezC,EAAI0D,cAAcY,YAAY,OAAOpE,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,IAAI,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAI0D,cAAcrB,QAAQ,OAAQrC,EAAI0D,cAAchB,kBAAmBxC,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,SAAS,KAAO,IAAI,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAIyC,eAAezC,EAAI0D,cAAchB,oBAAoB,OAAO1C,EAAIgD,KAAMhD,EAAI0D,cAAclB,qBAAsBtC,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,SAAS,KAAO,IAAI,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAI0D,cAAclB,sBAAsB,OAAOxC,EAAIgD,KAAMhD,EAAI0D,cAAcd,gBAAiB1C,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,UAAU,KAAO,IAAI,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAIyC,eAAezC,EAAI0D,cAAcd,kBAAkB,OAAO5C,EAAIgD,KAAMhD,EAAI0D,cAAcf,mBAAoBzC,EAAG,uBAAuB,CAACI,MAAM,CAAC,MAAQ,UAAU,KAAO,IAAI,CAACN,EAAIuB,GAAG,IAAIvB,EAAIoC,GAAGpC,EAAI0D,cAAcf,oBAAoB,OAAO3C,EAAIgD,MAAM,GAAGhD,EAAIgD,MAAM,IAAI,IAE/lRuB,EAAkB,G,YCUf,SAASC,EAAcC,GAC5B,OAAOC,eAAQ,CACbC,IAAK,iCACLC,OAAQ,MACRH,SAKG,SAASI,EAAYJ,GAC1B,OAAOC,eAAQ,CACbC,IAAK,+BACLC,OAAQ,MACRH,SCsMW,OACf/C,KAAA,kBACA+C,OACA,OAEAlE,YAAA,CACA2C,QAAA,EACAC,SAAA,GACAzC,KAAA,GACAK,OAAA,GACAC,UAAA,GACAI,QAAA,IAGAU,UAAA,GAEAsB,MAAA,EAEAxB,SAAA,EAEAkD,SAAAC,aAAAC,QAAA,YAEAzB,aAAA,CACAE,SAAA,EACAD,MAAA,QAGAK,WAAA,CACAoB,GAAA,KACAlE,OAAA,GACAiD,QAAA,IAGAF,YAAA,CACA/C,OAAA,EAAAmE,UAAA,EAAAC,QAAA,UAAAC,QAAA,WACApB,QAAA,EAAAkB,UAAA,EAAAC,QAAA,UAAAC,QAAA,UAGAjB,aAAA,CACAV,SAAA,GAGAC,cAAA,KAEAxC,UAAA,KAGAmE,SAAA,CACAtB,YACA,uBAAAe,WAGAQ,UACA,KAAAC,UACA,KAAAC,gBAEAC,QAAA,CAEA,gBACA,IACA,KAAA7D,SAAA,EACA8D,QAAAC,IAAA,cACAzC,QAAA,KAAA3C,YAAA2C,QACAC,SAAA,KAAA5C,YAAA4C,SACAzC,KAAA,KAAAH,YAAAG,KACAK,OAAA,KAAAR,YAAAQ,OACAC,UAAA,KAAAT,YAAAS,UACAI,QAAA,KAAAb,YAAAa,UAGA,MAAAwE,QAAA,KAAAC,MAAAC,IAAA,mBACAC,OAAA,CACA7C,QAAA,KAAA3C,YAAA2C,QAAA,EACAC,SAAA,KAAA5C,YAAA4C,SACAzC,KAAA,KAAAH,YAAAG,KACAK,OAAA,KAAAR,YAAAQ,OACAC,UAAA,KAAAT,YAAAS,UACAI,QAAA,KAAAb,YAAAa,WAIAsE,QAAAC,IAAA,cAAAC,EAAAnB,MACA,MAAAmB,EAAAnB,KAAAuB,MACAN,QAAAC,IAAA,QAAAC,EAAAnB,WACAiB,QAAAC,IAAA,QAAAC,EAAAnB,UAAAwB,SACA,KAAAnE,UAAA8D,EAAAnB,UAAAwB,SAAA,GACA,KAAA7C,MAAAwC,EAAAnB,UAAAyB,eAAA,EACAR,QAAAC,IAAA,iBAAA7D,WACA4D,QAAAC,IAAA,aAAAvC,QAEA,KAAA+C,SAAAC,MAAAR,EAAAnB,KAAAU,SAAA,UAEA,MAAAiB,GACAV,QAAAU,MAAA,UAAAA,GACA,KAAAD,SAAAC,MAAA,UACA,QACA,KAAAxE,SAAA,IAKAN,cACA,KAAAf,YAAA2C,QAAA,EACA,KAAAqC,WAIA/D,aAEA,KAAAjB,YAAA,CACAG,KAAA,GACAK,OAAA,GACAC,UAAA,GACAI,QAAA,GACA8B,QAAA,EACAC,SAAA,IAGA,KAAAoC,WAIAlC,iBAAAgD,GACA,KAAA9F,YAAA4C,SAAAkD,EACA,KAAAd,WAIAjC,oBAAA+C,GACA,KAAA9F,YAAA2C,QAAAmD,EACA,KAAAd,WAIAjD,cAAAvB,GACA,MAAAuF,EAAA,CACA,kBACA,mBACA,mBAEA,OAAAA,EAAAvF,IAAA,IAIAwB,cAAAxB,GACA,MAAAuF,EAAA,CACA,cACA,eACA,gBAEA,OAAAA,EAAAvF,OAIA8B,UAAAV,GACA,kBAAAA,EAAApB,QAIAgC,aAAAZ,GACA,KAAAuB,cAAAvB,EACA,KAAA0B,WAAA,CACAoB,GAAA9C,EAAA8C,GACAlE,OAAA,GACAiD,QAAA,IAEA,KAAAT,aAAAE,SAAA,GAIA,qBACA,KAAA8C,MAAA1C,WAAA2C,SAAA,UACA,GAAAC,EACA,IACA,MAAAC,EAAA,KAAA3C,UAAAS,EAAAK,EACAe,QAAAc,EAAA,CACAzB,GAAA,KAAAvB,cAAAuB,GACAlE,OAAA,KAAA8C,WAAA9C,OACAiD,QAAA,KAAAH,WAAAG,UAGA,MAAA4B,EAAAnB,KAAAuB,MACA,KAAAG,SAAAQ,QAAA,QACA,KAAApD,aAAAE,SAAA,EACA,KAAA8B,WAEA,KAAAY,SAAAC,MAAAR,EAAAnB,KAAAmC,KAAA,QAEA,MAAAR,GACAV,QAAAU,MAAA,QAAAA,GACA,KAAAD,SAAAC,MAAA,YAOAnD,aAAAd,GACA,KAAAuB,cAAAvB,EACA,KAAAgC,aAAAV,SAAA,GAIAhB,eAAAoE,GACA,IAAAA,EAAA,UACA,MAAAC,EAAA,IAAAC,KAAAF,GACA,OAAAC,EAAAE,eAAA,SACAC,KAAA,UACAC,MAAA,UACAC,IAAA,UACAC,KAAA,UACAC,OAAA,UACAC,OAAA,UACAC,QAAA,KAKA,qBACA,IACA,MAAA3B,QAAA,KAAAC,MAAAC,IAAA,2BACA,MAAAF,EAAAnB,KAAAuB,OACA,KAAA9E,UAAA0E,EAAAnB,WAAA,IAEA,MAAA2B,GACAV,QAAAU,MAAA,YAAAA,GACA,KAAAD,SAAAC,MAAA,gBCjcuW,I,wBCQnWoB,EAAY,eACd,EACA/H,EACA8E,GACA,EACA,KACA,WACA,MAIa,aAAAiD,E","file":"js/chunk-f091e6b2.d4ac79dc.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExemptionReview.vue?vue&type=style&index=0&id=6eed1c24&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"exemption-review\"},[_c('div',{staticClass:\"filter-section\"},[_c('el-form',{ref:\"queryForm\",attrs:{\"inline\":true,\"model\":_vm.queryParams}},[_c('el-form-item',{attrs:{\"label\":\"申请类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择申请类型\",\"clearable\":\"\"},model:{value:(_vm.queryParams.type),callback:function ($$v) {_vm.$set(_vm.queryParams, \"type\", $$v)},expression:\"queryParams.type\"}},[_c('el-option',{attrs:{\"label\":\"免测申请\",\"value\":\"EXEMPTION\"}}),_c('el-option',{attrs:{\"label\":\"重测申请\",\"value\":\"RETEST\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择状态\",\"clearable\":\"\"},model:{value:(_vm.queryParams.status),callback:function ($$v) {_vm.$set(_vm.queryParams, \"status\", $$v)},expression:\"queryParams.status\"}},[_c('el-option',{attrs:{\"label\":\"待审核\",\"value\":\"PENDING\"}}),_c('el-option',{attrs:{\"label\":\"已通过\",\"value\":\"APPROVED\"}}),_c('el-option',{attrs:{\"label\":\"已驳回\",\"value\":\"REJECTED\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"班级\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择班级\",\"clearable\":\"\"},model:{value:(_vm.queryParams.className),callback:function ($$v) {_vm.$set(_vm.queryParams, \"className\", $$v)},expression:\"queryParams.className\"}},_vm._l((_vm.classList),function(className){return _c('el-option',{key:className,attrs:{\"label\":className,\"value\":className}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"关键字\"}},[_c('el-input',{attrs:{\"placeholder\":\"学生姓名/学号\",\"clearable\":\"\"},model:{value:(_vm.queryParams.keyword),callback:function ($$v) {_vm.$set(_vm.queryParams, \"keyword\", $$v)},expression:\"queryParams.keyword\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleQuery}},[_vm._v(\"查询\")]),_c('el-button',{on:{\"click\":_vm.resetQuery}},[_vm._v(\"重置\")])],1)],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"60\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"学生姓名\",\"prop\":\"studentName\",\"min-width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"学号\",\"prop\":\"studentNumber\",\"min-width\":\"120\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"班级\",\"prop\":\"className\",\"min-width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"申请类型\",\"prop\":\"type\",\"align\":\"center\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.type === 'EXEMPTION' ? 'warning' : 'info'}},[_vm._v(\" \"+_vm._s(scope.row.type === 'EXEMPTION' ? '免测' : '重测')+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"申请原因\",\"prop\":\"reason\",\"min-width\":\"200\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"content\":scope.row.reason,\"placement\":\"top\"}},[_c('span',{staticClass:\"reason-text\"},[_vm._v(_vm._s(scope.row.reason))])])]}}])}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"prop\":\"status\",\"align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm.getStatusType(scope.row.status)}},[_vm._v(\" \"+_vm._s(_vm.getStatusText(scope.row.status))+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"教师审核意见\",\"prop\":\"teacherReviewComment\",\"min-width\":\"200\",\"align\":\"center\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.teacherReviewComment)?[_c('el-tooltip',{attrs:{\"content\":scope.row.teacherReviewComment,\"placement\":\"top\"}},[_c('div',[_vm._v(\" \"+_vm._s(scope.row.teacherReviewComment)+\" \"),_c('div',{staticClass:\"review-time\"},[_vm._v(_vm._s(_vm.formatDateTime(scope.row.teacherReviewTime)))])])])]:_c('span',[_vm._v(\"-\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"管理员审核意见\",\"prop\":\"adminReviewComment\",\"min-width\":\"200\",\"align\":\"center\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.adminReviewComment)?[_c('el-tooltip',{attrs:{\"content\":scope.row.adminReviewComment,\"placement\":\"top\"}},[_c('div',[_vm._v(\" \"+_vm._s(scope.row.adminReviewComment)+\" \"),_c('div',{staticClass:\"review-time\"},[_vm._v(_vm._s(_vm.formatDateTime(scope.row.adminReviewTime)))])])])]:_c('span',[_vm._v(\"-\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.canReview(scope.row))?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleReview(scope.row)}}},[_vm._v(\"审核\")]):_vm._e(),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.handleDetail(scope.row)}}},[_vm._v(\"查看\")])]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.queryParams.pageNum,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.queryParams.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":_vm.reviewDialog.title,\"visible\":_vm.reviewDialog.visible,\"width\":\"500px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.reviewDialog, \"visible\", $event)}}},[_c('div',{staticClass:\"review-info\"},[_c('p',[_vm._v(\"学生：\"+_vm._s(_vm.currentRecord?.studentName)+\" (\"+_vm._s(_vm.currentRecord?.studentNumber)+\")\")]),_c('p',[_vm._v(\"班级：\"+_vm._s(_vm.currentRecord?.className))]),_c('p',[_vm._v(\"申请类型：\"+_vm._s(_vm.currentRecord?.type === 'EXEMPTION' ? '免测申请' : '重测申请'))]),_c('p',[_vm._v(\"申请原因：\"+_vm._s(_vm.currentRecord?.reason))]),(_vm.currentRecord?.teacherReviewComment)?[_c('p',[_vm._v(\"教师审核意见：\"+_vm._s(_vm.currentRecord.teacherReviewComment))]),_c('p',[_vm._v(\"教师审核时间：\"+_vm._s(_vm.formatDateTime(_vm.currentRecord.teacherReviewTime)))])]:_vm._e()],2),_c('el-form',{ref:\"reviewForm\",attrs:{\"model\":_vm.reviewForm,\"rules\":_vm.reviewRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"审核结果\",\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.reviewForm.status),callback:function ($$v) {_vm.$set(_vm.reviewForm, \"status\", $$v)},expression:\"reviewForm.status\"}},[_c('el-radio',{attrs:{\"label\":\"APPROVED\"}},[_vm._v(\"通过\")]),_c('el-radio',{attrs:{\"label\":\"REJECTED\"}},[_vm._v(\"驳回\")])],1)],1),_c('el-form-item',{attrs:{\"label\":_vm.isTeacher ? '教师意见' : '管理员意见',\"prop\":\"comment\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3,\"placeholder\":_vm.isTeacher ? '请输入教师审核意见' : '请输入管理员审核意见'},model:{value:(_vm.reviewForm.comment),callback:function ($$v) {_vm.$set(_vm.reviewForm, \"comment\", $$v)},expression:\"reviewForm.comment\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.reviewDialog.visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitReview}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"申请详情\",\"visible\":_vm.detailDialog.visible,\"width\":\"600px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.detailDialog, \"visible\", $event)}}},[(_vm.currentRecord)?_c('el-descriptions',{attrs:{\"column\":2,\"border\":\"\"}},[_c('el-descriptions-item',{attrs:{\"label\":\"申请类型\"}},[_vm._v(\" \"+_vm._s(_vm.currentRecord.type === 'EXEMPTION' ? '免测申请' : '重测申请')+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"当前状态\"}},[_vm._v(\" \"+_vm._s(_vm.getStatusText(_vm.currentRecord.status))+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"学生姓名\"}},[_vm._v(\" \"+_vm._s(_vm.currentRecord.student ? _vm.currentRecord.student.realName : '-')+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"学号\"}},[_vm._v(\" \"+_vm._s(_vm.currentRecord.studentNumber)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"申请时间\",\"span\":2}},[_vm._v(\" \"+_vm._s(_vm.formatDateTime(_vm.currentRecord.applyTime))+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"申请原因\",\"span\":2}},[_vm._v(\" \"+_vm._s(_vm.currentRecord.reason)+\" \")]),(_vm.currentRecord.teacherReviewTime)?_c('el-descriptions-item',{attrs:{\"label\":\"教师审核时间\",\"span\":2}},[_vm._v(\" \"+_vm._s(_vm.formatDateTime(_vm.currentRecord.teacherReviewTime))+\" \")]):_vm._e(),(_vm.currentRecord.teacherReviewComment)?_c('el-descriptions-item',{attrs:{\"label\":\"教师审核意见\",\"span\":2}},[_vm._v(\" \"+_vm._s(_vm.currentRecord.teacherReviewComment)+\" \")]):_vm._e(),(_vm.currentRecord.adminReviewTime)?_c('el-descriptions-item',{attrs:{\"label\":\"管理员审核时间\",\"span\":2}},[_vm._v(\" \"+_vm._s(_vm.formatDateTime(_vm.currentRecord.adminReviewTime))+\" \")]):_vm._e(),(_vm.currentRecord.adminReviewComment)?_c('el-descriptions-item',{attrs:{\"label\":\"管理员审核意见\",\"span\":2}},[_vm._v(\" \"+_vm._s(_vm.currentRecord.adminReviewComment)+\" \")]):_vm._e()],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n// 获取申请列表\r\nexport function getExemptionList(params) {\r\n  return request({\r\n    url: '/api/exemptions',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n\r\n// 教师审核\r\nexport function teacherReview(data) {\r\n  return request({\r\n    url: '/api/teacher/exemptions/review',\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\n// 管理员审核\r\nexport function adminReview(data) {\r\n  return request({\r\n    url: '/api/admin/exemptions/review',\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\n// 学生提交申请\r\nexport function submitExemption(data) {\r\n  return request({\r\n    url: '/api/student/exemptions',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function getExemptions(params) {\r\n  return request({\r\n    url: '/api/admin/exemptions',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n\r\nexport function reviewExemption(id, data) {\r\n  return request({\r\n    url: `/api/admin/exemptions/${id}/review`,\r\n    method: 'put',\r\n    data\r\n  })\r\n} ","<template>\r\n  <div class=\"exemption-review\">\r\n    <!-- 搜索筛选区 -->\r\n    <div class=\"filter-section\">\r\n      <el-form :inline=\"true\" :model=\"queryParams\" ref=\"queryForm\">\r\n        <el-form-item label=\"申请类型\">\r\n          <el-select v-model=\"queryParams.type\" placeholder=\"选择申请类型\" clearable>\r\n            <el-option label=\"免测申请\" value=\"EXEMPTION\"></el-option>\r\n            <el-option label=\"重测申请\" value=\"RETEST\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-select v-model=\"queryParams.status\" placeholder=\"选择状态\" clearable>\r\n            <el-option label=\"待审核\" value=\"PENDING\"></el-option>\r\n            <el-option label=\"已通过\" value=\"APPROVED\"></el-option>\r\n            <el-option label=\"已驳回\" value=\"REJECTED\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"班级\">\r\n          <el-select v-model=\"queryParams.className\" placeholder=\"选择班级\" clearable>\r\n            <el-option\r\n              v-for=\"className in classList\"\r\n              :key=\"className\"\r\n              :label=\"className\"\r\n              :value=\"className\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"关键字\">\r\n          <el-input \r\n            v-model=\"queryParams.keyword\" \r\n            placeholder=\"学生姓名/学号\"\r\n            clearable\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleQuery\">查询</el-button>\r\n          <el-button @click=\"resetQuery\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 数据表格 -->\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"tableData\"\r\n      border\r\n      stripe\r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column type=\"index\" label=\"序号\" width=\"60\" align=\"center\"></el-table-column>\r\n      \r\n      <el-table-column label=\"学生姓名\" prop=\"studentName\" min-width=\"100\" align=\"center\"></el-table-column>\r\n      \r\n      <el-table-column label=\"学号\" prop=\"studentNumber\" min-width=\"120\" align=\"center\"></el-table-column>\r\n      \r\n      <el-table-column label=\"班级\" prop=\"className\" min-width=\"100\" align=\"center\"></el-table-column>\r\n      \r\n      <el-table-column label=\"申请类型\" prop=\"type\" align=\"center\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"scope.row.type === 'EXEMPTION' ? 'warning' : 'info'\">\r\n            {{ scope.row.type === 'EXEMPTION' ? '免测' : '重测' }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column label=\"申请原因\" prop=\"reason\" min-width=\"200\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tooltip :content=\"scope.row.reason\" placement=\"top\">\r\n            <span class=\"reason-text\">{{ scope.row.reason }}</span>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column label=\"状态\" prop=\"status\" align=\"center\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"getStatusType(scope.row.status)\">\r\n            {{ getStatusText(scope.row.status) }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column label=\"教师审核意见\" prop=\"teacherReviewComment\" min-width=\"200\" align=\"center\" show-overflow-tooltip>\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"scope.row.teacherReviewComment\">\r\n            <el-tooltip :content=\"scope.row.teacherReviewComment\" placement=\"top\">\r\n              <div>\r\n                {{ scope.row.teacherReviewComment }}\r\n                <div class=\"review-time\">{{ formatDateTime(scope.row.teacherReviewTime) }}</div>\r\n              </div>\r\n            </el-tooltip>\r\n          </template>\r\n          <span v-else>-</span>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column label=\"管理员审核意见\" prop=\"adminReviewComment\" min-width=\"200\" align=\"center\" show-overflow-tooltip>\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"scope.row.adminReviewComment\">\r\n            <el-tooltip :content=\"scope.row.adminReviewComment\" placement=\"top\">\r\n              <div>\r\n                {{ scope.row.adminReviewComment }}\r\n                <div class=\"review-time\">{{ formatDateTime(scope.row.adminReviewTime) }}</div>\r\n              </div>\r\n            </el-tooltip>\r\n          </template>\r\n          <span v-else>-</span>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column label=\"操作\" align=\"center\" width=\"200\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            v-if=\"canReview(scope.row)\"\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleReview(scope.row)\"\r\n          >审核</el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"info\"\r\n            @click=\"handleDetail(scope.row)\"\r\n          >查看</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryParams.pageNum\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"queryParams.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n    <!-- 审核对话框 -->\r\n    <el-dialog\r\n      :title=\"reviewDialog.title\"\r\n      :visible.sync=\"reviewDialog.visible\"\r\n      width=\"500px\"\r\n    >\r\n      <div class=\"review-info\">\r\n        <p>学生：{{ currentRecord?.studentName }} ({{ currentRecord?.studentNumber }})</p>\r\n        <p>班级：{{ currentRecord?.className }}</p>\r\n        <p>申请类型：{{ currentRecord?.type === 'EXEMPTION' ? '免测申请' : '重测申请' }}</p>\r\n        <p>申请原因：{{ currentRecord?.reason }}</p>\r\n        <template v-if=\"currentRecord?.teacherReviewComment\">\r\n          <p>教师审核意见：{{ currentRecord.teacherReviewComment }}</p>\r\n          <p>教师审核时间：{{ formatDateTime(currentRecord.teacherReviewTime) }}</p>\r\n        </template>\r\n      </div>\r\n      <el-form :model=\"reviewForm\" :rules=\"reviewRules\" ref=\"reviewForm\" label-width=\"100px\">\r\n        <el-form-item label=\"审核结果\" prop=\"status\">\r\n          <el-radio-group v-model=\"reviewForm.status\">\r\n            <el-radio label=\"APPROVED\">通过</el-radio>\r\n            <el-radio label=\"REJECTED\">驳回</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item :label=\"isTeacher ? '教师意见' : '管理员意见'\" prop=\"comment\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            v-model=\"reviewForm.comment\"\r\n            :rows=\"3\"\r\n            :placeholder=\"isTeacher ? '请输入教师审核意见' : '请输入管理员审核意见'\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"reviewDialog.visible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitReview\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 详情对话框 -->\r\n    <el-dialog\r\n      title=\"申请详情\"\r\n      :visible.sync=\"detailDialog.visible\"\r\n      width=\"600px\"\r\n    >\r\n      <el-descriptions :column=\"2\" border v-if=\"currentRecord\">\r\n        <el-descriptions-item label=\"申请类型\">\r\n          {{ currentRecord.type === 'EXEMPTION' ? '免测申请' : '重测申请' }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"当前状态\">\r\n          {{ getStatusText(currentRecord.status) }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"学生姓名\">\r\n          {{ currentRecord.student ? currentRecord.student.realName : '-' }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"学号\">\r\n          {{ currentRecord.studentNumber }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"申请时间\" :span=\"2\">\r\n          {{ formatDateTime(currentRecord.applyTime) }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"申请原因\" :span=\"2\">\r\n          {{ currentRecord.reason }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"教师审核时间\" :span=\"2\" v-if=\"currentRecord.teacherReviewTime\">\r\n          {{ formatDateTime(currentRecord.teacherReviewTime) }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"教师审核意见\" :span=\"2\" v-if=\"currentRecord.teacherReviewComment\">\r\n          {{ currentRecord.teacherReviewComment }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"管理员审核时间\" :span=\"2\" v-if=\"currentRecord.adminReviewTime\">\r\n          {{ formatDateTime(currentRecord.adminReviewTime) }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"管理员审核意见\" :span=\"2\" v-if=\"currentRecord.adminReviewComment\">\r\n          {{ currentRecord.adminReviewComment }}\r\n        </el-descriptions-item>\r\n      </el-descriptions>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getExemptionList, teacherReview, adminReview } from '@/api/exemption'\r\n\r\nexport default {\r\n  name: 'ExemptionReview',\r\n  data() {\r\n    return {\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        type: '',\r\n        status: '',\r\n        className: '',\r\n        keyword: ''\r\n      },\r\n      // 表格数据\r\n      tableData: [],\r\n      // 总记录数\r\n      total: 0,\r\n      // 加载状态\r\n      loading: false,\r\n      // 当前用户类型\r\n      userType: localStorage.getItem('userType'),\r\n      // 审核对话框\r\n      reviewDialog: {\r\n        visible: false,\r\n        title: '申请审核'\r\n      },\r\n      // 审核表单\r\n      reviewForm: {\r\n        id: null,\r\n        status: '',\r\n        comment: ''\r\n      },\r\n      // 审核表单校验规则\r\n      reviewRules: {\r\n        status: [{ required: true, message: '请选择审核结果', trigger: 'change' }],\r\n        comment: [{ required: true, message: '请输入审核意见', trigger: 'blur' }]\r\n      },\r\n      // 详情对话框\r\n      detailDialog: {\r\n        visible: false\r\n      },\r\n      // 当前记录\r\n      currentRecord: null,\r\n      // 班级列表\r\n      classList: []\r\n    }\r\n  },\r\n  computed: {\r\n    isTeacher() {\r\n      return this.userType === 'TEACHER'\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n    this.getClassList()\r\n  },\r\n  methods: {\r\n    // 获取列表数据\r\n    async getList() {\r\n      try {\r\n        this.loading = true;\r\n        console.log('开始获取数据，参数:', {\r\n          pageNum: this.queryParams.pageNum,\r\n          pageSize: this.queryParams.pageSize,\r\n          type: this.queryParams.type,\r\n          status: this.queryParams.status,\r\n          className: this.queryParams.className,\r\n          keyword: this.queryParams.keyword\r\n        });\r\n\r\n        const res = await this.$http.get('/api/exemptions', {\r\n          params: {\r\n            pageNum: this.queryParams.pageNum - 1,\r\n            pageSize: this.queryParams.pageSize,\r\n            type: this.queryParams.type,\r\n            status: this.queryParams.status,\r\n            className: this.queryParams.className,\r\n            keyword: this.queryParams.keyword\r\n          }\r\n        });\r\n        \r\n        console.log('接口响应数据完整内容:', res.data);\r\n        if (res.data.code === 200) {\r\n          console.log('分页数据:', res.data.data);\r\n          console.log('内容数据:', res.data.data.content);\r\n          this.tableData = res.data.data.content || [];\r\n          this.total = res.data.data.totalElements || 0;\r\n          console.log('设置后的表格数据:', this.tableData);\r\n          console.log('数据总数:', this.total);\r\n        } else {\r\n          this.$message.error(res.data.message || '获取数据失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('获取列表失败:', error);\r\n        this.$message.error('获取列表失败');\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    // 查询按钮点击\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1\r\n      this.getList()\r\n    },\r\n\r\n    // 重置按钮点击\r\n    resetQuery() {\r\n      // 重置查询表单\r\n      this.queryParams = {\r\n        type: '',\r\n        status: '',\r\n        className: '',\r\n        keyword: '',\r\n        pageNum: 1,\r\n        pageSize: 10\r\n      }\r\n      // 重新获取数据\r\n      this.getList()\r\n    },\r\n\r\n    // 每页大小改变\r\n    handleSizeChange(val) {\r\n      this.queryParams.pageSize = val\r\n      this.getList()\r\n    },\r\n\r\n    // 当前页改变\r\n    handleCurrentChange(val) {\r\n      this.queryParams.pageNum = val\r\n      this.getList()\r\n    },\r\n\r\n    // 获取状态类型\r\n    getStatusType(status) {\r\n      const statusMap = {\r\n        'PENDING': 'warning',\r\n        'APPROVED': 'success',\r\n        'REJECTED': 'danger'\r\n      }\r\n      return statusMap[status] || ''\r\n    },\r\n\r\n    // 获取状态文本\r\n    getStatusText(status) {\r\n      const statusMap = {\r\n        'PENDING': '待审核',\r\n        'APPROVED': '已通过',\r\n        'REJECTED': '已驳回'\r\n      }\r\n      return statusMap[status] || status\r\n    },\r\n\r\n    // 是否可以审核\r\n    canReview(row) {\r\n      return row.status === 'PENDING'\r\n    },\r\n\r\n    // 审核按钮点击\r\n    handleReview(row) {\r\n      this.currentRecord = row\r\n      this.reviewForm = {\r\n        id: row.id,\r\n        status: '',\r\n        comment: ''\r\n      }\r\n      this.reviewDialog.visible = true\r\n    },\r\n\r\n    // 提交审核\r\n    async submitReview() {\r\n      this.$refs.reviewForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            const reviewFunc = this.isTeacher ? teacherReview : adminReview\r\n            const res = await reviewFunc({\r\n              id: this.currentRecord.id,\r\n              status: this.reviewForm.status,\r\n              comment: this.reviewForm.comment\r\n            })\r\n            \r\n            if (res.data.code === 200) {\r\n              this.$message.success('审核成功')\r\n              this.reviewDialog.visible = false\r\n              this.getList()\r\n            } else {\r\n              this.$message.error(res.data.msg || '审核失败')\r\n            }\r\n          } catch (error) {\r\n            console.error('审核失败:', error)\r\n            this.$message.error('审核失败')\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    // 查看详情\r\n    handleDetail(row) {\r\n      this.currentRecord = row\r\n      this.detailDialog.visible = true\r\n    },\r\n\r\n    // 格式化日期时间\r\n    formatDateTime(datetime) {\r\n      if (!datetime) return '-'\r\n      const date = new Date(datetime)\r\n      return date.toLocaleString('zh-CN', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit',\r\n        hour12: false\r\n      })\r\n    },\r\n\r\n    // 获取班级列表\r\n    async getClassList() {\r\n      try {\r\n        const res = await this.$http.get('/api/exemptions/classes')\r\n        if (res.data.code === 200) {\r\n          this.classList = res.data.data || []\r\n        }\r\n      } catch (error) {\r\n        console.error('获取班级列表失败:', error)\r\n        this.$message.error('获取班级列表失败')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.exemption-review {\r\n  padding: 20px;\r\n}\r\n\r\n.filter-section {\r\n  background-color: #f5f7fa;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n\r\n.reason-text {\r\n  display: inline-block;\r\n  max-width: 200px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.el-descriptions {\r\n  margin: 20px 0;\r\n}\r\n\r\n.review-time {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  margin-top: 4px;\r\n}\r\n\r\n.review-info {\r\n  background-color: #f5f7fa;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.review-info p {\r\n  margin: 5px 0;\r\n  line-height: 1.5;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExemptionReview.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExemptionReview.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ExemptionReview.vue?vue&type=template&id=6eed1c24&scoped=true\"\nimport script from \"./ExemptionReview.vue?vue&type=script&lang=js\"\nexport * from \"./ExemptionReview.vue?vue&type=script&lang=js\"\nimport style0 from \"./ExemptionReview.vue?vue&type=style&index=0&id=6eed1c24&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6eed1c24\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}