(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40d7f547"],{4959:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback"},[t("el-card",{staticClass:"info-card"},[t("div",{staticClass:"info-content"},[t("i",{staticClass:"el-icon-chat-line-round"}),t("div",{staticClass:"info-text"},[t("h3",[e._v("意见反馈")]),t("p",[e._v("欢迎提供您的宝贵意见，帮助我们改进系统。我们会认真对待每一条反馈。")])])])]),t("div",{staticClass:"operation-bar"},[t("div",{staticClass:"filter-area"},[t("el-select",{attrs:{placeholder:"反馈类型",clearable:""},model:{value:e.filterType,callback:function(t){e.filterType=t},expression:"filterType"}},[t("el-option",{attrs:{label:"全部",value:""}}),t("el-option",{attrs:{label:"建议",value:"SUGGESTION"}}),t("el-option",{attrs:{label:"问题反馈",value:"BUG"}}),t("el-option",{attrs:{label:"其他",value:"OTHER"}})],1)],1),t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(" 提交反馈 ")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.feedbackList,border:""}},[t("el-table-column",{attrs:{prop:"createTime",label:"提交时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatDateTime(t.row.createTime))+" ")]}}])}),t("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getTypeTagType(a.row.type)}},[e._v(" "+e._s(e.getTypeLabel(a.row.type))+" ")])]}}])}),t("el-table-column",{attrs:{prop:"title",label:"标题"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getStatusTagType(a.row.status)}},[e._v(" "+e._s(e.getStatusLabel(a.row.status))+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleView(a.row)}}},[e._v("查看详情")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"提交反馈",visible:e.dialogVisible,width:"600px","destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择反馈类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("el-option",{attrs:{label:"建议",value:"SUGGESTION"}}),t("el-option",{attrs:{label:"问题反馈",value:"BUG"}}),t("el-option",{attrs:{label:"其他",value:"OTHER"}})],1)],1),t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请详细描述您的反馈内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.submitFeedback}},[e._v(" 提 交 ")])],1)],1),t("el-dialog",{attrs:{title:"反馈详情",visible:e.detailVisible,width:"600px"},on:{"update:visible":function(t){e.detailVisible=t}}},[e.currentFeedback?t("div",{staticClass:"feedback-detail"},[t("div",{staticClass:"detail-item"},[t("label",[e._v("反馈类型：")]),t("el-tag",{attrs:{type:e.getTypeTagType(e.currentFeedback.type)}},[e._v(" "+e._s(e.getTypeLabel(e.currentFeedback.type))+" ")])],1),t("div",{staticClass:"detail-item"},[t("label",[e._v("提交时间：")]),t("span",[e._v(e._s(e.formatDateTime(e.currentFeedback.createTime)))])]),t("div",{staticClass:"detail-item"},[t("label",[e._v("标题：")]),t("span",[e._v(e._s(e.currentFeedback.title))])]),t("div",{staticClass:"detail-item"},[t("label",[e._v("内容：")]),t("p",{staticClass:"content"},[e._v(e._s(e.currentFeedback.content))])]),e.currentFeedback.reply?t("div",{staticClass:"detail-item"},[t("label",[e._v("回复：")]),t("div",{staticClass:"reply"},[t("p",{staticClass:"reply-content"},[e._v(e._s(e.currentFeedback.reply))]),t("div",{staticClass:"reply-info"},[t("span",[e._v("回复人："+e._s(e.currentFeedback.replyByName))]),t("span",[e._v("回复时间："+e._s(e.formatDateTime(e.currentFeedback.replyTime)))])])])]):e._e()]):e._e()])],1)},l=[],s={name:"Feedback",data(){return{loading:!1,submitting:!1,filterType:"",currentPage:1,pageSize:10,total:0,feedbackList:[],dialogVisible:!1,detailVisible:!1,currentFeedback:null,form:{type:"",title:"",content:""},rules:{type:[{required:!0,message:"请选择反馈类型",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入反馈内容",trigger:"blur"}]}}},created(){this.fetchFeedbackList()},methods:{async fetchFeedbackList(){try{this.loading=!0;const e=await this.$axios.get("/api/student/feedback",{params:{type:this.filterType,page:this.currentPage-1,size:this.pageSize}});if(200===e.data.code){const t=e.data.data;this.feedbackList=t.content,this.total=t.totalElements}}catch(e){this.$message.error("获取反馈列表失败")}finally{this.loading=!1}},handleAdd(){this.form={type:"",title:"",content:""},this.dialogVisible=!0},async submitFeedback(){try{await this.$refs.form.validate(),this.submitting=!0;const e=await this.$axios.post("/api/student/feedback",this.form);200===e.data.code&&(this.$message.success("反馈提交成功"),this.dialogVisible=!1,this.fetchFeedbackList())}catch(e){this.$message.error("提交失败："+(e.message||"未知错误"))}finally{this.submitting=!1}},handleView(e){this.currentFeedback=e,this.detailVisible=!0},handleSizeChange(e){this.pageSize=e,this.fetchFeedbackList()},handleCurrentChange(e){this.currentPage=e,this.fetchFeedbackList()},formatDateTime(e){return e?new Date(e).toLocaleString():""},getTypeTagType(e){const t={SUGGESTION:"success",BUG:"danger",OTHER:"info"};return t[e]||"info"},getTypeLabel(e){const t={SUGGESTION:"建议",BUG:"问题反馈",OTHER:"其他"};return t[e]||e},getStatusTagType(e){const t={PENDING:"info",PROCESSING:"warning",RESOLVED:"success"};return t[e]||"info"},getStatusLabel(e){const t={PENDING:"待处理",PROCESSING:"处理中",RESOLVED:"已解决"};return t[e]||e}}},r=s,n=(a("6b50"),a("2877")),o=Object(n["a"])(r,i,l,!1,null,"141de0fe",null);t["default"]=o.exports},"6b50":function(e,t,a){"use strict";a("f972")},f972:function(e,t,a){}}]);
//# sourceMappingURL=chunk-40d7f547.43a32fe2.js.map