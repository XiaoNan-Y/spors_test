{"version":3,"sources":["webpack:///./src/views/student/ScoreAppeal.vue?6d9d","webpack:///./src/views/student/ScoreAppeal.vue","webpack:///src/views/student/ScoreAppeal.vue","webpack:///./src/views/student/ScoreAppeal.vue?3b5c","webpack:///./src/views/student/ScoreAppeal.vue?dcd6"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","$event","dialogVisible","directives","name","rawName","value","loading","expression","staticStyle","appealList","scopedSlots","_u","key","fn","scope","_s","formatDateTime","row","createTime","getStatusType","status","getStatusText","reviewTime","ref","appealForm","rules","handleRecordChange","model","testRecordId","callback","$$v","$set","_l","testRecords","record","id","sportsItemName","score","expectedScore","reason","slot","submitting","submitAppeal","staticRenderFns","data","currentRecord","undefined","required","message","trigger","min","max","created","fetchAppealList","fetchAppealableRecords","methods","userId","localStorage","getItem","console","log","response","$axios","get","code","length","$message","info","error","Array","isArray","content","_error$response","recordId","find","r","$refs","validate","valid","submitData","parseFloat","post","success","resetFields","_error$response2","types","texts","datetime","Date","toLocaleString","component"],"mappings":"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","file":"js/chunk-521f1c06.dd2c1b48.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScoreAppeal.vue?vue&type=style&index=0&id=72cc5ecc&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"score-appeal\"},[_c('el-card',{staticClass:\"info-card\"},[_c('div',{staticClass:\"info-content\"},[_c('i',{staticClass:\"el-icon-info\"}),_c('div',{staticClass:\"info-text\"},[_c('h3',[_vm._v(\"体测成绩申诉\")]),_c('p',[_vm._v(\"如果您对体测成绩有异议，可以在此提交申诉。请详细说明申诉理由，我们会尽快处理。\")])])])]),_c('div',{staticClass:\"operation-bar\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\" 提交申诉 \")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.appealList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"申诉时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.formatDateTime(scope.row.createTime))+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"sportsItemName\",\"label\":\"测试项目\"}}),_c('el-table-column',{attrs:{\"prop\":\"originalScore\",\"label\":\"原始成绩\"}}),_c('el-table-column',{attrs:{\"prop\":\"expectedScore\",\"label\":\"期望成绩\"}}),_c('el-table-column',{attrs:{\"prop\":\"reason\",\"label\":\"申诉理由\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm.getStatusType(scope.row.status)}},[_vm._v(\" \"+_vm._s(_vm.getStatusText(scope.row.status))+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"reviewComment\",\"label\":\"审核意见\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"reviewTime\",\"label\":\"审核时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.formatDateTime(scope.row.reviewTime))+\" \")]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"提交申诉\",\"visible\":_vm.dialogVisible,\"width\":\"600px\",\"destroy-on-close\":true,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"appealForm\",attrs:{\"model\":_vm.appealForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"测试记录\",\"prop\":\"testRecordId\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择要申诉的测试记录\"},on:{\"change\":_vm.handleRecordChange},model:{value:(_vm.appealForm.testRecordId),callback:function ($$v) {_vm.$set(_vm.appealForm, \"testRecordId\", $$v)},expression:\"appealForm.testRecordId\"}},_vm._l((_vm.testRecords),function(record){return _c('el-option',{key:record.id,attrs:{\"label\":`${record.sportsItemName} - ${record.score}分`,\"value\":record.id}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(record.sportsItemName))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(record.score)+\"分\")])])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"期望成绩\",\"prop\":\"expectedScore\"}},[_c('el-input-number',{staticStyle:{\"width\":\"200px\"},attrs:{\"min\":0,\"max\":100,\"precision\":1,\"step\":0.1,\"controls-position\":'right'},model:{value:(_vm.appealForm.expectedScore),callback:function ($$v) {_vm.$set(_vm.appealForm, \"expectedScore\", $$v)},expression:\"appealForm.expectedScore\"}})],1),_c('el-form-item',{attrs:{\"label\":\"申诉理由\",\"prop\":\"reason\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"请详细说明申诉理由，例如：成绩记录错误、测试过程中的特殊情况等...\"},model:{value:(_vm.appealForm.reason),callback:function ($$v) {_vm.$set(_vm.appealForm, \"reason\", $$v)},expression:\"appealForm.reason\"}})],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.submitting},on:{\"click\":_vm.submitAppeal}},[_vm._v(\" 提 交 \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"score-appeal\">\n    <!-- 顶部说明卡片 -->\n    <el-card class=\"info-card\">\n      <div class=\"info-content\">\n        <i class=\"el-icon-info\"></i>\n        <div class=\"info-text\">\n          <h3>体测成绩申诉</h3>\n          <p>如果您对体测成绩有异议，可以在此提交申诉。请详细说明申诉理由，我们会尽快处理。</p>\n        </div>\n      </div>\n    </el-card>\n\n    <!-- 申诉按钮 -->\n    <div class=\"operation-bar\">\n      <el-button type=\"primary\" @click=\"dialogVisible = true\">\n        提交申诉\n      </el-button>\n    </div>\n\n    <!-- 申诉记录列表 -->\n    <el-table\n      :data=\"appealList\"\n      border\n      style=\"width: 100%\"\n      v-loading=\"loading\"\n    >\n      <el-table-column prop=\"createTime\" label=\"申诉时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ formatDateTime(scope.row.createTime) }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"sportsItemName\" label=\"测试项目\"></el-table-column>\n      <el-table-column prop=\"originalScore\" label=\"原始成绩\"></el-table-column>\n      <el-table-column prop=\"expectedScore\" label=\"期望成绩\"></el-table-column>\n      <el-table-column prop=\"reason\" label=\"申诉理由\" show-overflow-tooltip></el-table-column>\n      <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"getStatusType(scope.row.status)\">\n            {{ getStatusText(scope.row.status) }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"reviewComment\" label=\"审核意见\" show-overflow-tooltip></el-table-column>\n      <el-table-column prop=\"reviewTime\" label=\"审核时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ formatDateTime(scope.row.reviewTime) }}\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 申诉表单对话框 -->\n    <el-dialog \n      title=\"提交申诉\" \n      :visible.sync=\"dialogVisible\"\n      width=\"600px\"\n      :destroy-on-close=\"true\"\n      :close-on-click-modal=\"false\"\n    >\n      <el-form \n        :model=\"appealForm\" \n        :rules=\"rules\" \n        ref=\"appealForm\" \n        label-width=\"100px\"\n      >\n        <el-form-item label=\"测试记录\" prop=\"testRecordId\">\n          <el-select \n            v-model=\"appealForm.testRecordId\" \n            placeholder=\"请选择要申诉的测试记录\"\n            style=\"width: 100%\"\n            @change=\"handleRecordChange\"\n          >\n            <el-option\n              v-for=\"record in testRecords\"\n              :key=\"record.id\"\n              :label=\"`${record.sportsItemName} - ${record.score}分`\"\n              :value=\"record.id\"\n            >\n              <span style=\"float: left\">{{ record.sportsItemName }}</span>\n              <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ record.score }}分</span>\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"期望成绩\" prop=\"expectedScore\">\n          <el-input-number \n            v-model=\"appealForm.expectedScore\" \n            :min=\"0\" \n            :max=\"100\"\n            :precision=\"1\"\n            :step=\"0.1\"\n            :controls-position=\"'right'\"\n            style=\"width: 200px\"\n          ></el-input-number>\n        </el-form-item>\n        <el-form-item label=\"申诉理由\" prop=\"reason\">\n          <el-input \n            type=\"textarea\" \n            v-model=\"appealForm.reason\"\n            :rows=\"4\"\n            placeholder=\"请详细说明申诉理由，例如：成绩记录错误、测试过程中的特殊情况等...\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitAppeal\" :loading=\"submitting\">\n          提 交\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ScoreAppeal',\n  data() {\n    return {\n      loading: false,\n      submitting: false,\n      dialogVisible: false,\n      appealList: [],\n      testRecords: [], // 存储已通过审核的测试记录\n      currentRecord: null,\n      appealForm: {\n        testRecordId: '',\n        expectedScore: undefined,\n        reason: ''\n      },\n      rules: {\n        testRecordId: [\n          { required: true, message: '请选择要申诉的测试记录', trigger: 'change' }\n        ],\n        expectedScore: [\n          { required: true, message: '请输入期望成绩', trigger: 'blur' }\n        ],\n        reason: [\n          { required: true, message: '请输入申诉理由', trigger: 'blur' },\n          { min: 10, max: 500, message: '申诉理由长度应在10-500字之间', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  created() {\n    this.fetchAppealList()\n    this.fetchAppealableRecords() // 获取可申诉的记录\n  },\n  methods: {\n    // 获取可申诉的记录\n    async fetchAppealableRecords() {\n      try {\n        this.loading = true\n        const userId = localStorage.getItem('userId')\n        console.log('正在获取可申诉记录，userId:', userId)\n        \n        const response = await this.$axios.get('/api/student/test-records/appealable')\n        console.log('获取可申诉记录响应:', response.data)\n        \n        if (response.data.code === 200) {\n          this.testRecords = response.data.data\n          console.log('设置可申诉记录:', this.testRecords)\n          \n          if (this.testRecords.length === 0) {\n            this.$message.info('暂无可申诉的测试记录')\n          }\n        } else {\n          this.$message.error(response.data.message || '获取可申诉记录失败')\n        }\n      } catch (error) {\n        console.error('获取可申诉记录失败:', error)\n        this.$message.error('获取可申诉记录失败')\n      } finally {\n        this.loading = false\n      }\n    },\n\n    // 获取申诉列表\n    async fetchAppealList() {\n      try {\n        this.loading = true\n        const response = await this.$axios.get('/api/student/appeals')\n        console.log('获取到的申诉列表:', response.data)\n        \n        if (response.data.code === 200) {\n          // 确保返回的数据是数组\n          this.appealList = Array.isArray(response.data.data) ? \n            response.data.data : \n            (response.data.data.content || [])\n        } else {\n          this.$message.error(response.data.message || '获取申诉列表失败')\n        }\n      } catch (error) {\n        console.error('获取申诉列表失败:', error)\n        this.$message.error(error.response?.data?.message || '获取申诉列表失败')\n      } finally {\n        this.loading = false\n      }\n    },\n\n    // 处理记录选择变化\n    handleRecordChange(recordId) {\n      this.currentRecord = this.testRecords.find(r => r.id === recordId)\n      if (this.currentRecord) {\n        // 设置原始成绩\n        this.appealForm.expectedScore = this.currentRecord.score\n      }\n    },\n\n    // 提交申诉\n    submitAppeal() {\n      this.$refs.appealForm.validate(async valid => {\n        if (!valid) {\n          return\n        }\n\n        try {\n          this.submitting = true\n          // 构造提交数据，确保 expectedScore 是数字类型\n          const submitData = {\n            testRecordId: this.appealForm.testRecordId,\n            expectedScore: parseFloat(this.appealForm.expectedScore),\n            reason: this.appealForm.reason\n          }\n\n          const response = await this.$axios.post('/api/student/appeals', submitData)\n          \n          if (response.data.code === 200) {\n            this.$message.success('申诉提交成功')\n            this.dialogVisible = false\n            this.fetchAppealList()\n            this.$refs.appealForm.resetFields()\n          } else {\n            this.$message.error(response.data.message || '提交申诉失败')\n          }\n        } catch (error) {\n          console.error('提交申诉失败:', error)\n          this.$message.error(error.response?.data?.message || '提交申诉失败')\n        } finally {\n          this.submitting = false\n        }\n      })\n    },\n\n    // 状态显示相关方法\n    getStatusType(status) {\n      const types = {\n        'PENDING': 'warning',\n        'APPROVED': 'success',\n        'REJECTED': 'danger'\n      }\n      return types[status] || 'info'\n    },\n\n    getStatusText(status) {\n      const texts = {\n        'PENDING': '待审核',\n        'APPROVED': '已通过',\n        'REJECTED': '已驳回'\n      }\n      return texts[status] || status\n    },\n\n    formatDateTime(datetime) {\n      if (!datetime) return ''\n      return new Date(datetime).toLocaleString()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.score-appeal {\n  padding: 20px;\n\n  .info-card {\n    margin-bottom: 20px;\n    \n    .info-content {\n      display: flex;\n      align-items: flex-start;\n\n      .el-icon-info {\n        font-size: 24px;\n        color: #409EFF;\n        margin-right: 15px;\n      }\n\n      .info-text {\n        h3 {\n          margin: 0 0 10px;\n          color: #303133;\n        }\n\n        p {\n          margin: 0;\n          color: #606266;\n        }\n      }\n    }\n  }\n\n  .operation-bar {\n    margin: 20px 0;\n  }\n\n  // 添加一些动画效果\n  .el-dialog {\n    .el-select {\n      width: 100%;\n    }\n    \n    .el-input-number {\n      width: 180px;\n    }\n    \n    .el-textarea {\n      textarea {\n        transition: border-color 0.3s;\n        &:hover, &:focus {\n          border-color: #409EFF;\n        }\n      }\n    }\n  }\n\n  // 添加表格内容的样式\n  .el-table {\n    margin-top: 20px;\n    \n    .el-tag {\n      margin: 0;\n    }\n    \n    .cell {\n      white-space: pre-line;\n    }\n  }\n}\n</style> ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScoreAppeal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScoreAppeal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ScoreAppeal.vue?vue&type=template&id=72cc5ecc&scoped=true\"\nimport script from \"./ScoreAppeal.vue?vue&type=script&lang=js\"\nexport * from \"./ScoreAppeal.vue?vue&type=script&lang=js\"\nimport style0 from \"./ScoreAppeal.vue?vue&type=style&index=0&id=72cc5ecc&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72cc5ecc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}