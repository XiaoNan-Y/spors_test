{"version":3,"sources":["webpack:///./src/views/teacher/StudentRecords.vue","webpack:///src/views/teacher/StudentRecords.vue","webpack:///./src/views/teacher/StudentRecords.vue?f991","webpack:///./src/views/teacher/StudentRecords.vue?644a","webpack:///./src/views/teacher/StudentRecords.vue?6008"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","queryParams","model","value","className","callback","$$v","$set","expression","_l","classNames","key","sportsItemId","sportsItems","item","id","name","status","studentNumber","on","handleQuery","_v","resetQuery","directives","rawName","loading","staticStyle","tableData","scopedSlots","_u","fn","scope","canEdit","row","$event","handleEdit","handleDetail","pageNum","pageSize","total","handleSizeChange","handleCurrentChange","editDialog","visible","handleEditDialogClosed","editForm","editRules","_s","studentName","sportsItemName","score","_n","slot","submitEdit","detailDialog","detailForm","getStatusType","getStatusText","createdAt","updatedAt","staticRenderFns","data","undefined","required","message","trigger","type","created","init","methods","Promise","all","getClassNames","getSportsItems","getList","response","$axios","get","params","page","size","keyword","code","content","totalElements","error","console","$message","res","$refs","queryForm","resetFields","val","statusMap","studentInfo","realName","sportsItem","validate","valid","log","parseFloat","isNaN","put","headers","success","stack","errorMessage","warning","_this$$refs$editForm","component"],"mappings":"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","file":"js/chunk-58f0b7c2.8e236fcc.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"student-records\"},[_c('div',{staticClass:\"filter-section\"},[_c('el-form',{ref:\"queryForm\",attrs:{\"inline\":true,\"model\":_vm.queryParams}},[_c('el-form-item',{attrs:{\"label\":\"班级\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择班级\",\"clearable\":\"\"},model:{value:(_vm.queryParams.className),callback:function ($$v) {_vm.$set(_vm.queryParams, \"className\", $$v)},expression:\"queryParams.className\"}},_vm._l((_vm.classNames),function(className){return _c('el-option',{key:className,attrs:{\"label\":className,\"value\":className}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"测试项目\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择测试项目\",\"clearable\":\"\"},model:{value:(_vm.queryParams.sportsItemId),callback:function ($$v) {_vm.$set(_vm.queryParams, \"sportsItemId\", $$v)},expression:\"queryParams.sportsItemId\"}},_vm._l((_vm.sportsItems),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择状态\",\"clearable\":\"\"},model:{value:(_vm.queryParams.status),callback:function ($$v) {_vm.$set(_vm.queryParams, \"status\", $$v)},expression:\"queryParams.status\"}},[_c('el-option',{attrs:{\"label\":\"待审核\",\"value\":\"PENDING\"}}),_c('el-option',{attrs:{\"label\":\"已通过\",\"value\":\"APPROVED\"}}),_c('el-option',{attrs:{\"label\":\"已驳回\",\"value\":\"REJECTED\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"学号\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入学号\",\"clearable\":\"\"},model:{value:(_vm.queryParams.studentNumber),callback:function ($$v) {_vm.$set(_vm.queryParams, \"studentNumber\", $$v)},expression:\"queryParams.studentNumber\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleQuery}},[_vm._v(\"查询\")]),_c('el-button',{on:{\"click\":_vm.resetQuery}},[_vm._v(\"重置\")])],1)],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"60\"}}),_c('el-table-column',{attrs:{\"prop\":\"studentInfo.realName\",\"label\":\"学生姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"studentInfo.studentNumber\",\"label\":\"学号\"}}),_c('el-table-column',{attrs:{\"prop\":\"studentInfo.className\",\"label\":\"班级\"}}),_c('el-table-column',{attrs:{\"prop\":\"sportsItem.name\",\"label\":\"测试项目\"}}),_c('el-table-column',{attrs:{\"prop\":\"score\",\"label\":\"成绩\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"disabled\":!_vm.canEdit(scope.row)},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\" 修改 \")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.handleDetail(scope.row)}}},[_vm._v(\" 详情 \")])]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.queryParams.pageNum,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.queryParams.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"修改成绩\",\"visible\":_vm.editDialog.visible,\"width\":\"500px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.editDialog, \"visible\", $event)},\"closed\":_vm.handleEditDialogClosed}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"学生姓名\"}},[_c('span',[_vm._v(_vm._s(_vm.editForm.studentName))])]),_c('el-form-item',{attrs:{\"label\":\"测试项目\"}},[_c('span',[_vm._v(_vm._s(_vm.editForm.sportsItemName))])]),_c('el-form-item',{attrs:{\"label\":\"成绩\",\"prop\":\"score\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.editForm.score),callback:function ($$v) {_vm.$set(_vm.editForm, \"score\", _vm._n($$v))},expression:\"editForm.score\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialog.visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitEdit}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"成绩详情\",\"visible\":_vm.detailDialog.visible,\"width\":\"500px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.detailDialog, \"visible\", $event)}}},[_c('el-descriptions',{attrs:{\"column\":1,\"border\":\"\"}},[_c('el-descriptions-item',{attrs:{\"label\":\"学生姓名\"}},[_vm._v(_vm._s(_vm.detailForm.studentName))]),_c('el-descriptions-item',{attrs:{\"label\":\"学号\"}},[_vm._v(_vm._s(_vm.detailForm.studentNumber))]),_c('el-descriptions-item',{attrs:{\"label\":\"班级\"}},[_vm._v(_vm._s(_vm.detailForm.className))]),_c('el-descriptions-item',{attrs:{\"label\":\"测试项目\"}},[_vm._v(_vm._s(_vm.detailForm.sportsItemName))]),_c('el-descriptions-item',{attrs:{\"label\":\"成绩\"}},[_vm._v(_vm._s(_vm.detailForm.score))]),_c('el-descriptions-item',{attrs:{\"label\":\"状态\"}},[_c('el-tag',{attrs:{\"type\":_vm.getStatusType(_vm.detailForm.status)}},[_vm._v(\" \"+_vm._s(_vm.getStatusText(_vm.detailForm.status))+\" \")])],1),_c('el-descriptions-item',{attrs:{\"label\":\"创建时间\"}},[_vm._v(_vm._s(_vm.detailForm.createdAt))]),_c('el-descriptions-item',{attrs:{\"label\":\"更新时间\"}},[_vm._v(_vm._s(_vm.detailForm.updatedAt))])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"student-records\">\r\n    <!-- 搜索筛选区 -->\r\n    <div class=\"filter-section\">\r\n      <el-form :inline=\"true\" :model=\"queryParams\" ref=\"queryForm\">\r\n        <el-form-item label=\"班级\">\r\n          <el-select v-model=\"queryParams.className\" placeholder=\"选择班级\" clearable>\r\n            <el-option\r\n              v-for=\"className in classNames\"\r\n              :key=\"className\"\r\n              :label=\"className\"\r\n              :value=\"className\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试项目\">\r\n          <el-select v-model=\"queryParams.sportsItemId\" placeholder=\"选择测试项目\" clearable>\r\n            <el-option\r\n              v-for=\"item in sportsItems\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-select v-model=\"queryParams.status\" placeholder=\"选择状态\" clearable>\r\n            <el-option label=\"待审核\" value=\"PENDING\"></el-option>\r\n            <el-option label=\"已通过\" value=\"APPROVED\"></el-option>\r\n            <el-option label=\"已驳回\" value=\"REJECTED\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"学号\">\r\n          <el-input \r\n            v-model=\"queryParams.studentNumber\" \r\n            placeholder=\"请输入学号\"\r\n            clearable\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleQuery\">查询</el-button>\r\n          <el-button @click=\"resetQuery\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 数据表格 -->\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\"\r\n      border>\r\n      <el-table-column type=\"index\" label=\"序号\" width=\"60\"></el-table-column>\r\n      <el-table-column prop=\"studentInfo.realName\" label=\"学生姓名\"></el-table-column>\r\n      <el-table-column prop=\"studentInfo.studentNumber\" label=\"学号\"></el-table-column>\r\n      <el-table-column prop=\"studentInfo.className\" label=\"班级\"></el-table-column>\r\n      <el-table-column prop=\"sportsItem.name\" label=\"测试项目\"></el-table-column>\r\n      <el-table-column prop=\"score\" label=\"成绩\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"180\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleEdit(scope.row)\"\r\n            :disabled=\"!canEdit(scope.row)\">\r\n            修改\r\n          </el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"info\"\r\n            @click=\"handleDetail(scope.row)\">\r\n            详情\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryParams.pageNum\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"queryParams.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n    <!-- 添加修改对话框 -->\r\n    <el-dialog\r\n      title=\"修改成绩\"\r\n      :visible.sync=\"editDialog.visible\"\r\n      width=\"500px\"\r\n      @closed=\"handleEditDialogClosed\">\r\n      <el-form\r\n        :model=\"editForm\"\r\n        :rules=\"editRules\"\r\n        ref=\"editForm\"\r\n        label-width=\"100px\">\r\n        <el-form-item label=\"学生姓名\">\r\n          <span>{{ editForm.studentName }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"测试项目\">\r\n          <span>{{ editForm.sportsItemName }}</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"成绩\" prop=\"score\">\r\n          <el-input v-model.number=\"editForm.score\" type=\"number\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialog.visible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 添加详情对话框 -->\r\n    <el-dialog\r\n      title=\"成绩详情\"\r\n      :visible.sync=\"detailDialog.visible\"\r\n      width=\"500px\">\r\n      <el-descriptions :column=\"1\" border>\r\n        <el-descriptions-item label=\"学生姓名\">{{ detailForm.studentName }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"学号\">{{ detailForm.studentNumber }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"班级\">{{ detailForm.className }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"测试项目\">{{ detailForm.sportsItemName }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"成绩\">{{ detailForm.score }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"状态\">\r\n          <el-tag :type=\"getStatusType(detailForm.status)\">\r\n            {{ getStatusText(detailForm.status) }}\r\n          </el-tag>\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"创建时间\">{{ detailForm.createdAt }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"更新时间\">{{ detailForm.updatedAt }}</el-descriptions-item>\r\n      </el-descriptions>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StudentRecords',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        className: '',\r\n        sportsItemId: undefined,\r\n        status: '',\r\n        studentNumber: ''\r\n      },\r\n      classNames: [],\r\n      sportsItems: [],\r\n      tableData: [],\r\n      total: 0,\r\n      editDialog: {\r\n        visible: false\r\n      },\r\n      editForm: {\r\n        id: null,\r\n        studentName: '',\r\n        sportsItemName: '',\r\n        score: null\r\n      },\r\n      editRules: {\r\n        score: [\r\n          { required: true, message: '请输入成绩', trigger: 'blur' },\r\n          { type: 'number', message: '成绩必须为数字', trigger: 'blur' }\r\n        ]\r\n      },\r\n      detailDialog: {\r\n        visible: false\r\n      },\r\n      detailForm: {\r\n        studentName: '',\r\n        studentNumber: '',\r\n        className: '',\r\n        sportsItemName: '',\r\n        score: null,\r\n        status: '',\r\n        createdAt: '',\r\n        updatedAt: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    async init() {\r\n      await Promise.all([\r\n        this.getClassNames(),\r\n        this.getSportsItems(),\r\n        this.getList()\r\n      ])\r\n    },\r\n    async getList() {\r\n      try {\r\n        this.loading = true\r\n        const response = await this.$axios.get('/api/teacher/student-records', {\r\n          params: {\r\n            page: this.queryParams.pageNum - 1,\r\n            size: this.queryParams.pageSize,\r\n            className: this.queryParams.className,\r\n            sportsItemId: this.queryParams.sportsItemId,\r\n            status: this.queryParams.status,\r\n            keyword: this.queryParams.studentNumber\r\n          }\r\n        })\r\n        \r\n        if (response.data.code === 200) {\r\n          this.tableData = response.data.data.content\r\n          this.total = response.data.data.totalElements\r\n        }\r\n      } catch (error) {\r\n        console.error('获取列表失败:', error)\r\n        this.$message.error('获取列表失败: ' + error.message)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    async getClassNames() {\r\n      try {\r\n        const res = await this.$axios.get('/api/teacher/classes')\r\n        if (res.data.code === 200) {\r\n          this.classNames = res.data.data\r\n        }\r\n      } catch (error) {\r\n        console.error('获取班级列表失败:', error)\r\n      }\r\n    },\r\n    async getSportsItems() {\r\n      try {\r\n        const res = await this.$axios.get('/api/teacher/sports-items')\r\n        if (res.data.code === 200) {\r\n          this.sportsItems = res.data.data\r\n        }\r\n      } catch (error) {\r\n        console.error('获取体测项目列表失败:', error)\r\n      }\r\n    },\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1\r\n      this.getList()\r\n    },\r\n    resetQuery() {\r\n      this.$refs.queryForm.resetFields()\r\n      this.queryParams = {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        className: '',\r\n        sportsItemId: undefined,\r\n        status: '',\r\n        studentNumber: ''\r\n      }\r\n      this.getList()\r\n    },\r\n    handleSizeChange(val) {\r\n      this.queryParams.pageSize = val\r\n      this.getList()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.queryParams.pageNum = val\r\n      this.getList()\r\n    },\r\n    getStatusType(status) {\r\n      const statusMap = {\r\n        'PENDING': 'warning',\r\n        'APPROVED': 'success',\r\n        'REJECTED': 'danger'\r\n      }\r\n      return statusMap[status] || 'info'\r\n    },\r\n    getStatusText(status) {\r\n      const statusMap = {\r\n        'PENDING': '待审核',\r\n        'APPROVED': '已通过',\r\n        'REJECTED': '已驳回'\r\n      }\r\n      return statusMap[status] || status\r\n    },\r\n    canEdit(row) {\r\n      return row.status === 'PENDING' || row.status === 'REJECTED'\r\n    },\r\n    handleEdit(row) {\r\n      this.editForm = {\r\n        id: row.id,\r\n        studentName: row.studentInfo.realName,\r\n        sportsItemName: row.sportsItem.name,\r\n        score: row.score\r\n      }\r\n      this.editDialog.visible = true\r\n    },\r\n    handleDetail(row) {\r\n      this.detailForm = {\r\n        studentName: row.studentInfo.realName,\r\n        studentNumber: row.studentInfo.studentNumber,\r\n        className: row.studentInfo.className,\r\n        sportsItemName: row.sportsItem.name,\r\n        score: row.score,\r\n        status: row.status,\r\n        createdAt: row.createdAt,\r\n        updatedAt: row.updatedAt\r\n      }\r\n      this.detailDialog.visible = true\r\n    },\r\n    submitEdit() {\r\n      this.$refs.editForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            console.log('开始提交修改请求，表单数据：', this.editForm);\r\n            \r\n            // 确保成绩是数字类型\r\n            const score = parseFloat(this.editForm.score);\r\n            if (isNaN(score)) {\r\n              this.$message.error('请输入有效的成绩');\r\n              return;\r\n            }\r\n\r\n            console.log('发送请求前的数据：', {\r\n              id: this.editForm.id,\r\n              score: score\r\n            });\r\n\r\n            const response = await this.$axios.put(\r\n              `/api/teacher/test-records/${this.editForm.id}`,\r\n              { score: score },\r\n              {\r\n                headers: {\r\n                  'Content-Type': 'application/json'\r\n                }\r\n              }\r\n            );\r\n            \r\n            console.log('服务器响应：', response);\r\n\r\n            if (response.data.code === 200) {\r\n              this.$message.success('修改成功');\r\n              this.editDialog.visible = false;\r\n              this.getList();\r\n            } else {\r\n              this.$message.error(response.data.message || '修改失败');\r\n            }\r\n          } catch (error) {\r\n            console.error('修改失败，详细错误信息：', {\r\n              error: error,\r\n              response: error.response,\r\n              message: error.message,\r\n              stack: error.stack\r\n            });\r\n\r\n            let errorMessage = '修改失败';\r\n            if (error.response) {\r\n              console.log('服务器响应状态：', error.response.status);\r\n              console.log('服务器响应数据：', error.response.data);\r\n              errorMessage = error.response.data.message || errorMessage;\r\n            }\r\n\r\n            this.$message.error(errorMessage);\r\n          }\r\n        } else {\r\n          console.log('表单验证失败');\r\n          this.$message.warning('请正确填写表单');\r\n        }\r\n      });\r\n    },\r\n    handleEditDialogClosed() {\r\n      this.$refs.editForm?.resetFields()\r\n      this.editForm = {\r\n        id: null,\r\n        studentName: '',\r\n        sportsItemName: '',\r\n        score: null\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.student-records {\r\n  padding: 20px;\r\n}\r\n.filter-section {\r\n  margin-bottom: 20px;\r\n}\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StudentRecords.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StudentRecords.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./StudentRecords.vue?vue&type=template&id=2d8d0579&scoped=true\"\nimport script from \"./StudentRecords.vue?vue&type=script&lang=js\"\nexport * from \"./StudentRecords.vue?vue&type=script&lang=js\"\nimport style0 from \"./StudentRecords.vue?vue&type=style&index=0&id=2d8d0579&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d8d0579\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StudentRecords.vue?vue&type=style&index=0&id=2d8d0579&prod&scoped=true&lang=css\""],"sourceRoot":""}