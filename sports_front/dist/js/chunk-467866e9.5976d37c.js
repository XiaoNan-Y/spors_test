(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-467866e9"],{"44a0":function(e,t,a){},4959:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("反馈建议")])]),t("el-form",{ref:"feedbackForm",attrs:{model:e.feedbackForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"反馈类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择反馈类型"},model:{value:e.feedbackForm.type,callback:function(t){e.$set(e.feedbackForm,"type",t)},expression:"feedbackForm.type"}},[t("el-option",{attrs:{label:"体测体验",value:"test_experience"}}),t("el-option",{attrs:{label:"系统建议",value:"system_suggestion"}}),t("el-option",{attrs:{label:"其他问题",value:"other"}})],1)],1),t("el-form-item",{attrs:{label:"反馈标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入反馈标题"},model:{value:e.feedbackForm.title,callback:function(t){e.$set(e.feedbackForm,"title",t)},expression:"feedbackForm.title"}})],1),t("el-form-item",{attrs:{label:"反馈内容",prop:"content"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请详细描述您的反馈内容"},model:{value:e.feedbackForm.content,callback:function(t){e.$set(e.feedbackForm,"content",t)},expression:"feedbackForm.content"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.submitFeedback}},[e._v("提交反馈")]),t("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1),t("div",{staticClass:"history-feedback"},[t("h3",[e._v("历史反馈")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.feedbackHistory}},[t("el-table-column",{attrs:{prop:"type",label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getFeedbackTypeName(t.row.type))+" ")]}}])}),t("el-table-column",{attrs:{prop:"title",label:"标题",width:"180"}}),t("el-table-column",{attrs:{prop:"content",label:"内容"}}),t("el-table-column",{attrs:{prop:"createTime",label:"提交时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatDate(t.row.createTime))+" ")]}}])}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getStatusType(a.row.status)}},[e._v(e._s(e.getStatusName(a.row.status)))])]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)},s=[],o=a("bc3a"),i=a.n(o),n=a("4e22"),l=a.n(n),c={name:"Feedback",data(){return{feedbackForm:{type:"",title:"",content:""},rules:{type:[{required:!0,message:"请选择反馈类型",trigger:"change"}],title:[{required:!0,message:"请输入反馈标题",trigger:"blur"}],content:[{required:!0,message:"请输入反馈内容",trigger:"blur"}]},submitting:!1,loading:!1,feedbackHistory:[],currentPage:1,pageSize:10,total:0}},created(){this.fetchFeedbackHistory()},methods:{async submitFeedback(){try{await this.$refs.feedbackForm.validate(),this.submitting=!0,await i.a.post("/api/feedback",this.feedbackForm),this.$message.success("反馈提交成功"),this.resetForm(),this.fetchFeedbackHistory()}catch(e){e.response?this.$message.error(e.response.data.message||"提交失败"):this.$message.error("提交失败，请稍后重试"),console.error("Error submitting feedback:",e)}finally{this.submitting=!1}},resetForm(){this.$refs.feedbackForm.resetFields()},async fetchFeedbackHistory(){this.loading=!0;try{const e=await i.a.get("/api/feedback/history",{params:{page:this.currentPage-1,size:this.pageSize}});this.feedbackHistory=e.data.content,this.total=e.data.totalElements}catch(e){this.$message.error("获取历史反馈失败"),console.error("Error fetching feedback history:",e)}finally{this.loading=!1}},handleSizeChange(e){this.pageSize=e,this.fetchFeedbackHistory()},handleCurrentChange(e){this.currentPage=e,this.fetchFeedbackHistory()},formatDate(e){return l()(e).format("YYYY-MM-DD HH:mm")},getFeedbackTypeName(e){const t={test_experience:"体测体验",system_suggestion:"系统建议",other:"其他问题"};return t[e]||e},getStatusType(e){const t={pending:"info",processing:"warning",resolved:"success",rejected:"danger"};return t[e]||"info"},getStatusName(e){const t={pending:"待处理",processing:"处理中",resolved:"已解决",rejected:"已驳回"};return t[e]||e}}},d=c,u=(a("9a42"),a("2877")),p=Object(u["a"])(d,r,s,!1,null,"0d25a816",null);t["default"]=p.exports},"9a42":function(e,t,a){"use strict";a("44a0")}}]);
//# sourceMappingURL=chunk-467866e9.5976d37c.js.map